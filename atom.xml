<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å·¥è—¤æ—§äºŒã®åšå®¢</title>
  
  
  <link href="http://huang_zhao.gitee.io/task/atom.xml" rel="self"/>
  
  <link href="http://huang_zhao.gitee.io/task/"/>
  <updated>2020-09-18T11:02:02.710Z</updated>
  <id>http://huang_zhao.gitee.io/task/</id>
  
  <author>
    <name>çˆ±è‚–å½¤çœŸæ˜¯å¤ªå¥½äº†</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Typescript è£…é¥°å™¨</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E8%A3%85%E9%A5%B0%E5%99%A8/</id>
    <published>2020-09-19T15:59:11.000Z</published>
    <updated>2020-09-18T11:02:02.710Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1 å®šä¹‰"></a>1 å®šä¹‰</h3><p>æ¨¡ä»¿pythonçš„ï¼Œæ²¡å•¥å¥½è¯´</p><p>ç”¨æ³•åŸºæœ¬ä¸€æ¨¡ä¸€æ ·</p><p>tsä¸­çš„è£…é¥°å™¨å¯ä»¥æ³¨å…¥åˆ°ç±»ï¼Œå±æ€§ï¼Œæ–¹æ³•ï¼Œå‚æ•°ä¸Š</p><h3 id="2-ç±»è£…é¥°å™¨"><a href="#2-ç±»è£…é¥°å™¨" class="headerlink" title="2 ç±»è£…é¥°å™¨"></a>2 ç±»è£…é¥°å™¨</h3><h4 id="2-1-æ— å‚è£…é¥°å™¨"><a href="#2-1-æ— å‚è£…é¥°å™¨" class="headerlink" title="2.1 æ— å‚è£…é¥°å™¨"></a>2.1 æ— å‚è£…é¥°å™¨</h4><pre class=" language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">logClass</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>    params<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>apiUrl <span class="token operator">=</span> <span class="token string">"xxx"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>@logClass<span class="token keyword">class</span> <span class="token class-name">HttpClient</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å¯èƒ½ä¼šæŠ¥é”™ï¼Œæ£€æµ‹ä¸åˆ°è¿™ä¸ªå±æ€§ï¼Œæ˜¯ideæŠ¥çš„é”™ä¸ç”¨ç®¡</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>apiUrl<span class="token punctuation">)</span></code></pre><h4 id="2-2-æœ‰å‚è£…é¥°å™¨ï¼ˆè£…é¥°å™¨å·¥å‚ï¼‰"><a href="#2-2-æœ‰å‚è£…é¥°å™¨ï¼ˆè£…é¥°å™¨å·¥å‚ï¼‰" class="headerlink" title="2.2 æœ‰å‚è£…é¥°å™¨ï¼ˆè£…é¥°å™¨å·¥å‚ï¼‰"></a>2.2 æœ‰å‚è£…é¥°å™¨ï¼ˆè£…é¥°å™¨å·¥å‚ï¼‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æœ‰å‚è£…é¥°å™¨</span><span class="token keyword">function</span> <span class="token function">logClass</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        params<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>apiUrl <span class="token operator">=</span> msg    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>@<span class="token function">logClass</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">HttpClient</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>apiUrl<span class="token punctuation">)</span></code></pre><h3 id="3-å±æ€§è£…é¥°å™¨"><a href="#3-å±æ€§è£…é¥°å™¨" class="headerlink" title="3 å±æ€§è£…é¥°å™¨"></a>3 å±æ€§è£…é¥°å™¨</h3><p>æ³¨æ„ç‚¹ï¼š</p><p>åªèƒ½æœ‰å‚ï¼Œä¼ å…¥çš„ä¿©å‚æ•°</p><ul><li>å‚æ•°1ï¼šå¯¹äºé™æ€æˆå‘˜æ¥è¯´å°±æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´å°±æ˜¯ç±»çš„åŸå½¢å¯¹è±¡</li><li>å‚æ•°2ï¼šæˆå‘˜åå­—</li></ul><pre class=" language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">logPrototype</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¤–å±‚å‡½æ•°æ¥å—å‚æ•°</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// å†…å±‚å‡½æ•°æ¥å—ç±»ï¼Œå±æ€§å</span>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>targat<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>attr<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>targat<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// æ³¨æ„è¿™é‡Œåœ¨ä¿®æ”¹çš„æ—¶å€™éœ€è¦ç”¨[]è€Œä¸èƒ½ç›´æ¥ç‚¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨åŸå½¢é“¾</span>        targat<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> params    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">HttpClient</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    @<span class="token function">logPrototype</span><span class="token punctuation">(</span><span class="token string">"baidu"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> url<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">|</span> undefined    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>url<span class="token punctuation">)</span></code></pre><h3 id="4-æ–¹æ³•è£…é¥°å™¨"><a href="#4-æ–¹æ³•è£…é¥°å™¨" class="headerlink" title="4 æ–¹æ³•è£…é¥°å™¨"></a>4 æ–¹æ³•è£…é¥°å™¨</h3><p>æ¥å—ä¸‰ä¸ªå‚æ•°</p><ul><li>å‚æ•°1ï¼šå¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå½¢</li><li>æˆå‘˜åå­—</li><li>æˆå‘˜çš„å±æ€§æè¿°ç¬¦</li></ul><pre class=" language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">logFunc</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¤–å±‚å‡½æ•°æ¥å—å‚æ•°</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// å†…å±‚å‡½æ•°æ¥å—ç±»ï¼Œå±æ€§å</span>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>funcName<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>desc<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>funcName<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// è¿™è·Ÿç±»è£…é¥°å™¨æ²¡å•¥åŒºåˆ«ï¼Œç›´æ¥æ‹¿åˆ°ç±»äº†å°±èƒ½éšä¾¿æ”¹äº†</span>        <span class="token comment" spellcheck="true">// ä½†æ˜¯è¿™é‡Œæ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼Œçœ‹ä¸‹é¢</span>        target<span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">HttpClient</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> url<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">|</span> undefined    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    @<span class="token function">logFunc</span><span class="token punctuation">(</span><span class="token string">"run func"</span><span class="token punctuation">)</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>h<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     </code></pre><p><strong>æ›¿æ¢æ–¹æ³•</strong></p><pre class=" language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">logFunc</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¤–å±‚å‡½æ•°æ¥å—å‚æ•°</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// å†…å±‚å‡½æ•°æ¥å—ç±»ï¼Œå±æ€§å</span>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>funcName<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>desc<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// desc.value å°±æ˜¯åŸæ¥çš„æ–¹æ³•</span>        <span class="token comment" spellcheck="true">// ç›´æ¥æ›¿æ¢äº†ä¸ªæ–°çš„</span>        <span class="token comment" spellcheck="true">// ä½†æ˜¯æˆ‘åªæƒ³æ‰©å±•ä¸æ˜¯æƒ³ç›´æ¥æ¢äº†ï¼Œçœ‹ä¸‹é¢</span>        desc<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"xxxx"</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">HttpClient</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> url<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">|</span> undefined    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    @<span class="token function">logFunc</span><span class="token punctuation">(</span><span class="token string">"run func"</span><span class="token punctuation">)</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>h<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </code></pre><p><strong>ä¿®æ”¹æ–¹æ³•</strong></p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æœ‰å‚è£…é¥°å™¨</span><span class="token keyword">function</span> <span class="token function">logFunc</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¤–å±‚å‡½æ•°æ¥å—å‚æ•°</span>    <span class="token comment" spellcheck="true">// console.log(params)</span>    <span class="token comment" spellcheck="true">// å†…å±‚å‡½æ•°æ¥å—ç±»ï¼Œå±æ€§å</span>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>funcName<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">,</span>desc<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// desc.value å°±æ˜¯åŸæ¥çš„æ–¹æ³•</span>        <span class="token keyword">var</span> oMethod <span class="token operator">=</span> desc<span class="token punctuation">.</span>value        desc<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            args <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// è°ƒç”¨åŸæ¥çš„æ–¹æ³•</span>            <span class="token comment" spellcheck="true">// oMethod()</span>            <span class="token comment" spellcheck="true">// ä¸ºåŸæ¥çš„æ–¹æ³•ä¼ å‚</span>            oMethod<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">HttpClient</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> url<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">|</span> undefined    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    @<span class="token function">logFunc</span><span class="token punctuation">(</span><span class="token string">"run func"</span><span class="token punctuation">)</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">)</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>h<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">"zaaa"</span><span class="token punctuation">)</span>     </code></pre><p>æ–¹æ³•å‚æ•°è£…é¥°å™¨ç”¨çš„ä¸å¤šå°±ä¸è®°äº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1 å®šä¹‰&quot;&gt;&lt;/a&gt;1 å®šä¹‰&lt;/h3&gt;&lt;p&gt;æ¨¡ä»¿pythonçš„ï¼Œæ²¡å•¥å¥½è¯´&lt;/p&gt;
&lt;p&gt;ç”¨æ³•åŸºæœ¬ä¸€æ¨¡ä¸€æ ·&lt;/p&gt;
&lt;p&gt;tsä¸­çš„è£…é¥°å™¨å¯ä»¥æ³¨å…¥åˆ°ç±»ï¼Œå±æ€§ï¼Œæ–¹æ³•ï¼Œå‚æ•°ä¸Š&lt;</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
    <category term="tsé«˜çº§" scheme="http://huang_zhao.gitee.io/task/tags/ts%E9%AB%98%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>Typescript æ³›å‹</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E6%B3%9B%E5%9E%8B/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E6%B3%9B%E5%9E%8B/</id>
    <published>2020-09-19T15:59:11.000Z</published>
    <updated>2020-09-18T11:01:43.878Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ³›å‹çš„å®šä¹‰"><a href="#1-æ³›å‹çš„å®šä¹‰" class="headerlink" title="1 æ³›å‹çš„å®šä¹‰"></a>1 æ³›å‹çš„å®šä¹‰</h3><p>æ³›å‹ï¼šè¦è€ƒè™‘åˆ°ç»„ä»¶çš„å¯é‡ç”¨æ€§å’Œæ‰©å±•æ€§ï¼Œè¦æ±‚ç»„ä»¶ä¸ä»…æ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿè¦æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œåœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½</p><p>tsä¸­çš„æ³›å‹ç±»ä¼¼äºc#å’Œjavaï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶</p><p>é€šä¿—ç†è§£ï¼šæ³›å‹å°±æ˜¯è§£å†³ ç±» æ¥å£ æ–¹æ³•çš„å¤ç”¨æ€§ï¼Œä»¥åŠå¯¹ä¸ç¡®å®šç±»å‹è¿›è¡Œæ•°æ®æ ¡éªŒ</p><h3 id="2-æ³›å‹å‡½æ•°"><a href="#2-æ³›å‹å‡½æ•°" class="headerlink" title="2 æ³›å‹å‡½æ•°"></a>2 æ³›å‹å‡½æ•°</h3><p>å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•ä¼ å…¥ä»€ä¹ˆç±»å‹å°±è¿”å›ä»€ä¹ˆç±»å‹çš„æ—¶å€™å°±å¯ä»¥ç”¨åˆ°ï¼Œå’Œanyä¸ä¸€æ ·ï¼Œanyå¿½ç•¥äº†ç±»å‹æ£€æŸ¥ï¼Œå¯ä»¥è¿”å›ä¸€æ ·çš„ä¹Ÿå¯ä»¥è¿”å›ä¸ä¸€æ ·çš„</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// åœ¨å‡½æ•°åååŠ  &lt;T>,è¡¨ç¤ºä½¿ç”¨äº†æ³›å‹</span><span class="token comment" spellcheck="true">// æ³›å‹çš„è§„åˆ™æ˜¯</span><span class="token comment" spellcheck="true">// 1 ä½ å¿…é¡»æœ‰ä¸€ä¸ª/å¤šä¸ªå‚æ•°å±äºæ³›å‹ç±»å‹</span><span class="token comment" spellcheck="true">// 2 è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯æ³›å‹ç±»å‹</span><span class="token comment" spellcheck="true">// 3 å‡½æ•°è°ƒç”¨å¿…é¡»æŒ‡å®šæ³›å‹çš„ç±»å‹</span><span class="token keyword">function</span> getData<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span>T<span class="token punctuation">,</span>msg<span class="token punctuation">:</span>T<span class="token punctuation">,</span>key<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span>T<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> value<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>getData<span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token number">456</span><span class="token punctuation">,</span><span class="token string">"hz"</span><span class="token punctuation">)</span></code></pre><h3 id="3-æ³›å‹ç±»"><a href="#3-æ³›å‹ç±»" class="headerlink" title="3 æ³›å‹ç±»"></a>3 æ³›å‹ç±»</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ³›å‹</span><span class="token comment" spellcheck="true">// åœ¨å‡½æ•°åååŠ  &lt;T>,è¡¨ç¤ºä½¿ç”¨äº†æ³›å‹</span><span class="token comment" spellcheck="true">// æ³›å‹çš„è§„åˆ™æ˜¯</span><span class="token comment" spellcheck="true">// 1 ä½ å¿…é¡»æœ‰ä¸€ä¸ª/å¤šä¸ªå‚æ•°å±äºæ³›å‹ç±»å‹</span><span class="token comment" spellcheck="true">// 2 è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯æ³›å‹ç±»å‹</span><span class="token comment" spellcheck="true">// 3 å‡½æ•°è°ƒç”¨å¿…é¡»æŒ‡å®šæ³›å‹çš„ç±»å‹</span><span class="token keyword">function</span> getData<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span>T<span class="token punctuation">,</span>msg<span class="token punctuation">:</span>T<span class="token punctuation">,</span>key<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span>T<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> value<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// getData&lt;number>(123,456,"hz")</span><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªç±»ï¼Œæœ‰æ·»åŠ æ•°æ®åˆ°æ•°ç»„çš„åŠŸèƒ½ï¼Œä¹Ÿæœ‰æ±‚æ•°ç»„ä¸­æœ€å°å…ƒç´ çš„åŠŸèƒ½</span><span class="token keyword">class</span> <span class="token class-name">MinClass</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    list<span class="token punctuation">:</span>T<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">:</span>T<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>T<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> minMsg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>minMsg<span class="token operator">></span><span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                minMsg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> minMsg    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å®ä¾‹åŒ–ç±»ï¼Œå¹¶æŒ‡å®šäº†æ³›å‹çš„ç±»å‹</span><span class="token keyword">var</span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinClass</span><span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>l<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>l<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="4-æ³›å‹æ¥å£"><a href="#4-æ³›å‹æ¥å£" class="headerlink" title="4 æ³›å‹æ¥å£"></a>4 æ³›å‹æ¥å£</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ³›å‹æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">ConfigFn</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span>T<span class="token punctuation">,</span>value2<span class="token punctuation">:</span>T<span class="token punctuation">)</span><span class="token punctuation">:</span>T<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> printMsg<span class="token punctuation">:</span>ConfigFn <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span>T<span class="token punctuation">,</span>value2<span class="token punctuation">:</span>T<span class="token punctuation">)</span><span class="token punctuation">:</span>T<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> value<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>printMsg<span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token number">444</span><span class="token punctuation">)</span>printMsg<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">,</span><span class="token string">"444"</span><span class="token punctuation">)</span></code></pre><h3 id="5-æ³›å‹ç±»ï¼Œä»¥ç±»ä¸ºå‚æ•°ä¼ é€’ï¼ˆå°ğŸŒ°ï¼‰"><a href="#5-æ³›å‹ç±»ï¼Œä»¥ç±»ä¸ºå‚æ•°ä¼ é€’ï¼ˆå°ğŸŒ°ï¼‰" class="headerlink" title="5 æ³›å‹ç±»ï¼Œä»¥ç±»ä¸ºå‚æ•°ä¼ é€’ï¼ˆå°ğŸŒ°ï¼‰"></a>5 æ³›å‹ç±»ï¼Œä»¥ç±»ä¸ºå‚æ•°ä¼ é€’ï¼ˆå°ğŸŒ°ï¼‰</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å®šä¹‰å‡ ä¸ªç±»æ˜ å°„æ•°æ®åº“çš„è¡¨</span><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªMysqlDBæ“ä½œæ•°æ®æ·»åŠ åˆ°æ•°æ®åº“</span><span class="token keyword">class</span> <span class="token class-name">MysqlDB</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">add</span><span class="token punctuation">(</span>info<span class="token punctuation">:</span>T<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">boolean</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token keyword">true</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">|</span> undefined    password <span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">|</span> undefined<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Article</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    title<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">|</span> undefined    desc<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">|</span> undefined    <span class="token keyword">constructor</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        title<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">|</span> undefined        desc<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">|</span> undefined    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>desc    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªdbå¯¹è±¡ï¼Œåªèƒ½æ“ä½œæ·»åŠ Userç±»çš„æ•°æ®</span><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDB</span><span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> admin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span>admin<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"admin"</span>admin<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token number">123</span> db<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>admin<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªdbå¯¹è±¡ï¼Œåªèƒ½æ“ä½œæ·»åŠ Articldç±»çš„æ•°æ®</span><span class="token keyword">var</span> dbA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDB</span><span class="token operator">&lt;</span>Article<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    title<span class="token punctuation">:</span><span class="token string">"é‡‘å“æ¢…"</span><span class="token punctuation">,</span>    desc<span class="token punctuation">:</span><span class="token string">"å¥½çœ‹"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>dbA<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-æ³›å‹çš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-æ³›å‹çš„å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1 æ³›å‹çš„å®šä¹‰&quot;&gt;&lt;/a&gt;1 æ³›å‹çš„å®šä¹‰&lt;/h3&gt;&lt;p&gt;æ³›å‹ï¼šè¦è€ƒè™‘åˆ°ç»„ä»¶çš„å¯é‡ç”¨æ€§å’Œæ‰©å±•æ€§ï¼Œè¦æ±‚ç»„ä»¶ä¸ä»…æ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿè¦æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œåœ¨åˆ›å»º</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
    <category term="tsé«˜çº§" scheme="http://huang_zhao.gitee.io/task/tags/ts%E9%AB%98%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>Typescript æ¥å£</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E6%8E%A5%E5%8F%A3/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E6%8E%A5%E5%8F%A3/</id>
    <published>2020-09-19T15:59:11.000Z</published>
    <updated>2020-09-18T11:01:07.750Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ¥å£"><a href="#1-æ¥å£" class="headerlink" title="1 æ¥å£"></a>1 æ¥å£</h3><p>æ¥å£çš„æœ¬è´¨å°±æ˜¯å®šä¹‰ä¸€ä¸ªæ ‡å‡†ï¼Œèµ·åˆ°é™åˆ¶å’Œè§„èŒƒçš„ä½œç”¨ï¼Œå’ŒæŠ½è±¡ç±»æœ‰ç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯æŠ½è±¡ç±»åªè§„èŒƒç±»ï¼Œæ¥å£è§„èŒƒçš„èŒƒå›´æ›´å¤§ï¼Œå¯¹å±æ€§ï¼Œå‡½æ•°ï¼Œç±»éƒ½å¯ä»¥æœ‰é™åˆ¶ä½œç”¨</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ¥å£</span><span class="token comment" spellcheck="true">// å±æ€§æ¥å£ï¼Œå¯¹ä¼ å…¥å‚æ•°è¿›è¡Œçº¦æŸ</span><span class="token comment" spellcheck="true">// ä¸€èˆ¬å‡½æ•°åœ¨ä¼ å‚çš„æ—¶å€™å®šä¹‰å‚æ•°ç±»å‹stringï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ç§çº¦æŸ</span><span class="token comment" spellcheck="true">// ä½†è¿™ç§çº¦æŸæ˜¯ç®€å•çº¦æŸï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šåˆ¶æˆ–è€…æ›´å¤æ‚çš„çº¦æŸå°±éœ€è¦ç”¨åˆ°æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">FullName</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    firstName<span class="token punctuation">:</span><span class="token keyword">string</span>    secondName<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token comment" spellcheck="true">// å¯é€‰å‚æ•°ï¼Œå¯ä¼ å¯ä¸ä¼ </span>    age<span class="token operator">?</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">printName</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span>FullName<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>firstName<span class="token operator">+</span><span class="token string">"--"</span><span class="token operator">+</span>name<span class="token punctuation">.</span>secondName<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿™é‡Œå‡½æ•°ä¼ å‚å¿…é¡»è¦ä¼ ä¸€ä¸ªæ»¡è¶³æ¥å£è§„èŒƒçš„å¯¹è±¡</span><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    firstName<span class="token punctuation">:</span><span class="token string">"é»„"</span><span class="token punctuation">,</span>    secondName<span class="token punctuation">:</span><span class="token string">"é’Š"</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// ä¹Ÿå¯ä»¥ä¼ å…¶ä»–æ— å…³å‚æ•°,ä½†æ˜¯å‡½æ•°ä¸­çš„nameæ— æ³•ä½¿ç”¨</span>    xxx<span class="token punctuation">:</span><span class="token number">18</span>    <span class="token comment" spellcheck="true">// å¯é€‰å‚æ•°å¯ç©¿å¯ä¸ä¼ </span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¦‚æœç›´æ¥åœ¨ä¼ å‚æ‹¬å·å†…å®šä¹‰å¯¹è±¡å°±åªèƒ½æœ‰æ¥å£ä¸­çš„å±æ€§ï¼Œä¸èƒ½æ·»åŠ é¢å¤–çš„</span><span class="token function">printName</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></code></pre><h3 id="2-å°è£…ajaxï¼ˆæ¥å£å°ğŸŒ°ï¼‰"><a href="#2-å°è£…ajaxï¼ˆæ¥å£å°ğŸŒ°ï¼‰" class="headerlink" title="2 å°è£…ajaxï¼ˆæ¥å£å°ğŸŒ°ï¼‰"></a>2 å°è£…ajaxï¼ˆæ¥å£å°ğŸŒ°ï¼‰</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ¥å£ä¾‹å­ï¼Œå®ç°ajax</span><span class="token keyword">interface</span> <span class="token class-name">Config</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    type<span class="token punctuation">:</span><span class="token keyword">string</span>    url<span class="token punctuation">:</span><span class="token keyword">string</span>    data<span class="token operator">?</span><span class="token punctuation">:</span><span class="token keyword">string</span>    dataType<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span>Config<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>type<span class="token punctuation">,</span>config<span class="token punctuation">.</span>url<span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span>    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span>    xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>dataType<span class="token operator">==</span><span class="token string">"json"</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    type<span class="token punctuation">:</span><span class="token string">"get"</span><span class="token punctuation">,</span>    url<span class="token punctuation">:</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// çœŸå®è¯·æ±‚apiåœ°å€</span>    dataType<span class="token punctuation">:</span><span class="token string">"json"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span></code></pre><h3 id="3-å‡½æ•°ç±»å‹æ¥å£"><a href="#3-å‡½æ•°ç±»å‹æ¥å£" class="headerlink" title="3 å‡½æ•°ç±»å‹æ¥å£"></a>3 å‡½æ•°ç±»å‹æ¥å£</h3><p>å¯¹ä¼ å…¥çš„å‚æ•°å’Œè¿”å›å€¼æ‰¹é‡çº¦æŸ</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å‡½æ•°ç±»å‹æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">base</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä½¿ç”¨è¿™ä¸ªå‡½æ•°ç±»å‹å°±å¿…é¡»éµå¾ªå®ƒçš„å‚æ•°å’Œè¿”å›å€¼æ ¼å¼</span>    <span class="token punctuation">(</span>key<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>num<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> printMsg<span class="token punctuation">:</span>base <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>num<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> key<span class="token operator">+</span>num<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token function">printMsg</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span></code></pre><h3 id="4-å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ï¼Œå¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰"><a href="#4-å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ï¼Œå¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰" class="headerlink" title="4 å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ï¼Œå¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰"></a>4 å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ï¼Œå¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å¯ç´¢å¼•æ¥å£ å¯¹æ•°ç»„çš„çº¦æŸ</span><span class="token keyword">interface</span> <span class="token class-name">userNum</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token punctuation">[</span>index<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr<span class="token punctuation">:</span>userNum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"xxx"</span><span class="token punctuation">,</span><span class="token string">"yyy"</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">// å¯¹å¯¹è±¡çš„çº¦æŸ</span><span class="token keyword">interface</span> <span class="token class-name">userObj</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token punctuation">[</span>index<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr<span class="token punctuation">:</span>userObj <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">:</span><span class="token string">"hz"</span><span class="token punctuation">]</span></code></pre><h3 id="5-ç±»ç±»å‹æ¥å£"><a href="#5-ç±»ç±»å‹æ¥å£" class="headerlink" title="5 ç±»ç±»å‹æ¥å£"></a>5 ç±»ç±»å‹æ¥å£</h3><p>å’ŒæŠ½è±¡ç±»å¾ˆç›¸ä¼¼</p><pre class=" language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token function">run</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è¿™é‡Œåªæ˜¯çº¦æŸäº†å¾—æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå…·ä½“çš„ä¼ å‚å’Œè¿”å›å€¼æ²¡æ³•çº¦æŸ</span>    <span class="token function">run</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="6-æ¥å£çš„ç»§æ‰¿"><a href="#6-æ¥å£çš„ç»§æ‰¿" class="headerlink" title="6 æ¥å£çš„ç»§æ‰¿"></a>6 æ¥å£çš„ç»§æ‰¿</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ¥å£çš„ç»§æ‰¿+ç±»ç»§æ‰¿ç»¼åˆä½¿ç”¨</span><span class="token keyword">interface</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">People</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token function">work</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Peo</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    age<span class="token punctuation">:</span><span class="token keyword">number</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">"is play"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Peo</span> <span class="token keyword">implements</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"åœ¨å·¥ä½œ"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"åœ¨åƒ"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-æ¥å£&quot;&gt;&lt;a href=&quot;#1-æ¥å£&quot; class=&quot;headerlink&quot; title=&quot;1 æ¥å£&quot;&gt;&lt;/a&gt;1 æ¥å£&lt;/h3&gt;&lt;p&gt;æ¥å£çš„æœ¬è´¨å°±æ˜¯å®šä¹‰ä¸€ä¸ªæ ‡å‡†ï¼Œèµ·åˆ°é™åˆ¶å’Œè§„èŒƒçš„ä½œç”¨ï¼Œå’ŒæŠ½è±¡ç±»æœ‰ç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯æŠ½è±¡ç±»åªè§„èŒƒç±»ï¼Œæ¥å£è§„èŒƒçš„èŒƒå›´æ›´å¤§ï¼Œå¯¹å±æ€§ï¼Œå‡½æ•°ï¼Œç±»</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
    <category term="tsé¢å‘å¯¹è±¡" scheme="http://huang_zhao.gitee.io/task/tags/ts%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    
  </entry>
  
  <entry>
    <title>Typescript æ¨¡å—</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E6%A8%A1%E5%9D%97/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/19/Typescript%20%E6%A8%A1%E5%9D%97/</id>
    <published>2020-09-19T15:59:11.000Z</published>
    <updated>2020-09-18T11:02:24.155Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ¨¡å—çš„å®šä¹‰"><a href="#1-æ¨¡å—çš„å®šä¹‰" class="headerlink" title="1 æ¨¡å—çš„å®šä¹‰"></a>1 æ¨¡å—çš„å®šä¹‰</h3><p>tsä¸­<strong>å†…éƒ¨æ¨¡å—</strong>ç°åœ¨ç§°ä¸ºâ€œå‘½åç©ºé—´â€ï¼Œ<strong>å¤–éƒ¨æ¨¡å—</strong>ç®€ç§°æ¨¡å—</p><p>tsä¸­æ¨¡å—æƒ³è¦ä½¿ç”¨é¦–å…ˆè¦åœ¨æ¨¡å—å†…éƒ¨é€šè¿‡exportæŠŠå†…çš„æ•°æ®æš´éœ²å‡ºå»ï¼Œå†åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹importå¼•å…¥æ¨¡å—</p><h3 id="2-æ¨¡å—çš„ç®€å•ä½¿ç”¨"><a href="#2-æ¨¡å—çš„ç®€å•ä½¿ç”¨" class="headerlink" title="2 æ¨¡å—çš„ç®€å•ä½¿ç”¨"></a>2 æ¨¡å—çš„ç®€å•ä½¿ç”¨</h3><p><strong>è¢«å¯¼å…¥é¡µé¢</strong></p><pre class=" language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">printMsg</span><span class="token punctuation">(</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>salary<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span>salary<span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"hz"</span><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token keyword">var</span> salary <span class="token operator">=</span> <span class="token number">2000</span><span class="token comment" spellcheck="true">// é»˜è®¤å¯¼å…¥ï¼Œåªèƒ½ä½¿ç”¨ä¸€æ¬¡</span><span class="token keyword">export</span> <span class="token keyword">default</span> salary<span class="token keyword">export</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name <span class="token punctuation">,</span> age<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>å¯¼å…¥é¡µé¢</strong></p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// é»˜è®¤å¯¼å…¥çš„æ–¹å¼å°±ä¸éœ€è¦åŠ èŠ±æ‹¬å·ï¼Œä½†æ˜¯åªèƒ½å¯¼å…¥ä¸€ä¸ª</span><span class="token keyword">import</span> salary <span class="token keyword">from</span> <span class="token string">"./modules/func"</span><span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> printMsg as print<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">"./modules/func"</span><span class="token comment" spellcheck="true">// å¯ä»¥å¤šä¸ªä¸€èµ·å¯¼å…¥ï¼Œä¹Ÿå¯ä»¥èµ·åˆ«å</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="3-å‘½åç©ºé—´çš„ç®€å•ä½¿ç”¨"><a href="#3-å‘½åç©ºé—´çš„ç®€å•ä½¿ç”¨" class="headerlink" title="3 å‘½åç©ºé—´çš„ç®€å•ä½¿ç”¨"></a>3 å‘½åç©ºé—´çš„ç®€å•ä½¿ç”¨</h3><p>å‘½åç©ºé—´å°±æ˜¯åœ¨ä¸€ä¸ªtsæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨åç§°ç©ºé—´åŒ…è£¹ä¸€ä¸ªèŒƒå›´ï¼Œè¿™ä¸ªèŒƒå›´å†…çš„æ•°æ®åªå±äºè¿™ä¸ªåç§°ç©ºé—´ï¼Œåœ¨å¤–éƒ¨å¯ä»¥é‡å¤</p><p><strong>index.ts</strong></p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å¦‚æœå…¶ä»–é¡µé¢è¦ä½¿ç”¨è¿™ä¸ªå‘½åç©ºé—´çš„æ•°æ®å°±å¿…é¡»å…ˆå¯¼å‡ºnamespaceï¼Œå†å¯¼å‡ºå†…éƒ¨æ•°æ®</span><span class="token keyword">export</span> namespace A<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">printMsg</span><span class="token punctuation">(</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>salary<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span>salary<span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"hz"</span>    <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span>    <span class="token keyword">var</span> salary <span class="token operator">=</span> <span class="token number">2000</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">export</span> namespace B<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">printMsg</span><span class="token punctuation">(</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>salary<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span>salary<span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"hz"</span>    <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span>    <span class="token keyword">var</span> salary <span class="token operator">=</span> <span class="token number">2000</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> </code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-æ¨¡å—çš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-æ¨¡å—çš„å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1 æ¨¡å—çš„å®šä¹‰&quot;&gt;&lt;/a&gt;1 æ¨¡å—çš„å®šä¹‰&lt;/h3&gt;&lt;p&gt;tsä¸­&lt;strong&gt;å†…éƒ¨æ¨¡å—&lt;/strong&gt;ç°åœ¨ç§°ä¸ºâ€œå‘½åç©ºé—´â€ï¼Œ&lt;strong&gt;å¤–éƒ¨æ¨¡å—&lt;/s</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="tsåŸºç¡€" scheme="http://huang_zhao.gitee.io/task/tags/ts%E5%9F%BA%E7%A1%80/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>Typescript ç±»ï¼Œç»§æ‰¿ï¼Œä¿®é¥°ç¬¦ï¼Œé™æ€ï¼Œå¤šæ€ï¼ŒæŠ½è±¡ç±»</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/15/Typescript%20%E7%B1%BB%EF%BC%8C%E7%BB%A7%E6%89%BF%EF%BC%8C%E4%BF%AE%E9%A5%B0%E7%AC%A6/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/15/Typescript%20%E7%B1%BB%EF%BC%8C%E7%BB%A7%E6%89%BF%EF%BC%8C%E4%BF%AE%E9%A5%B0%E7%AC%A6/</id>
    <published>2020-09-15T15:59:11.000Z</published>
    <updated>2020-09-18T11:02:42.100Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ç±»çš„å®šä¹‰"><a href="#1-ç±»çš„å®šä¹‰" class="headerlink" title="1 ç±»çš„å®šä¹‰"></a>1 ç±»çš„å®šä¹‰</h3><pre class=" language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token comment" spellcheck="true">// constructor æ˜¯ç±»å®ä¾‹åŒ–è§¦å‘çš„æ„é€ å‡½æ•°</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¯ä»¥é€šè¿‡ç±»ä¸­çš„æ–¹æ³•å»å¯¹å±æ€§æ”¹å€¼ï¼Œå–å€¼</span>    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">let</span> peo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span>peo<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="2-ç»§æ‰¿"><a href="#2-ç»§æ‰¿" class="headerlink" title="2 ç»§æ‰¿"></a>2 ç»§æ‰¿</h3><pre class=" language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»§æ‰¿ï¼šé€šè¿‡extend super</span><span class="token keyword">class</span> <span class="token class-name">Web</span> <span class="token keyword">extends</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    age<span class="token punctuation">:</span><span class="token keyword">number</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç»§æ‰¿è¦ç‚¹1ï¼šå¿…é¡»ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸Šé¢æ–°å¢ï¼Œä½†æ˜¯ä¸èƒ½ç¼º</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç»§æ‰¿è¦ç‚¹2ï¼šå±æ€§å’Œæ–¹æ³•çš„æŸ¥æ‰¾é¡ºåºä¼˜å…ˆä»è‡ªå·±å¼€å§‹åˆ°çˆ¶ç±»</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> w <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Web</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="3-ä¿®é¥°ç¬¦"><a href="#3-ä¿®é¥°ç¬¦" class="headerlink" title="3 ä¿®é¥°ç¬¦"></a>3 ä¿®é¥°ç¬¦</h3><p>ä¿®é¥°ç¬¦ä¿®é¥°çš„æ˜¯ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•</p><ul><li>publicï¼šå…¬æœ‰<ul><li>åœ¨ç±»ä¸­ï¼Œå­ç±»ä¸­ï¼Œç±»å¤–éƒ¨éƒ½å¯ä»¥è®¿é—®</li></ul></li><li>protectedï¼šä¿æŠ¤ç±»å‹ï¼ˆå°è£…ï¼‰<ul><li>åœ¨ç±»ä¸­ï¼Œå­ç±»ä¸­å¯ä»¥è®¿é—®ï¼Œç±»å¤–éƒ¨ä¸èƒ½è®¿é—®</li></ul></li><li>privateï¼šç§æœ‰<ul><li>åªæœ‰åœ¨ç±»ä¸­èƒ½è®¿é—®ï¼Œåœ¨å­ç±»å’Œç±»å¤–éƒ¨éƒ½ä¸èƒ½è®¿é—®</li></ul></li></ul><p>æ³¨æ„ï¼šå±æ€§å¦‚æœä¸åŠ ä¿®é¥°ç¬¦é»˜è®¤æ˜¯public</p><pre class=" language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token keyword">protected</span> sex<span class="token punctuation">:</span><span class="token keyword">boolean</span> <span class="token operator">=</span> <span class="token keyword">false</span>    <span class="token keyword">private</span> xxx<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">123</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Web</span> <span class="token keyword">extends</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    age<span class="token punctuation">:</span><span class="token keyword">number</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç»§æ‰¿è¦ç‚¹1ï¼šå¿…é¡»ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸Šé¢æ–°å¢ï¼Œä½†æ˜¯ä¸èƒ½ç¼º</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç»§æ‰¿è¦ç‚¹2ï¼šå±æ€§å’Œæ–¹æ³•çš„æŸ¥æ‰¾é¡ºåºä¼˜å…ˆä»è‡ªå·±å¼€å§‹åˆ°çˆ¶ç±»</span>    <span class="token comment" spellcheck="true">// ç»§æ‰¿è¦ç‚¹3ï¼šå¦‚æœçˆ¶ç±»ä¸­æœ‰ç§æœ‰å±æ€§ï¼Œå­ç±»ä¸­ä¸èƒ½é‡å¤å®šä¹‰è¿™ä¸ªå±æ€§</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç±»ä¸­çš„ä¿®é¥°ç¬¦è¿ç”¨</span><span class="token keyword">var</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="4-é™æ€å±æ€§-æ–¹æ³•"><a href="#4-é™æ€å±æ€§-æ–¹æ³•" class="headerlink" title="4 é™æ€å±æ€§/æ–¹æ³•"></a>4 é™æ€å±æ€§/æ–¹æ³•</h3><pre class=" language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">People</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token keyword">protected</span> sex<span class="token punctuation">:</span><span class="token keyword">boolean</span> <span class="token operator">=</span> <span class="token keyword">false</span>    <span class="token keyword">private</span> xxx<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">123</span>    <span class="token keyword">static</span> wifi<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"lxt"</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å®ä¾‹æ–¹æ³•,åªèƒ½ä½¿ç”¨å®ä¾‹å±æ€§</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸èƒ½ç›´æ¥è°ƒç”¨å±æ€§ï¼Œåªèƒ½è°ƒç”¨é™æ€å±æ€§</span>    <span class="token keyword">static</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>wifi<span class="token operator">+</span><span class="token string">"åœ¨play"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span>People<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>p<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="5-å¤šæ€"><a href="#5-å¤šæ€" class="headerlink" title="5 å¤šæ€"></a>5 å¤šæ€</h3><p>tsä¸­çš„å¤šæ€å±äºç»§æ‰¿çš„ä¸€ç§å½¢å¼ï¼Œçˆ¶ç±»å®šä¹‰æ–¹æ³•ä½†ä¸å»å®ç°ï¼Œå­ç±»å»å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œå®ç°å¤šæ€</p><p>tsä¸­çš„å¤šæ€å±äºé¸­å­ç±»å‹ï¼Œå’Œpythonå’Œgoä¸­çš„å¤šæ€ç›¸ä¼¼ï¼Œéƒ½å±äºéä¾µå…¥å¼ï¼Œå°±ç®—ä¸å†™ä¹Ÿä¸ä¼šæŠ¥é”™</p><pre class=" language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"åƒè‚‰"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"åƒğŸ­"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"xd"</span><span class="token punctuation">)</span>dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">"xm"</span><span class="token punctuation">)</span>cat<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="6-æŠ½è±¡ç±»ï¼ŒæŠ½è±¡æ–¹æ³•"><a href="#6-æŠ½è±¡ç±»ï¼ŒæŠ½è±¡æ–¹æ³•" class="headerlink" title="6 æŠ½è±¡ç±»ï¼ŒæŠ½è±¡æ–¹æ³•"></a>6 æŠ½è±¡ç±»ï¼ŒæŠ½è±¡æ–¹æ³•</h3><p>æ³¨æ„ç‚¹ï¼š</p><ul><li>æŠ½è±¡æ–¹æ³•æ— æ³•å•ç‹¬å­˜åœ¨å¿…é¡»å®šä¹‰åœ¨æŠ½è±¡ç±»ä¸­</li><li>ç»§æ‰¿æŠ½è±¡ç±»çš„å­ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•</li><li>æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–</li><li>æŠ½è±¡ç±»çš„ç»§æ‰¿ä¹Ÿå±äºå¤šæ€ï¼Œå±äºä¾µå…¥å¼ï¼Œæ²¡æœ‰é‡å†™å°±ä¼šæŠ¥é”™</li></ul><pre class=" language-ts"><code class="language-ts">abstract <span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token keyword">string</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å®šä¹‰åœ¨æŠ½è±¡ç±»å†…éƒ¨çš„æŠ½è±¡æ–¹æ³•</span>    <span class="token comment" spellcheck="true">// ä¸èƒ½åœ¨è¿™é‡Œå®ç°</span>    <span class="token comment" spellcheck="true">// å¿…é¡»å®šä¹‰è¿”å›å€¼ç±»å‹ï¼švoidä¸ºæ— è¿”å›å€¼</span>    abstract <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"åƒè‚‰"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"åƒğŸ­"</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"xd"</span><span class="token punctuation">)</span>dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">"xm"</span><span class="token punctuation">)</span>cat<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ç±»çš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-ç±»çš„å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1 ç±»çš„å®šä¹‰&quot;&gt;&lt;/a&gt;1 ç±»çš„å®šä¹‰&lt;/h3&gt;&lt;pre class=&quot; language-ts&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
    <category term="tsé¢å‘å¯¹è±¡" scheme="http://huang_zhao.gitee.io/task/tags/ts%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    
  </entry>
  
  <entry>
    <title>go ç»“æ„ä½“ã€æ–¹æ³•ã€æ¥å£</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/14/go%20%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E6%96%B9%E6%B3%95%E3%80%81%E6%8E%A5%E5%8F%A3/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/14/go%20%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E6%96%B9%E6%B3%95%E3%80%81%E6%8E%A5%E5%8F%A3/</id>
    <published>2020-09-14T14:47:11.000Z</published>
    <updated>2020-09-14T13:58:07.176Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ç»“æ„ä½“"><a href="#1-ç»“æ„ä½“" class="headerlink" title="1 ç»“æ„ä½“"></a>1 ç»“æ„ä½“</h3><p>å®šä¹‰ï¼šç»“æ„ä½“æ˜¯å¤šä¸ªå­—æ®µçš„é›†åˆ</p><p>é¢å‘å¯¹è±¡ä¸­ç±»çš„å®šä¹‰æ˜¯å±æ€§å’Œæ–¹æ³•çš„é›†åˆï¼Œç»“æ„ä½“å¯ä»¥çœ‹åšæ˜¯å±æ€§çš„é›†åˆ</p><h4 id="1-1-ç»“æ„ä½“å®šä¹‰ï¼ˆåˆ›å»ºå‘½åç»“æ„ä½“ï¼‰"><a href="#1-1-ç»“æ„ä½“å®šä¹‰ï¼ˆåˆ›å»ºå‘½åç»“æ„ä½“ï¼‰" class="headerlink" title="1.1 ç»“æ„ä½“å®šä¹‰ï¼ˆåˆ›å»ºå‘½åç»“æ„ä½“ï¼‰"></a>1.1 ç»“æ„ä½“å®šä¹‰ï¼ˆåˆ›å»ºå‘½åç»“æ„ä½“ï¼‰</h4><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">// typeå…³é”®å­— ç»“æ„ä½“å structå…³é”®å­—&amp;#123;&amp;#125;</span><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    <span class="token comment" spellcheck="true">// å¦‚æœæ˜¯å¤§å†™å¼€å¤´è¡¨ç¤ºå¯ä»¥åœ¨ä½œä¸ºåŒ…å¯¼å…¥ä¸­å¼•ç”¨</span>    Age <span class="token builtin">int</span>    sex <span class="token builtin">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä¸¤ç§å®šä¹‰æ–¹å¼ï¼ŒæŒ‰ä½ç½®å¿…é¡»å…¨ä¼ ï¼ŒæŒ‰å…³é”®å­—å¯ä»¥ä¸æŒ‰é¡ºåºå°‘ä¼ </span>    peo <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">"ç”·"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    peo2 <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span><span class="token string">"lxt"</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">19</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>è¡¥å……ï¼šå¦‚æœåªå®šä¹‰ä¸åˆå§‹åŒ–å†…éƒ¨åªå­˜åœ¨å¯¹åº”å­—æ®µçš„é›¶å€¼</p><h4 id="1-2-åˆ›å»ºåŒ¿åç»“æ„ä½“"><a href="#1-2-åˆ›å»ºåŒ¿åç»“æ„ä½“" class="headerlink" title="1.2 åˆ›å»ºåŒ¿åç»“æ„ä½“"></a>1.2 åˆ›å»ºåŒ¿åç»“æ„ä½“</h4><p>åŒ¿åç»“æ„ä½“é€šå¸¸åœ¨åˆ›å»ºçš„æ—¶å€™å°±å®šä¹‰ï¼Œä¸€èˆ¬åªç”¨ä¸€æ¬¡ï¼Œåœ¨æ•´åˆå¤šä¸ªæ•°æ®ç±»å‹çš„æ—¶å€™å¯ä»¥ç”¨ï¼Œé€šå¸¸å®šä¹‰åœ¨æ–¹æ³•å†…éƒ¨æˆ–è€…ç»“æ„ä½“å†…éƒ¨</p><pre class=" language-go"><code class="language-go">dog <span class="token operator">:=</span> <span class="token keyword">struct</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">189</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span></code></pre><h4 id="1-3-è®¿é—®-ä¿®æ”¹ç»“æ„ä½“å­—æ®µ"><a href="#1-3-è®¿é—®-ä¿®æ”¹ç»“æ„ä½“å­—æ®µ" class="headerlink" title="1.3 è®¿é—®/ä¿®æ”¹ç»“æ„ä½“å­—æ®µ"></a>1.3 è®¿é—®/ä¿®æ”¹ç»“æ„ä½“å­—æ®µ</h4><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">// ç›´æ¥.è®¿é—®ä¿®æ”¹èµ‹å€¼</span><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    sex <span class="token builtin">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    peo<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-4-ç»“æ„ä½“æŒ‡é’ˆ"><a href="#1-4-ç»“æ„ä½“æŒ‡é’ˆ" class="headerlink" title="1.4 ç»“æ„ä½“æŒ‡é’ˆ"></a>1.4 ç»“æ„ä½“æŒ‡é’ˆ</h4><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">// æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç”¨æ³•å’Œç»“æ„ä½“æ²¡å·®</span><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    sex <span class="token builtin">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo <span class="token operator">:=</span> <span class="token operator">&amp;</span>People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åŸæœ¬å¿…é¡»è¦å†™(*peo).age goå†…éƒ¨æ”¯æŒç®€å†™</span>    peo<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-5-åŒ¿åå­—æ®µ"><a href="#1-5-åŒ¿åå­—æ®µ" class="headerlink" title="1.5 åŒ¿åå­—æ®µ"></a>1.5 åŒ¿åå­—æ®µ</h4><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">// åŒ¿åå­—æ®µæœ¬è´¨å°±æ˜¯æŠŠå­—æ®µç±»å‹å½“åå­—ä¸€èµ·ä½¿ç”¨</span><span class="token comment" spellcheck="true">// ä½†æ˜¯åŒæ—¶åªèƒ½å­˜åœ¨ä¸€ç§ç±»å‹ï¼Œå°±æ˜¯ä¸èƒ½å†™ä¿©string</span><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    sex <span class="token builtin">string</span>    <span class="token builtin">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo <span class="token operator">:=</span> <span class="token operator">&amp;</span>People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    peo<span class="token punctuation">.</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"xxx"</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo<span class="token punctuation">.</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-6-åµŒå¥—ç»“æ„ä½“"><a href="#1-6-åµŒå¥—ç»“æ„ä½“" class="headerlink" title="1.6 åµŒå¥—ç»“æ„ä½“"></a>1.6 åµŒå¥—ç»“æ„ä½“</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    sex <span class="token builtin">string</span>    Hobby Hobby<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> Hobby <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    hobbyId <span class="token builtin">int</span>    hobbyName <span class="token builtin">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å®šä¹‰æ–¹å¼1</span>    <span class="token comment" spellcheck="true">//peo.Hobby.hobbyId = 1</span>    <span class="token comment" spellcheck="true">//peo.Hobby.hobbyName= "xxx"</span>    <span class="token comment" spellcheck="true">// å®šä¹‰æ–¹å¼2</span>    peo<span class="token punctuation">.</span>Hobby <span class="token operator">=</span> Hobby<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"xxx"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo<span class="token punctuation">.</span>Hobby<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-7-å­—æ®µæå‡"><a href="#1-7-å­—æ®µæå‡" class="headerlink" title="1.7 å­—æ®µæå‡"></a>1.7 å­—æ®µæå‡</h4><p>åœ¨<strong>ä¸é‡å</strong>çš„æƒ…å†µä¸‹å¯ä»¥æŠŠåµŒå¥—åœ¨å†…éƒ¨çš„ç»“æ„ä½“å­—æ®µæå‡åˆ°å¤–å±‚ç»“æ„ä½“æ¥ä½¿ç”¨ï¼Œå¦‚æœé‡åå°±ä¼šä¼˜å…ˆä½¿ç”¨å¤–å±‚ç»“æ„ä½“çš„å­—æ®µå</p><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    sex <span class="token builtin">string</span>    <span class="token comment" spellcheck="true">// å¿…é¡»ä½¿ç”¨åŒ¿ååµŒå¥—ç»“æ„ä½“æ‰èƒ½æå‡</span>    Hobby<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> Hobby <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    hobbyId <span class="token builtin">int</span>    hobbyName <span class="token builtin">string</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo <span class="token operator">:=</span> <span class="token operator">&amp;</span>People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    peo<span class="token punctuation">.</span>Hobby <span class="token operator">=</span> Hobby<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"xxx"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo<span class="token punctuation">.</span>hobbyName<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo<span class="token punctuation">.</span>hobbyId<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-8-ç»“æ„ä½“ç›¸ç­‰æ€§"><a href="#1-8-ç»“æ„ä½“ç›¸ç­‰æ€§" class="headerlink" title="1.8 ç»“æ„ä½“ç›¸ç­‰æ€§"></a>1.8 ç»“æ„ä½“ç›¸ç­‰æ€§</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo1 <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    peo2 <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä¸¤ä¸ªå­—æ®µç¨å¾®ä¸€ç‚¹ä¸åŒå°±æ˜¯false</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>peo1 <span class="token operator">==</span> peo2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// true</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ³¨æ„ï¼šç»“æ„ä½“ä¸­åªæœ‰å…¨æ˜¯å€¼ç±»å‹æ‰èƒ½æ¯”è¾ƒï¼Œå¦‚æœå­˜åœ¨å¼•ç”¨ç±»å‹æ¯”å¦‚åˆ‡ç‰‡ï¼Œmapè¿™ç§å¼•ç”¨ç±»å‹å°±ä¸èƒ½æ¯”è¾ƒ</span></code></pre><h3 id="2-æ–¹æ³•"><a href="#2-æ–¹æ³•" class="headerlink" title="2 æ–¹æ³•"></a>2 æ–¹æ³•</h3><p>æ–¹æ³•å°±æ˜¯åœ¨å®šä¹‰å‡½æ•°ä¹‹å‰åŠ ä¸€ä¸ªç‰¹æ®Šçš„æ¥æ”¶å™¨ç±»å‹ï¼Œæ¥æ”¶å™¨å¯ä»¥æ˜¯ç»“æ„ä½“æˆ–è€…éç»“æ„ä½“ï¼Œæ¥æ”¶å™¨å†…éƒ¨å¯ä»¥è®¿é—®è¿™ä¸ªæ–¹æ³•</p><h4 id="1-1-å®šä¹‰ä¸€ä¸ªæ–¹æ³•"><a href="#1-1-å®šä¹‰ä¸€ä¸ªæ–¹æ³•" class="headerlink" title="1.1 å®šä¹‰ä¸€ä¸ªæ–¹æ³•"></a>1.1 å®šä¹‰ä¸€ä¸ªæ–¹æ³•</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸ºPeopleç»“æ„ä½“ç»‘å®šäº†printNameæ–¹æ³•</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p People<span class="token punctuation">)</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åˆå§‹åŒ–ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡</span>    peo <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span> <span class="token string">"hz"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    peo<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-2-å‡½æ•°èƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¦æ–¹æ³•ï¼Ÿ"><a href="#1-2-å‡½æ•°èƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¦æ–¹æ³•ï¼Ÿ" class="headerlink" title="1.2 å‡½æ•°èƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¦æ–¹æ³•ï¼Ÿ"></a>1.2 å‡½æ•°èƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¦æ–¹æ³•ï¼Ÿ</h4><ul><li>goä¸æ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œgoä¸æ”¯æŒç±»ï¼Œæ–¹æ³•æ˜¯å¯¹åº”é¢å‘å¯¹è±¡ä¸­å¯¹è±¡çš„æ–¹æ³•</li><li>ä¸€ä¸ªæ–¹æ³•å¯ä»¥ç»‘å®šç»™å¤šä¸ªä¸åŒçš„ç»“æ„ä½“ï¼Œä½†æ˜¯ä¸€ä¸ªå‡½æ•°ä¸èƒ½æ¥å—ä¸åŒçš„ç»“æ„ä½“ä½œä¸ºå‚æ•°</li></ul><h4 id="1-3-æŒ‡é’ˆæ¥æ”¶å™¨ä¸å€¼æ¥æ”¶å™¨"><a href="#1-3-æŒ‡é’ˆæ¥æ”¶å™¨ä¸å€¼æ¥æ”¶å™¨" class="headerlink" title="1.3 æŒ‡é’ˆæ¥æ”¶å™¨ä¸å€¼æ¥æ”¶å™¨"></a>1.3 æŒ‡é’ˆæ¥æ”¶å™¨ä¸å€¼æ¥æ”¶å™¨</h4><p>å¦‚æœæ˜¯åœ¨æ–¹æ³•ä¸­</p><p>æœ‰å€¼æ¥æ”¶å™¨ï¼Œé‚£å®ƒå¯ä»¥æ¥æ”¶å€¼æ¥æ”¶å™¨å’ŒæŒ‡é’ˆæ¥æ”¶å™¨</p><p>æœ‰æŒ‡é’ˆæ¥æ”¶å™¨ï¼Œé‚£å®ƒå¯ä»¥æ¥æ”¶å€¼æ¥æ”¶å™¨å’ŒæŒ‡é’ˆæ¥æ”¶å™¨</p><p>æ€»ç»“ï¼šä¸ç®¡æ–¹æ³•çš„æ¥æ”¶å™¨æ˜¯ä»€ä¹ˆï¼Œéƒ½å¯ä»¥ç”¨å€¼æˆ–è€…æŒ‡é’ˆå»æ¥å—ï¼Œä¸¤ç§æ¥æ”¶å™¨çš„åŒºåˆ«å°±æ˜¯ï¼šå€¼æ¥æ”¶å™¨æ˜¯å€¼ä¼ é€’ï¼ŒæŒ‡é’ˆæ¥æ”¶å™¨æ˜¯å¼•ç”¨ä¼ é€’</p><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p People<span class="token punctuation">)</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¦‚æœåªæ˜¯ç®€å•çš„å€¼ä¼ é€’ï¼Œé‚£åœ¨å†…éƒ¨æ”¹çš„å€¼å…¶å®æ˜¯ä¸€ä¸ªcopyçš„æ–°å€¼</span><span class="token comment" spellcheck="true">// å€¼æ¥æ”¶å™¨</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p People<span class="token punctuation">)</span><span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"lxt"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¦‚æœéœ€è¦æ”¹åŠ¨çœŸçš„ç”Ÿæ•ˆï¼Œå°±éœ€è¦ç”¨åˆ°æŒ‡é’ˆæ¥æ”¶å™¨</span><span class="token comment" spellcheck="true">// æŒ‡é’ˆæ¥æ”¶å™¨ï¼ˆå…¨éƒ½ç”¨è¿™ä¸ªå°±è¡Œäº†ï¼‰</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>People<span class="token punctuation">)</span><span class="token function">changeName2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"lxt"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    peo <span class="token operator">:=</span> People<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span> <span class="token string">"hz"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//peo.changeName()  // æ²¡æœ‰æ”¹åŸå€¼</span>    peo<span class="token punctuation">.</span><span class="token function">changeName2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    peo<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-4-éç»“æ„ä½“æ–¹æ³•"><a href="#1-4-éç»“æ„ä½“æ–¹æ³•" class="headerlink" title="1.4 éç»“æ„ä½“æ–¹æ³•"></a>1.4 éç»“æ„ä½“æ–¹æ³•</h4><p>å¦‚æœè¦å¯¹éç»“æ„ä½“ç»‘å®šæ–¹æ³•ï¼Œé‚£è¿™ä¸ªéç»“æ„ä½“å¿…é¡»æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»å‹æˆ–è€…é‡å‘½åçš„ç±»å‹</p><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> MyInt <span class="token builtin">int</span><span class="token comment" spellcheck="true">// æ³¨æ„åœ¨è¿ç®—ä¸­ç±»å‹å¿…é¡»ä¸€è‡´æ‰èƒ½è¿ç®—</span><span class="token comment" spellcheck="true">// intä¸èƒ½ä¼ å…¥ç»“æ„ä½“ï¼Œå¿…é¡»é‡å‘½å</span><span class="token keyword">func</span> <span class="token punctuation">(</span>i MyInt<span class="token punctuation">)</span><span class="token function">add</span><span class="token punctuation">(</span>x MyInt<span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token operator">+</span>x<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> i MyInt <span class="token operator">=</span> <span class="token number">5</span>    i<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="3-æ¥å£"><a href="#3-æ¥å£" class="headerlink" title="3 æ¥å£"></a>3 æ¥å£</h3><p>æ¥å£å°±æ˜¯ä¸€ç³»åˆ—æ–¹æ³•çš„é›†åˆï¼Œç±»ä¼¼äºé¢å‘å¯¹è±¡ä¸­çš„å¤šæ€ï¼Œgoè¯­è¨€çš„æ¥å£ä¹Ÿæ”¯æŒé¸­å­ç±»å‹</p><p>é¢å‘å¯¹è±¡é¢†åŸŸä¸­ï¼Œæ¥å£æ˜¯æŒ‡å®šä¹‰å’Œè§„èŒƒä¸€ä¸ªå­ç±»çš„è¡Œä¸º</p><h4 id="3-1-æ¥å£ç®€å•å®ç°ï¼ˆé¸­å­ç±»å‹ï¼‰ï¼ˆéä¾µå…¥å¼ï¼‰"><a href="#3-1-æ¥å£ç®€å•å®ç°ï¼ˆé¸­å­ç±»å‹ï¼‰ï¼ˆéä¾µå…¥å¼ï¼‰" class="headerlink" title="3.1 æ¥å£ç®€å•å®ç°ï¼ˆé¸­å­ç±»å‹ï¼‰ï¼ˆéä¾µå…¥å¼ï¼‰"></a>3.1 æ¥å£ç®€å•å®ç°ï¼ˆé¸­å­ç±»å‹ï¼‰ï¼ˆéä¾µå…¥å¼ï¼‰</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">type</span> Duck <span class="token keyword">interface</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> TDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> DDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    salary <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>t TDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"TDUCK"</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d DDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"DDUCK"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>t TDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"T EAT"</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d DDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"D EAT"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®©Tduckå’ŒDduckéƒ½å®ç°Duckæ¥å£</span>    <span class="token comment" spellcheck="true">// æ–¹å¼ä¸€ï¼šé€šè¿‡é¸­å­ç±»å‹ï¼Œå†™åŒæ ·çš„æ–¹æ³•</span>    t <span class="token operator">:=</span>TDuck<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    t<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    d<span class="token operator">:=</span>DDuck<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"lxt"</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    d<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="3-2-ä¾µå…¥å¼æ¥å£"><a href="#3-2-ä¾µå…¥å¼æ¥å£" class="headerlink" title="3.2 ä¾µå…¥å¼æ¥å£"></a>3.2 ä¾µå…¥å¼æ¥å£</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> Duck <span class="token keyword">interface</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>t TDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"TDUCK"</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d DDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"DDUCK"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>t TDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"T EAT"</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d DDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"D EAT"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> TDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> DDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    salary <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è®©Tduckå’ŒDduckéƒ½å®ç°Duckæ¥å£</span>    <span class="token comment" spellcheck="true">// æ–¹å¼äºŒï¼šä¾µå…¥å¼æ¥å£ï¼Œæ¥å£æ–¹æ³•æ²¡æœ‰ï¼ŒæŠ¥é”™</span>    <span class="token keyword">var</span> duck Duck    t<span class="token operator">:=</span>TDuck<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    duck<span class="token operator">=</span>t    duck<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    d<span class="token operator">:=</span>DDuck<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"lxt"</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    duck <span class="token operator">=</span> d    duck<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="3-3-æ¥å£çš„å†…éƒ¨è¡¨ç¤º"><a href="#3-3-æ¥å£çš„å†…éƒ¨è¡¨ç¤º" class="headerlink" title="3.3 æ¥å£çš„å†…éƒ¨è¡¨ç¤º"></a>3.3 æ¥å£çš„å†…éƒ¨è¡¨ç¤º</h4><p>æˆ‘ä»¬å¯ä»¥æŠŠæ¥å£çœ‹ä½œå†…éƒ¨çš„ä¸€ä¸ªå…ƒç»„ (type, value)ã€‚<br>type æ˜¯æ¥å£åº•å±‚çš„å…·ä½“ç±»å‹ï¼ˆConcrete Typeï¼‰ï¼Œè€Œ value æ˜¯å…·ä½“ç±»å‹çš„å€¼ã€‚</p><h4 id="3-4-ç±»å‹æ–­è¨€"><a href="#3-4-ç±»å‹æ–­è¨€" class="headerlink" title="3.4 ç±»å‹æ–­è¨€"></a>3.4 ç±»å‹æ–­è¨€</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">type</span> Duck <span class="token keyword">interface</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>t TDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"TDUCK"</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d DDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"DDUCK"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>t TDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"T EAT"</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d DDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"D EAT"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> TDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> DDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span>    salary <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ–­è¨€ç±»å‹</span>    <span class="token comment" spellcheck="true">// æŠŠæ¥å£ç±»å‹è½¬æ¢æˆç»“æ„ä½“ç±»å‹</span>    <span class="token comment" spellcheck="true">// å®šä¹‰äº†ä¸€ä¸ªæ¥å£ç±»å‹</span>    <span class="token keyword">var</span> tduck Duck <span class="token operator">=</span> TDuck<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ–­è¨€è¿™ä¸ªå€¼çš„ç±»å‹ï¼Œvä¸ºå€¼ï¼Œokä¸ºåˆ¤æ–­çš„bool</span>    <span class="token comment" spellcheck="true">// å¦‚æœæ–­è¨€å¤±è´¥ï¼Œokä¸ºfalse vä¸ºç©ºå€¼</span>    v<span class="token punctuation">,</span>ok <span class="token operator">:=</span> tduck<span class="token punctuation">.</span><span class="token punctuation">(</span>TDuck<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>ç±»å‹æ–­è¨€æ‰©å±•</strong></p><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">//5 ç±»å‹é€‰æ‹©(é€šè¿‡switch)</span><span class="token comment" spellcheck="true">//var duck Duck =TDuck&amp;#123;"egon","ç”·",1,"åˆ˜äº¦è²"&amp;#125;</span><span class="token comment" spellcheck="true">////var duck Duck =PDuck&amp;#123;"egon","ç”·",1&amp;#125;</span><span class="token comment" spellcheck="true">//test4(duck)</span><span class="token comment" spellcheck="true">//ä½¿ç”¨switchï¼Œé€‰æ‹©æˆåŠŸï¼Œæ‹¿åˆ°ç»“æ„ä½“å¯¹è±¡</span><span class="token comment" spellcheck="true">//func test4(duck Duck)  &amp;#123;</span><span class="token comment" spellcheck="true">//    switch v:=duck.(type) &amp;#123;</span><span class="token comment" spellcheck="true">//    case PDuck:</span><span class="token comment" spellcheck="true">//        fmt.Println(v.name)</span><span class="token comment" spellcheck="true">//        fmt.Println("æˆ‘æ˜¯æ™®é€šé¸­å­")</span><span class="token comment" spellcheck="true">//    case TDuck:</span><span class="token comment" spellcheck="true">//        fmt.Println(v.wife)</span><span class="token comment" spellcheck="true">//        fmt.Println("æˆ‘æ˜¯å”è€é¸­")</span><span class="token comment" spellcheck="true">//    default:</span><span class="token comment" spellcheck="true">//        fmt.Println(v)</span><span class="token comment" spellcheck="true">//        fmt.Println("æˆ‘æ˜¯é¸­å­è¿™ä¸ªç±»")</span><span class="token comment" spellcheck="true">//</span><span class="token comment" spellcheck="true">//    &amp;#125;</span><span class="token comment" spellcheck="true">//&amp;#125;</span></code></pre><h4 id="3-5-ç©ºæ¥å£"><a href="#3-5-ç©ºæ¥å£" class="headerlink" title="3.5 ç©ºæ¥å£"></a>3.5 ç©ºæ¥å£</h4><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">type</span> Empty <span class="token keyword">interface</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªç©ºæ¥å£</span>    <span class="token comment" spellcheck="true">// æ‰€æœ‰æ•°æ®ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œæ‰€ä»¥ç©ºæ¥å£å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„å€¼</span>    <span class="token keyword">var</span> e Empty    a <span class="token operator">:=</span> <span class="token number">123</span>    e <span class="token operator">=</span> a    <span class="token comment" spellcheck="true">// è™½ç„¶å¯ä»¥æ¥å—ä»»æ„ç±»å‹ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯æœ¬èº«æ²¡æœ‰ä»»ä½•æ–¹æ³•</span>    <span class="token comment" spellcheck="true">// æ‰€ä»¥è¦ä½¿ç”¨åŸæ¥å€¼ç±»å‹çš„æ–¹æ³•å°±å¿…é¡»ç±»å‹æ–­è¨€å›å»ï¼Œå†ä½¿ç”¨</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>åŒç†ï¼Œé›†åˆä¸­ä¹Ÿå¯ä»¥æ”¾å…¥ç©ºæ¥å£æ¥æ¥æ”¶ä»»æ„å€¼</p><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">//var a[3]Duck</span><span class="token comment" spellcheck="true">//a[1]=PDuck&amp;#123;&amp;#125;</span><span class="token comment" spellcheck="true">//a[2]=TDuck&amp;#123;&amp;#125;</span><span class="token comment" spellcheck="true">//var a map[string]interface&amp;#123;&amp;#125;= make(map[string]interface&amp;#123;&amp;#125;)</span><span class="token comment" spellcheck="true">//a["name"]="lqz"</span><span class="token comment" spellcheck="true">//a["age"]=19</span><span class="token comment" spellcheck="true">//a["duck"]=PDuck&amp;#123;&amp;#125;</span></code></pre><h4 id="3-7-å®ç°å¤šä¸ªæ¥å£"><a href="#3-7-å®ç°å¤šä¸ªæ¥å£" class="headerlink" title="3.7 å®ç°å¤šä¸ªæ¥å£"></a>3.7 å®ç°å¤šä¸ªæ¥å£</h4><p>æ–¹å¼ä¸€ï¼šç›´æ¥å†™æ–¹æ³•å°±è¡Œ</p><p>æ–¹å¼äºŒï¼šé€šè¿‡æ¥å£åµŒå¥—</p><pre class=" language-go"><code class="language-go"><span class="token keyword">type</span> Animal <span class="token keyword">interface</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">type</span> Duck <span class="token keyword">interface</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    Animal    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//type Cat interface &amp;#123;</span><span class="token comment" spellcheck="true">//    Animal</span><span class="token comment" spellcheck="true">//    speak()</span><span class="token comment" spellcheck="true">//    run()</span><span class="token comment" spellcheck="true">//&amp;#125;</span><span class="token comment" spellcheck="true">//å¦‚æœä¸€ä¸ªç»“æ„ä½“å®ç°duckæ¥å£</span><span class="token keyword">type</span> PDuck <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    sex <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p PDuck<span class="token punctuation">)</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p PDuck<span class="token punctuation">)</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p PDuck<span class="token punctuation">)</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p PDuck<span class="token punctuation">)</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1 å®ç°å¤šä¸ªæ¥å£</span>    <span class="token comment" spellcheck="true">//var t TDuck=TDuck&amp;#123;&amp;#125;</span>    <span class="token comment" spellcheck="true">//var a Animal</span>    <span class="token comment" spellcheck="true">//var d Duck</span>    <span class="token comment" spellcheck="true">////ä¸€æ—¦è½¬åˆ°æŸä¸ªæ¥å£ä¸Šï¼Œåªèƒ½ä½¿ç”¨æ¥å£çš„æ–¹æ³•ï¼Œè‡ªèº«å±æ€§å’Œè‡ªèº«æ–¹æ³•éœ€è¦ç±»å‹æ–­è¨€åæ‰èƒ½ä½¿ç”¨</span>    <span class="token comment" spellcheck="true">//a=t</span>    <span class="token comment" spellcheck="true">//d=ta</span>    <span class="token comment" spellcheck="true">//2 æ¥å£åµŒå¥—</span>    <span class="token comment" spellcheck="true">//var a Animal</span>    <span class="token comment" spellcheck="true">//var d Duck</span>    <span class="token comment" spellcheck="true">//var c PDuck=PDuck&amp;#123;&amp;#125;</span>    <span class="token comment" spellcheck="true">//a=c</span>    <span class="token comment" spellcheck="true">//d=c</span>    <span class="token comment" spellcheck="true">//3 æ¥å£çš„é›¶å€¼</span>    <span class="token comment" spellcheck="true">//var a Animal   //nil æ˜¯å¼•ç”¨ç±»å‹</span>    <span class="token comment" spellcheck="true">//fmt.Println(a)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="4-è‡ªå®šä¹‰é›†åˆç±»å‹"><a href="#4-è‡ªå®šä¹‰é›†åˆç±»å‹" class="headerlink" title="4 è‡ªå®šä¹‰é›†åˆç±»å‹"></a>4 è‡ªå®šä¹‰é›†åˆç±»å‹</h3><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment" spellcheck="true">//å®šä¹‰MySetç±»å‹</span><span class="token keyword">type</span> MySet <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token keyword">interface</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token comment" spellcheck="true">//åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</span><span class="token keyword">func</span> <span class="token punctuation">(</span>m MySet<span class="token punctuation">)</span> <span class="token function">isExist</span><span class="token punctuation">(</span>a <span class="token keyword">interface</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> m<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¿”å›seté•¿åº¦</span><span class="token keyword">func</span> <span class="token punctuation">(</span>m MySet<span class="token punctuation">)</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è®¾ç½®å€¼</span><span class="token keyword">func</span> <span class="token punctuation">(</span>m MySet<span class="token punctuation">)</span> <span class="token function">set</span><span class="token punctuation">(</span>a <span class="token keyword">interface</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    m<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ é™¤å€¼</span><span class="token keyword">func</span> <span class="token punctuation">(</span>m MySet<span class="token punctuation">)</span> <span class="token function">delete</span><span class="token punctuation">(</span>a <span class="token keyword">interface</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æµ‹è¯•ä»£ç </span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªset</span>    <span class="token keyword">var</span> a MySet <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span>MySet<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//ç›¸å½“äº</span>    <span class="token comment" spellcheck="true">//var a MySet = make(map[interface&amp;#123;&amp;#125;]bool)</span>    <span class="token comment" spellcheck="true">//æ‰“å°setçš„é•¿åº¦</span>    <span class="token comment" spellcheck="true">//fmt.Println(a.len())</span>    <span class="token comment" spellcheck="true">//æ”¾å…¥ä¸€ä¸ªå€¼</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//æ”¾å…¥ä¸€ä¸ªç›¸åŒå€¼</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"lqz"</span><span class="token punctuation">)</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"lqz"</span><span class="token punctuation">)</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"lqz"</span><span class="token punctuation">)</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"lqz"</span><span class="token punctuation">)</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"lqz"</span><span class="token punctuation">)</span>    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"lqz"</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//æ‰“å°é•¿åº¦ï¼Œè¿˜æ˜¯1</span>    <span class="token comment" spellcheck="true">//fmt.Println(a.len())</span>    <span class="token comment" spellcheck="true">//åˆ¤æ–­1æ˜¯å¦å­˜åœ¨</span>    <span class="token comment" spellcheck="true">//fmt.Println(a.isExist(2))</span>    <span class="token comment" spellcheck="true">////åˆ é™¤1</span>    a<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">////åˆ¤æ–­1æ˜¯å¦å­˜åœ¨</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">isExist</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span><span class="token boolean">_</span><span class="token operator">:=</span><span class="token keyword">range</span> a<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="5-makeå’Œnewçš„åŒºåˆ«"><a href="#5-makeå’Œnewçš„åŒºåˆ«" class="headerlink" title="5 makeå’Œnewçš„åŒºåˆ«"></a>5 makeå’Œnewçš„åŒºåˆ«</h3><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token comment" spellcheck="true">//makeå’Œnewçš„åŒºåˆ«</span><span class="token keyword">type</span> PDuck1 <span class="token keyword">struct</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name <span class="token builtin">string</span>    sex <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//makeæ˜¯å¼•ç”¨ç±»å‹åˆå§‹åŒ–çš„æ—¶å€™ç”¨çš„</span>    <span class="token comment" spellcheck="true">//var per *PDuck1 =new(PDuck1)    //new æ˜¯è¿”å›æŒ‡å‘è¿™ä¸ªç±»å‹çš„æŒ‡é’ˆ</span>    <span class="token comment" spellcheck="true">//fmt.Println(per)</span>    <span class="token comment" spellcheck="true">//</span>    <span class="token comment" spellcheck="true">//</span>    <span class="token comment" spellcheck="true">//var per1 =&amp;PDuck1&amp;#123;&amp;#125;</span>    <span class="token comment" spellcheck="true">//fmt.Println(per1)</span>    <span class="token comment" spellcheck="true">//var per2 = make([]int,3,4)  //makeæ˜¯å…·ä½“çš„é€ å¼•ç”¨ç±»å‹  //newæ˜¯é€ æŒ‡å‘è¿™ä¸ªç±»å‹çš„æŒ‡é’ˆ</span>    <span class="token comment" spellcheck="true">//var per2 *[]int= new([]int)</span>    <span class="token comment" spellcheck="true">//fmt.Println(per2)</span>    <span class="token comment" spellcheck="true">//(*per2)=append((*per2),99)</span>    <span class="token comment" spellcheck="true">//fmt.Println(per2)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ç»“æ„ä½“&quot;&gt;&lt;a href=&quot;#1-ç»“æ„ä½“&quot; class=&quot;headerlink&quot; title=&quot;1 ç»“æ„ä½“&quot;&gt;&lt;/a&gt;1 ç»“æ„ä½“&lt;/h3&gt;&lt;p&gt;å®šä¹‰ï¼šç»“æ„ä½“æ˜¯å¤šä¸ªå­—æ®µçš„é›†åˆ&lt;/p&gt;
&lt;p&gt;é¢å‘å¯¹è±¡ä¸­ç±»çš„å®šä¹‰æ˜¯å±æ€§å’Œæ–¹æ³•çš„é›†åˆï¼Œç»“æ„ä½“å¯ä»¥çœ‹åšæ˜¯å±æ€§çš„é›†åˆ&lt;/p&gt;</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="go" scheme="http://huang_zhao.gitee.io/task/tags/go/"/>
    
    <category term="goé¢å‘æ¥å£" scheme="http://huang_zhao.gitee.io/task/tags/go%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>Typescriptå‡½æ•°</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/14/Typescript%E5%87%BD%E6%95%B0/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/14/Typescript%E5%87%BD%E6%95%B0/</id>
    <published>2020-09-14T13:59:11.000Z</published>
    <updated>2020-09-14T14:00:19.741Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å‡½æ•°åŸºæœ¬å®šä¹‰"><a href="#1-å‡½æ•°åŸºæœ¬å®šä¹‰" class="headerlink" title="1 å‡½æ•°åŸºæœ¬å®šä¹‰"></a>1 å‡½æ•°åŸºæœ¬å®šä¹‰</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// es5ä¸­å‡½æ•°å†™æ³•</span><span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"hz"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// es5 ä¸­çš„åŒ¿åå‡½æ•°</span><span class="token keyword">var</span> run1 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// es6ä¸­æœ‰åå‡½æ•°ï¼Œæ¨èè¿”å›å€¼æŒ‡å®šç±»å‹</span><span class="token keyword">function</span> <span class="token function">run2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"hz"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// es6ä¸­åŒ¿åå‡½æ•°</span><span class="token keyword">var</span> run3 <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">123</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="2-å‚æ•°å’Œè¿”å›å€¼"><a href="#2-å‚æ•°å’Œè¿”å›å€¼" class="headerlink" title="2 å‚æ•°å’Œè¿”å›å€¼"></a>2 å‚æ•°å’Œè¿”å›å€¼</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å®šä¹‰å‡½æ•°ä¼ å‚</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>b<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å®šä¹‰æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°</span><span class="token keyword">function</span> <span class="token function">run4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è¿™é‡Œreturnå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå·²ç»æŒ‡å®šäº†voidæ²¡æœ‰è¿”å›å€¼</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// es5 çš„å†™æ³•å¯ä»¥ä¼ ä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œå¯¹è¿”å›å€¼æ²¡æœ‰è¦æ±‚</span><span class="token keyword">function</span> <span class="token function">run5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">123</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="3-å¯é€‰å‚æ•°"><a href="#3-å¯é€‰å‚æ•°" class="headerlink" title="3 å¯é€‰å‚æ•°"></a>3 å¯é€‰å‚æ•°</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å¯é€‰å‚æ•°</span><span class="token comment" spellcheck="true">// tsä¸­é»˜è®¤å¿…é¡»æŒ‰ç…§å½¢å‚ä¼ å®å‚ï¼Œå¦‚æœè®¾ç½®æŸä¸ªå‚æ•°å¯ä»¥ä¸ä¼ å°±éœ€è¦é…ç½®</span><span class="token keyword">function</span> <span class="token function">prinyMsg</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>age<span class="token operator">?</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`$&amp;#123;name&amp;#125;   $&amp;#123;age&amp;#125;`</span></span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`$&amp;#123;name&amp;#125; ageä¿å¯†`</span></span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">prinyMsg</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span><span class="token keyword">var</span> res1 <span class="token operator">=</span> <span class="token function">prinyMsg</span><span class="token punctuation">(</span><span class="token string">"lxt"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span></code></pre><p>æ³¨æ„ï¼šå¯é€‰å‚æ•°å¿…é¡»æ”¾åœ¨å½¢å‚çš„æœ€åé¢ï¼Œä¸ç„¶ä¼šæŠ¥é”™</p><h3 id="4-é»˜è®¤å‚æ•°"><a href="#4-é»˜è®¤å‚æ•°" class="headerlink" title="4 é»˜è®¤å‚æ•°"></a>4 é»˜è®¤å‚æ•°</h3><p>es5ä¸­ä¸èƒ½è®¾ç½®é»˜è®¤å‚æ•°ï¼Œes6å’Œtsä¸­éƒ½å¯ä»¥è®¾ç½®é»˜è®¤å‚æ•°</p><p>æ³¨æ„ï¼šé»˜è®¤å‚æ•°ä¹Ÿå¿…é¡»å†™åœ¨æœ€åï¼Œå¦åˆ™æ²¡æœ‰æ•ˆæœ</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// é»˜è®¤å‚æ•°</span><span class="token keyword">function</span> <span class="token function">prinyMsg2</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`$&amp;#123;name&amp;#125;   $&amp;#123;age&amp;#125;`</span></span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`$&amp;#123;name&amp;#125; ageä¿å¯†`</span></span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">prinyMsg2</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">prinyMsg2</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span></code></pre><h3 id="5-å‰©ä½™å‚æ•°ï¼ˆä¸‰ç‚¹è¿ç®—ç¬¦ï¼‰"><a href="#5-å‰©ä½™å‚æ•°ï¼ˆä¸‰ç‚¹è¿ç®—ç¬¦ï¼‰" class="headerlink" title="5 å‰©ä½™å‚æ•°ï¼ˆä¸‰ç‚¹è¿ç®—ç¬¦ï¼‰"></a>5 å‰©ä½™å‚æ•°ï¼ˆä¸‰ç‚¹è¿ç®—ç¬¦ï¼‰</h3><pre class=" language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">add2</span><span class="token punctuation">(</span><span class="token operator">...</span>result<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>result<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        sum<span class="token operator">+</span><span class="token operator">=</span>result<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> sum<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ä¹Ÿå¯ä»¥å…ˆä¼ ä¸€ä¸ªï¼Œåé¢çš„å†æ¥å—èµ·æ¥</span><span class="token keyword">function</span> <span class="token function">add2</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span><span class="token operator">...</span>result<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> sum <span class="token operator">=</span> a<span class="token operator">+</span>b    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>result<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        sum<span class="token operator">+</span><span class="token operator">=</span>result<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> sum<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></code></pre><h3 id="6-å‡½æ•°é‡è½½"><a href="#6-å‡½æ•°é‡è½½" class="headerlink" title="6 å‡½æ•°é‡è½½"></a>6 å‡½æ•°é‡è½½</h3><p>es5ä¸­å‡ºç°åŒåå‡½æ•°ï¼Œä¸‹é¢çš„ä¼šæ›¿æ¢ä¸Šé¢çš„</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ–¹æ³•é‡è½½</span><span class="token comment" spellcheck="true">// å¦‚æœæˆ‘åªå†™ä¸¤ä¸ªgetInfoå°±ä¼šæŠ¥é”™ï¼Œå¿…é¡»è¦æœ‰é‡è½½å‡½æ•°</span><span class="token keyword">function</span> <span class="token function">getInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">getInfo</span><span class="token punctuation">(</span>age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">getInfo</span><span class="token punctuation">(</span>str<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">any</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> str <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"æˆ‘æ˜¯"</span><span class="token operator">+</span> str    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> str <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"æˆ‘çš„å¹´é¾„æ˜¯"</span> <span class="token operator">+</span> str    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸”è¿™é‡Œä¼ å‚å¿…é¡»ä¼ èƒ½æ‰¾åˆ°çš„ï¼Œå¦åˆ™æŠ¥é”™</span><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></code></pre><h3 id="7-ç®­å¤´å‡½æ•°"><a href="#7-ç®­å¤´å‡½æ•°" class="headerlink" title="7 ç®­å¤´å‡½æ•°"></a>7 ç®­å¤´å‡½æ•°</h3><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// es5</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// es6 ts</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'run'</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç®­å¤´å‡½æ•°ä¸­çš„thisæŒ‡ä»£ä¸Šä¸‹æ–‡</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-å‡½æ•°åŸºæœ¬å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-å‡½æ•°åŸºæœ¬å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1 å‡½æ•°åŸºæœ¬å®šä¹‰&quot;&gt;&lt;/a&gt;1 å‡½æ•°åŸºæœ¬å®šä¹‰&lt;/h3&gt;&lt;pre class=&quot; language-ts&quot;&gt;&lt;code class=&quot;language-t</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="tsåŸºç¡€" scheme="http://huang_zhao.gitee.io/task/tags/ts%E5%9F%BA%E7%A1%80/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/14/es5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88ts%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%89%8D%E6%8F%90%E6%89%A9%E5%B1%95%EF%BC%89/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/14/es5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88ts%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%89%8D%E6%8F%90%E6%89%A9%E5%B1%95%EF%BC%89/</id>
    <published>2020-09-14T13:58:11.000Z</published>
    <updated>2020-09-14T13:59:44.404Z</updated>
    
    <content type="html"><![CDATA[<h2 id="es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰"><a href="#es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰" class="headerlink" title="es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰"></a>es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰</h2><h3 id="1-åˆ›å»ºå¯¹è±¡"><a href="#1-åˆ›å»ºå¯¹è±¡" class="headerlink" title="1 åˆ›å»ºå¯¹è±¡"></a>1 åˆ›å»ºå¯¹è±¡</h3><p>å®šä¹‰ï¼Œåˆ›å»ºï¼ŒåŸå½¢é“¾ï¼Œé™æ€æ–¹æ³•</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// es5 ä¸­å®šä¹‰ç±»å’Œå¯¹è±¡</span><span class="token keyword">function</span> <span class="token function">Peopel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"hz"</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"i am "</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é€šè¿‡åŸå½¢é“¾å¢åŠ ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§,åŸå½¢é“¾ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¼šè¢«æ‰€æœ‰å®ä¾‹ä½¿ç”¨</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">"boy"</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>work <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é…ç½®é™æ€æ–¹æ³•</span>Peopel<span class="token punctuation">.</span>getInfo <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯ç±»çš„é™æ€æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Peopel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>sex<span class="token punctuation">)</span>p<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>p<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">)</span>Peopel<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="2-ç»§æ‰¿"><a href="#2-ç»§æ‰¿" class="headerlink" title="2 ç»§æ‰¿"></a>2 ç»§æ‰¿</h3><h4 id="2-1-å¯¹è±¡å†’å……å®ç°ç»§æ‰¿"><a href="#2-1-å¯¹è±¡å†’å……å®ç°ç»§æ‰¿" class="headerlink" title="2.1 å¯¹è±¡å†’å……å®ç°ç»§æ‰¿"></a>2.1 å¯¹è±¡å†’å……å®ç°ç»§æ‰¿</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// es5 ä¸­å®šä¹‰ç±»å’Œå¯¹è±¡</span><span class="token keyword">function</span> <span class="token function">Peopel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"hz"</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"i am "</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é€šè¿‡åŸå½¢é“¾å¢åŠ ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§,åŸå½¢é“¾ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¼šè¢«æ‰€æœ‰å®ä¾‹ä½¿ç”¨</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">"boy"</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>work <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»§æ‰¿ï¼šåŸå½¢é“¾+å¯¹è±¡å†’å……çš„ç»„åˆç»§æ‰¿æ¨¡å¼</span><span class="token keyword">function</span> <span class="token function">Web</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    Peopel<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// å¯¹è±¡å†’å……å®ç°ç»§æ‰¿</span>    <span class="token comment" spellcheck="true">// å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤åŸå½¢é“¾çš„æ–¹æ³•å’Œå±æ€§å¤–</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web</span><span class="token punctuation">(</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="2-2-åŸå½¢é“¾å®ç°ç»§æ‰¿"><a href="#2-2-åŸå½¢é“¾å®ç°ç»§æ‰¿" class="headerlink" title="2.2 åŸå½¢é“¾å®ç°ç»§æ‰¿"></a>2.2 åŸå½¢é“¾å®ç°ç»§æ‰¿</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// es5 ä¸­å®šä¹‰ç±»å’Œå¯¹è±¡</span><span class="token keyword">function</span> <span class="token function">Peopel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"hz"</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"i am "</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é€šè¿‡åŸå½¢é“¾å¢åŠ ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§,åŸå½¢é“¾ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¼šè¢«æ‰€æœ‰å®ä¾‹ä½¿ç”¨</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">"boy"</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>work <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»§æ‰¿ï¼šåŸå½¢é“¾+å¯¹è±¡å†’å……çš„ç»„åˆç»§æ‰¿æ¨¡å¼</span><span class="token keyword">function</span> <span class="token function">Web</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é€šè¿‡åŸå½¢é“¾å³å¯ä»¥æ˜¯ç”¨çˆ¶ç±»åŸå‹é“¾æ‰©å±•çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•</span>Web<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Peopel</span><span class="token keyword">var</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web</span><span class="token punctuation">(</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å­˜åœ¨é—®é¢˜ï¼šåœ¨å®ä¾‹åŒ–å­ç±»çš„æ—¶å€™æ— æ³•ç»™çˆ¶ç±»ä¼ å‚</span></code></pre><h4 id="3-3-åŸå½¢é“¾-æ„é€ å‡½æ•°ç»„åˆç»§æ‰¿"><a href="#3-3-åŸå½¢é“¾-æ„é€ å‡½æ•°ç»„åˆç»§æ‰¿" class="headerlink" title="3.3 åŸå½¢é“¾+æ„é€ å‡½æ•°ç»„åˆç»§æ‰¿"></a>3.3 åŸå½¢é“¾+æ„é€ å‡½æ•°ç»„åˆç»§æ‰¿</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// es5 ä¸­å®šä¹‰ç±»å’Œå¯¹è±¡</span><span class="token keyword">function</span> <span class="token function">Peopel</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token keyword">this</span><span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"i am "</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é€šè¿‡åŸå½¢é“¾å¢åŠ ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§,åŸå½¢é“¾ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¼šè¢«æ‰€æœ‰å®ä¾‹ä½¿ç”¨</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">"boy"</span>Peopel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>work <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»§æ‰¿ï¼šåŸå½¢é“¾+å¯¹è±¡å†’å……çš„ç»„åˆç»§æ‰¿æ¨¡å¼</span><span class="token keyword">function</span> <span class="token function">Web</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    Peopel<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç¬¬ä¸€ç§å†™æ³•</span>Web<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Peopel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç¬¬äºŒç§å†™æ³•</span>Web<span class="token punctuation">.</span>protorype <span class="token operator">=</span> Peopel<span class="token punctuation">.</span>protorype<span class="token keyword">var</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token string">"hz"</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰&quot;&gt;&lt;a href=&quot;#es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰&quot;&gt;&lt;/a&gt;es5é¢å‘å¯¹è±¡ï¼ˆtsé¢å‘å¯¹è±¡å‰ææ‰©å±•ï¼‰&lt;/h2&gt;&lt;h3 i</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="tsåŸºç¡€" scheme="http://huang_zhao.gitee.io/task/tags/ts%E5%9F%BA%E7%A1%80/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>Typescriptå…¥é—¨ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/13/Typescript%E5%85%A5%E9%97%A8%EF%BC%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/13/Typescript%E5%85%A5%E9%97%A8%EF%BC%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</id>
    <published>2020-09-13T14:47:11.000Z</published>
    <updated>2020-09-14T13:59:43.219Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-åŸºæœ¬ä»‹ç»"><a href="#1-åŸºæœ¬ä»‹ç»" class="headerlink" title="1 åŸºæœ¬ä»‹ç»"></a>1 åŸºæœ¬ä»‹ç»</h3><p>tsæ˜¯jsçš„è¶…é›†ï¼Œæ˜¯ç›®å‰å‰ç«¯å¿…å¤‡çš„åŸºç¡€ï¼ŒåŒ…å«äº†es5ï¼Œes6çš„è¯­æ³•</p><p>ä¹Ÿå¯ä»¥é›†æˆåˆ°vueä¸­</p><p>å®‰è£…ï¼šcnpm install -g typescript</p><p>æŸ¥çœ‹ç‰ˆæœ¬ï¼štsc -v</p><p>è¯­è¨€ç±»å‹ï¼šé™æ€å¼±ç±»å‹</p><p>æ— æ³•ç›´æ¥åœ¨æµè§ˆå™¨è¿è¡Œï¼Œéœ€è¦ç¼–è¯‘æˆjsä»£ç </p><h3 id="2-åŸºæœ¬ä½¿ç”¨"><a href="#2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2 åŸºæœ¬ä½¿ç”¨"></a>2 åŸºæœ¬ä½¿ç”¨</h3><h4 id="2-1-å¦‚ä½•é…ç½®è‡ªåŠ¨ç¼–è¯‘"><a href="#2-1-å¦‚ä½•é…ç½®è‡ªåŠ¨ç¼–è¯‘" class="headerlink" title="2.1 å¦‚ä½•é…ç½®è‡ªåŠ¨ç¼–è¯‘"></a>2.1 å¦‚ä½•é…ç½®è‡ªåŠ¨ç¼–è¯‘</h4><p>ä½¿ç”¨idevï¼švscode</p><p>åœ¨vscodeä¸­åœ¨é¡¹ç›®ä¸‹cmdçª—å£è¾“å…¥<code>tsc --init</code>å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª.jsonçš„é…ç½®æ–‡ä»¶</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// é»˜è®¤æ˜¯æ³¨é‡Šçš„è§£å¼€æ³¨é‡Šå³å¯</span><span class="token string">"outDir"</span><span class="token punctuation">:</span> <span class="token string">"./js"</span><span class="token comment" spellcheck="true">// ä¼šæŠŠç¼–è¯‘å®Œæˆçš„tsä»£ç æ”¾åˆ°jsç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­</span></code></pre><p>ç„¶åç‚¹å‡»ç»ˆç«¯â€“typescriptâ€“ç›‘è§†é…ç½®æ–‡ä»¶</p><p>å¦‚æœæŠ¥é”™9æˆæ˜¯å› ä¸ºtscæƒé™ä¸è¶³</p><p>è§£å†³æ–¹å¼ï¼šä»¥ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€cmd</p><p>è¾“å…¥<code>set-ExecutionPolicy RemoteSigned</code></p><p>å†è¾“å…¥Aæˆ–è€…Yå³å¯</p><h3 id="3-æ•°æ®ç±»å‹"><a href="#3-æ•°æ®ç±»å‹" class="headerlink" title="3 æ•°æ®ç±»å‹"></a>3 æ•°æ®ç±»å‹</h3><h4 id="3-1-æ•°æ®ç±»å‹å®šä¹‰"><a href="#3-1-æ•°æ®ç±»å‹å®šä¹‰" class="headerlink" title="3.1 æ•°æ®ç±»å‹å®šä¹‰"></a>3.1 æ•°æ®ç±»å‹å®šä¹‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å¸ƒå°”ç±»å‹ boolean</span><span class="token keyword">let</span> boo<span class="token punctuation">:</span><span class="token keyword">boolean</span> <span class="token operator">=</span> <span class="token keyword">true</span><span class="token comment" spellcheck="true">// letå…³é”®å­— å˜é‡å:å˜é‡ç±»å‹ = å€¼</span></code></pre><h4 id="3-2-æ•°å­—ç±»å‹-number"><a href="#3-2-æ•°å­—ç±»å‹-number" class="headerlink" title="3.2 æ•°å­—ç±»å‹(number)"></a>3.2 æ•°å­—ç±»å‹(number)</h4><pre class=" language-ts"><code class="language-ts"><span class="token keyword">let</span> num<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token keyword">let</span> num<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">123.3</span><span class="token comment" spellcheck="true">// æ•°å€¼ç±»å‹åŒ…æ‹¬æ•´å½¢å’Œæµ®ç‚¹å‹</span></code></pre><h4 id="3-3-å­—ç¬¦ç±»å‹ï¼ˆstringï¼‰"><a href="#3-3-å­—ç¬¦ç±»å‹ï¼ˆstringï¼‰" class="headerlink" title="3.3 å­—ç¬¦ç±»å‹ï¼ˆstringï¼‰"></a>3.3 å­—ç¬¦ç±»å‹ï¼ˆstringï¼‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token keyword">let</span> str<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"hz"</span></code></pre><h4 id="3-4-æ•°ç»„ç±»å‹ï¼ˆarrayï¼‰"><a href="#3-4-æ•°ç»„ç±»å‹ï¼ˆarrayï¼‰" class="headerlink" title="3.4 æ•°ç»„ç±»å‹ï¼ˆarrayï¼‰"></a>3.4 æ•°ç»„ç±»å‹ï¼ˆarrayï¼‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æ•°ç»„åœ¨å®šä¹‰çš„æ—¶å€™å¿…é¡»æŒ‡å®šå†…éƒ¨çš„ç±»å‹</span><span class="token comment" spellcheck="true">// ç¬¬ä¸€ç§å®šä¹‰æ–¹å¼</span><span class="token keyword">let</span> test_arry1<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">456</span><span class="token punctuation">]</span><span class="token keyword">let</span> test_arry2<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token string">"lxt"</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// æ¨èç”¨åŒå¼•å·</span><span class="token comment" spellcheck="true">// ç¬¬äºŒç§å®šä¹‰æ–¹å¼</span><span class="token keyword">let</span> test_arry3<span class="token punctuation">:</span><span class="token keyword">Array</span><span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">// ç¬¬ä¸‰ç§å®šä¹‰æ–¹å¼</span><span class="token comment" spellcheck="true">// é€šè¿‡anyç±»å‹å°±å¯ä»¥æ”¾ä»»æ„ç±»å‹</span><span class="token keyword">let</span> arr<span class="token punctuation">:</span><span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">]</span></code></pre><h4 id="3-5-å…ƒç»„ç±»å‹ï¼ˆtupleï¼‰"><a href="#3-5-å…ƒç»„ç±»å‹ï¼ˆtupleï¼‰" class="headerlink" title="3.5 å…ƒç»„ç±»å‹ï¼ˆtupleï¼‰"></a>3.5 å…ƒç»„ç±»å‹ï¼ˆtupleï¼‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å¯ä»¥å®šä¹‰å†…éƒ¨ç±»å‹çš„æ•°ç»„ï¼Œå¿…é¡»ä¸€ä¸€å¯¹åº”</span><span class="token comment" spellcheck="true">// å…ƒç»„ç±»å‹ï¼ˆæ•°ç»„çš„ä¸€ç§ï¼‰</span><span class="token keyword">let</span> test_arry4<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token keyword">number</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">"hz"</span><span class="token punctuation">,</span><span class="token string">"nb"</span><span class="token punctuation">]</span><span class="token punctuation">]</span></code></pre><h4 id="3-6-æšä¸¾ç±»å‹ï¼ˆenumï¼‰"><a href="#3-6-æšä¸¾ç±»å‹ï¼ˆenumï¼‰" class="headerlink" title="3.6 æšä¸¾ç±»å‹ï¼ˆenumï¼‰"></a>3.6 æšä¸¾ç±»å‹ï¼ˆenumï¼‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// æšä¸¾ç±»å‹ï¼Œç›¸å½“äºåˆ›å»ºä¸€ç§æ–°çš„ç±»å‹ï¼Œé€šè¿‡æ ‡è¯†ç¬¦å’Œæ•°å€¼çš„å¯¹åº”æ¥è¡¨ç¤ºå€¼ç±»</span><span class="token comment" spellcheck="true">// ç”¨äºæ ‡è¯†ä¸€ç§çŠ¶æ€</span><span class="token keyword">enum</span> Flag <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>success<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>error<span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> f<span class="token punctuation">:</span>Flag <span class="token operator">=</span> Flag<span class="token punctuation">.</span>success console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Flag<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//2 </span><span class="token comment" spellcheck="true">// å¦‚æœæšä¸¾ç±»å‹æ²¡æœ‰å®šä¹‰å€¼ï¼Œæ‰“å°çš„å°±æ˜¯ç´¢å¼•å€¼</span><span class="token keyword">enum</span> Color <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>red<span class="token punctuation">,</span>blue<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>green<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">var</span> c<span class="token punctuation">:</span>Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>redconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 0</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>blue<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 5</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>green<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 6 å¦‚æœä¸Šä¸€ä¸ªå¯¹åº”å€¼ä¸æ˜¯ç´¢å¼•ï¼Œå°±ä¼šæŒ‰ç…§ä¸Šä¸€ä¸ªå€¼é€’å¢1</span></code></pre><h4 id="3-7-ä»»æ„ç±»å‹ï¼ˆanyï¼‰"><a href="#3-7-ä»»æ„ç±»å‹ï¼ˆanyï¼‰" class="headerlink" title="3.7 ä»»æ„ç±»å‹ï¼ˆanyï¼‰"></a>3.7 ä»»æ„ç±»å‹ï¼ˆanyï¼‰</h4><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// ä»»æ„ç±»å‹ any</span><span class="token keyword">let</span> data<span class="token punctuation">:</span><span class="token keyword">any</span> <span class="token operator">=</span> <span class="token number">123</span>data <span class="token operator">=</span> <span class="token string">'123'</span><span class="token comment" spellcheck="true">// ä»»æ„ç±»å‹çš„ç”¨é€”</span><span class="token comment" spellcheck="true">// å½“æˆ‘ä»¬éœ€è¦ç”¨å˜é‡æ¥å—ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œjsä¸­æ˜¯å¯ä»¥ç›´æ¥æ¥å—</span><span class="token comment" spellcheck="true">// å¿…é¡»æŒ‡å®šany</span><span class="token keyword">let</span> oBox<span class="token punctuation">:</span><span class="token keyword">any</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>oBox<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span></code></pre><h4 id="3-8-å…¶ä»–ç±»å‹ï¼ˆneverç±»å‹ï¼‰çš„å­ç±»å‹"><a href="#3-8-å…¶ä»–ç±»å‹ï¼ˆneverç±»å‹ï¼‰çš„å­ç±»å‹" class="headerlink" title="3.8 å…¶ä»–ç±»å‹ï¼ˆneverç±»å‹ï¼‰çš„å­ç±»å‹"></a>3.8 å…¶ä»–ç±»å‹ï¼ˆneverç±»å‹ï¼‰çš„å­ç±»å‹</h4><p>ä»£è¡¨ä»ä¸ä¼šå‡ºç°çš„å€¼</p><p>ä»¥ä¸ºè¿™neverç±»å‹çš„å˜é‡åªèƒ½è¢«ç±»å‹æ‰€èµ‹å€¼</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// å…¶ä»–ç±»å‹ï¼ˆneverç±»å‹ï¼‰çš„å­ç±»å‹</span><span class="token comment" spellcheck="true">//undefined</span><span class="token comment" spellcheck="true">// numæ­¤æ—¶åªèƒ½è¢«èµ‹å€¼undefined</span><span class="token keyword">var</span> num<span class="token punctuation">:</span>undefinedconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å¦‚æœè¢«èµ‹å€¼å°±æ˜¯numberç±»å‹ï¼Œæ²¡èµ‹å€¼å°±æ˜¯undefinedç±»å‹</span><span class="token keyword">var</span> num<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">|</span> undefinedconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// null</span><span class="token comment" spellcheck="true">// undefinedå¯ä»¥ä¸èµ‹å€¼æ˜¯å› ä¸ºä»–ä¸ä»…å¯ä»¥ä½œä¸ºç±»å‹ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå€¼ï¼Œè€Œnullä¸ä¸€æ ·ï¼Œå¦‚æœè¦å®šä¹‰nullç±»å‹å°±å¿…é¡»èµ‹å€¼nullå€¼</span><span class="token keyword">var</span> num1<span class="token punctuation">:</span><span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç»¼åˆè¿ç”¨</span><span class="token comment" spellcheck="true">// å¦‚æœæˆ‘ä»¬å¯¹ä¸€ä¸ªå€¼çš„ç±»å‹ä¸èƒ½ç¡®å®šï¼Œä¸ä»…å¯ä»¥ç”¨anyï¼Œä¹Ÿå¯ä»¥ç”¨|åˆ†éš”å¯èƒ½å‡ºç°çš„ç±»å‹</span><span class="token keyword">let</span> num<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefinedconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// undefined</span>num <span class="token operator">=</span> <span class="token keyword">null</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// null</span>num <span class="token operator">=</span> <span class="token number">123</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 123</span></code></pre><h4 id="3-9-voidè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹"><a href="#3-9-voidè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹" class="headerlink" title="3.9 voidè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹"></a>3.9 voidè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹</h4><p>ä¸€èˆ¬ç”¨äºå®šä¹‰æ–¹æ³•çš„æ—¶å€™æ²¡æœ‰ä»»ä½•è¿”å›å€¼</p><pre class=" language-ts"><code class="language-ts"><span class="token comment" spellcheck="true">// è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›å€¼</span><span class="token keyword">function</span> <span class="token function">run1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'456'</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token function">run1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å¦‚æœä¸€ä¸ªæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå°±æŒ‡å®šè¿”å›å€¼ç±»å‹</span><span class="token keyword">function</span> <span class="token function">run1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">123</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">run1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-åŸºæœ¬ä»‹ç»&quot;&gt;&lt;a href=&quot;#1-åŸºæœ¬ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;1 åŸºæœ¬ä»‹ç»&quot;&gt;&lt;/a&gt;1 åŸºæœ¬ä»‹ç»&lt;/h3&gt;&lt;p&gt;tsæ˜¯jsçš„è¶…é›†ï¼Œæ˜¯ç›®å‰å‰ç«¯å¿…å¤‡çš„åŸºç¡€ï¼ŒåŒ…å«äº†es5ï¼Œes6çš„è¯­æ³•&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥é›†æˆåˆ°vueä¸­&lt;/p</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="tsåŸºç¡€" scheme="http://huang_zhao.gitee.io/task/tags/ts%E5%9F%BA%E7%A1%80/"/>
    
    <category term="ts" scheme="http://huang_zhao.gitee.io/task/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>HTTPåè®®æŸ¥æ¼è¡¥ç¼º</title>
    <link href="http://huang_zhao.gitee.io/task/2020/09/13/HTTP%E5%8D%8F%E8%AE%AE%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/"/>
    <id>http://huang_zhao.gitee.io/task/2020/09/13/HTTP%E5%8D%8F%E8%AE%AE%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/</id>
    <published>2020-09-13T05:20:11.000Z</published>
    <updated>2020-09-13T14:49:49.586Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«"><a href="#ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«" class="headerlink" title="ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«"></a>ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«</h3><ul><li>0.9 è¿œå¤ç‰ˆæœ¬ï¼Œåªæœ‰ä¸€ä¸ªGETå‘½ä»¤ï¼Œåªæ”¯æŒçº¯æ–‡æœ¬</li><li>1.1 ä¸»æµç‰ˆæœ¬<ul><li>å¼•å…¥äº†æŒä¹…é“¾æ¥ï¼Œé€šè¿‡è¯·æ±‚å¤´ä¸­çš„<code> keep-alive</code>æ¥è®¾ç½®</li><li>å¼•å…¥äº†ç®¡é“æœºåˆ¶ï¼ŒåŒä¸€ä¸ªtcpé“¾æ¥å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚</li><li>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œè¯·æ±‚å¤´ä¸­çš„<code> range</code>æ¥å®ç°</li><li>ä½¿ç”¨äº†è™šæ‹Ÿç½‘ç»œï¼Œä¸€ä¸ªç‰©ç†æœºä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼Œå…±äº«ä¸€ä¸ªipåœ°å€</li></ul></li><li>2.0 å…ˆè¿›ç‰ˆæœ¬<ul><li>äºŒè¿›åˆ¶åˆ†å¸§ï¼šå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶</li><li>å¤´éƒ¨å‹ç¼©ï¼šåœ¨1.1ç‰ˆæœ¬å¤´éƒ¨ä¿¡æ¯ä¼šåé‡ï¼Œè€Œbodyåªæœ‰å‡ åä¸ªå­—èŠ‚ï¼Œé€šè¿‡HPACKç®—æ³•è¿›è¡Œäºšç´¢</li><li>å¤šè·¯å¤ç”¨ï¼šä¸€ä¸ªTCPé“¾æ¥ï¼Œå“­æŠ¤çŸ­å’Œæµè§ˆå™¨éƒ½å¯ä»¥åŒæ—¶å‘å‡ºå¤šä¸ªè¯·æ±‚ï¼Œä¸ç”¨æŒ‰é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œè§£å†³äº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜</li><li>è¯·æ±‚ä¼˜å…ˆçº§ï¼šå¯ä»¥è®¾ç½®æ•°æ®å¸§çš„ä¼˜å…ˆçº§ï¼Œè®©æœåŠ¡å™¨å…ˆå¤„ç†é‡è¦çš„è¯·æ±‚</li></ul></li></ul><h3 id="äºŒã€çŠ¶æ€ç "><a href="#äºŒã€çŠ¶æ€ç " class="headerlink" title="äºŒã€çŠ¶æ€ç "></a>äºŒã€çŠ¶æ€ç </h3><ul><li>1xxï¼šä»£è¡¨è¯·æ±‚å·²ç»è¢«æ¥å—ï¼Œéœ€è¦åç»­å¤„ç†</li><li>2xxï¼šè¡¨ç¤ºæˆåŠŸ</li><li>3xxï¼šé‡å®šå‘çŠ¶æ€</li><li>4xxï¼šå®¢æˆ·ç«¯æœ‰è¯¯</li><li>5xxï¼šæœåŠ¡å™¨é”™è¯¯</li></ul><h4 id="1xx-ä¿¡æ¯ç±»"><a href="#1xx-ä¿¡æ¯ç±»" class="headerlink" title="1xx ä¿¡æ¯ç±»"></a>1xx ä¿¡æ¯ç±»</h4><p>æ¥å—çš„è¯·æ±‚æ­£åœ¨å¤„ç†ï¼Œä¿¡æ¯ç±»çŠ¶æ€ç </p><h4 id="2xx-æˆåŠŸ"><a href="#2xx-æˆåŠŸ" class="headerlink" title="2xx æˆåŠŸ"></a>2xx æˆåŠŸ</h4><ul><li><p>200 OK è¡¨ç¤ºä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£ç¡®è¯·æ±‚ã€‚</p></li><li><p>204 No contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†æ²¡æœ‰èµ„æºå¯è¿”å›ã€‚</p></li><li><p>206 Partial Contentï¼Œè¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨æˆåŠŸæ‰§è¡Œäº†è¿™éƒ¨åˆ†çš„ GET è¯·æ±‚ å“åº”æŠ¥æ–‡ä¸­åŒ…å«ç”± <strong>ã€ŒContent-Rangeã€</strong> æŒ‡å®šèŒƒå›´çš„å®ä½“å†…å®¹ã€‚</p></li></ul><h4 id="3xx-é‡å®šå‘"><a href="#3xx-é‡å®šå‘" class="headerlink" title="3xx é‡å®šå‘"></a>3xx é‡å®šå‘</h4><ul><li>301 moved permanentlyï¼Œæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URLï¼Œè¿™æ—¶åº”è¯¥æŒ‰ Location é¦–éƒ¨å­—æ®µæç¤ºçš„ URI é‡æ–°ä¿å­˜ã€‚</li><li>302 foundï¼Œä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶è¢«åˆ†é…äº†æ–°çš„ URLã€‚</li><li>303 see otherï¼Œè¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œåº”ä½¿ç”¨ GET æ–¹æ³•è·å–èµ„æºã€‚</li><li>304 not modifiedï¼Œå½“åå•†ç¼“å­˜å‘½ä¸­æ—¶ä¼šè¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚</li><li>307 temporary redirectï¼Œä¸´æ—¶é‡å®šå‘ï¼Œå’Œ302å«ä¹‰ç›¸åŒ,ä¸ä¼šæ”¹å˜method</li></ul><p>æ³¨æ„åŒºåˆ†ï¼š301ï¼ˆæ°¸ä¹…é‡å®šå‘ï¼‰ï¼Œ302ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰</p><h4 id="4xx-å®¢æˆ·ç«¯é”™è¯¯"><a href="#4xx-å®¢æˆ·ç«¯é”™è¯¯" class="headerlink" title="4xx å®¢æˆ·ç«¯é”™è¯¯"></a>4xx å®¢æˆ·ç«¯é”™è¯¯</h4><ul><li>400 bad requestï¼Œè¯·æ±‚æŠ¥æ–‡å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚</li><li>401 unauthorizedï¼Œè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯ã€‚</li><li>403 forbiddenï¼Œè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»ï¼Œå¯èƒ½é‡åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ </li><li>404 not foundï¼Œè¡¨ç¤ºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°è¯·æ±‚çš„èµ„æºï¼Œå¯èƒ½æ˜¯ç½‘å€è¾“é”™äº†</li><li>405 Method Not Allowedï¼ŒæœåŠ¡å™¨ç¦æ­¢ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡optionsæ–¹æ³•æ¥æŸ¥çœ‹æœåŠ¡å™¨å…è®¸çš„è®¿é—®æ–¹æ³•ï¼Œå¯èƒ½é‡åˆ°äº†corsï¼Œè·¨åŸŸé—®é¢˜</li></ul><h4 id="5xx-æœåŠ¡å™¨é”™è¯¯"><a href="#5xx-æœåŠ¡å™¨é”™è¯¯" class="headerlink" title="5xx æœåŠ¡å™¨é”™è¯¯"></a>5xx æœåŠ¡å™¨é”™è¯¯</h4><ul><li>500 internal sever errorï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚</li><li>502 Bad Gatewayï¼ŒæœåŠ¡å™¨è‡ªèº«æ˜¯æ­£å¸¸çš„ï¼Œè®¿é—®çš„æ—¶å€™å‡ºäº†é—®é¢˜ï¼Œå…·ä½“å•¥é”™è¯¯æˆ‘ä»¬ä¸çŸ¥é“ã€‚</li><li>503 service unavailableï¼Œè¡¨æ˜æœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ã€‚</li></ul><h3 id="ä¸‰ã€HTTPçš„ç¼“å­˜ç­–ç•¥"><a href="#ä¸‰ã€HTTPçš„ç¼“å­˜ç­–ç•¥" class="headerlink" title="ä¸‰ã€HTTPçš„ç¼“å­˜ç­–ç•¥"></a>ä¸‰ã€HTTPçš„ç¼“å­˜ç­–ç•¥</h3><h4 id="1-å¼ºç¼“å­˜"><a href="#1-å¼ºç¼“å­˜" class="headerlink" title="1 å¼ºç¼“å­˜"></a>1 å¼ºç¼“å­˜</h4><p>ä¸¤ä¸ªå…³é”®å­—æ®µï¼šExpiresï¼ŒCache-Control</p><p>HTTP1.0ç‰ˆæœ¬ï¼Œä½¿ç”¨çš„æ˜¯Expiresï¼ŒHTTP1.1ä½¿ç”¨çš„æ˜¯Cache-Control</p><ul><li>Expiresè¡¨ç¤ºè¿‡æœŸæ—¶é—´ï¼Œæ—¶é—´æ˜¯ç›¸å¯¹äºæœåŠ¡å™¨æ—¶é—´è€Œè¨€ï¼Œæ‰€ä»¥å¯èƒ½å› ä¸ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ—¶é—´ä¸ä¸€è‡´è€Œå‡ºé”™</li><li>Cache-Control è¡¨ç¤ºè¿‡æœŸæ—¶é•¿ï¼Œä»ç°åœ¨å¼€å§‹å¤šå°‘ç§’è¿‡æœŸï¼Œè¿™æ ·å°±é¿å…äº†ä¸¤ç«¯æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜</li></ul><p>æ³¨æ„ç‚¹ï¼š</p><ul><li>å½“Expireså’ŒCache-ControlåŒæ—¶å­˜åœ¨æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘Cache-Controlã€‚</li><li>å½“ç„¶äº†ï¼Œå½“ç¼“å­˜èµ„æºå¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜ï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥åå•†ç¼“å­˜ğŸ‘‡</li></ul><h4 id="2-åå•†ç¼“å­˜"><a href="#2-åå•†ç¼“å­˜" class="headerlink" title="2 åå•†ç¼“å­˜"></a>2 åå•†ç¼“å­˜</h4><p>å¼ºç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨å°±ä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦å“åº”çš„ç¼“å­˜Tagå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®tagå†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜</p><p>ç¼“å­˜åˆ†æˆä¸¤ç§ï¼š<strong>ã€ŒLast-Modifiedã€</strong> å’Œ <strong>ã€ŒETagã€</strong></p><h5 id="2-1-Last-Modified"><a href="#2-1-Last-Modified" class="headerlink" title="2.1 Last-Modified"></a>2.1 Last-Modified</h5><p>è¡¨ç¤ºæœ€åä¿®æ”¹æ—¶é—´ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨çš„å“åº”å¤´ä¼šå¸¦ä¸Šè¿™ä¸ªå‚æ•°ï¼Œç„¶åè¿™ä¸ªå‚æ•°ä¼šåœ¨ä¸‹ä¸€æ¬¡ç¼“å­˜æœªå‘½ä¸­çš„æ—¶å€™åŠ å…¥åˆ°è¯·æ±‚å¤´æ”¹ä¸ºï¼š<strong>If-Modified-Since</strong>ï¼Œkeyä¸åŒï¼Œä½†æ˜¯valueç›¸åŒï¼ŒæœåŠ¡å™¨æ‹¿åˆ°è¿™ä¸ªå­—æ®µåï¼Œå°±ä¼šå’Œè¯·æ±‚èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´å¯¹æ¯”</p><ul><li>å¦‚æœè¯·æ±‚å¤´çš„æ—¶é—´æ›´ä¹…è¿œï¼Œè¯´æ˜è¿™ä¸ªæ•°æ®å·²ç»å‘ç”Ÿäº†æ”¹å˜å°±è¦è·Ÿæ–°è¿™ä¸ªç¼“å­˜äº†ï¼Œè¿”å›æ–°çš„èµ„æº</li><li>å¦åˆ™è¿”å›304å‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¼“å­˜</li></ul><h5 id="2-2-ETag"><a href="#2-2-ETag" class="headerlink" title="2.2 ETag"></a>2.2 ETag</h5><p>æœ¬è´¨å°±æ˜¯å¯¹è¯·æ±‚çš„èµ„æºé€šè¿‡md5ç®—æ³•è¿ç®—ï¼Œç”Ÿæˆçš„ç»“æœå“ªæ€•åŠ¨äº†ä¸€ä¸ªå­—èŠ‚éƒ½ç®—æ˜¯ä¿®æ”¹ï¼Œå­˜å‚¨å’Œè¯·æ±‚æ–¹å¼å’Œä¸Šé¢ç›¸ä¼¼</p><p>æµè§ˆå™¨æ¥å—åˆ°ETagå€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸º<strong>ã€ŒIf-None-Matchã€</strong>è¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚</p><p>æœåŠ¡å™¨æ¥æ”¶åˆ°<strong>ã€ŒIf-None-Matchã€</strong>åï¼Œä¼šè·ŸæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„<strong>ã€ŒETagã€</strong>è¿›è¡Œæ¯”å¯¹ğŸ‘‡</p><ul><li>å¦‚æœä¸¤è€…ä¸€æ ·çš„è¯ï¼Œç›´æ¥è¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¼“å­˜</li><li>å¦‚æœä¸ä¸€æ ·çš„è¯ï¼Œè¯´æ˜å†…å®¹æ›´æ–°äº†ï¼Œè¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„HTTPè¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·</li></ul><h5 id="2-3-æ€»ç»“ï¼š"><a href="#2-3-æ€»ç»“ï¼š" class="headerlink" title="2.3 æ€»ç»“ï¼š"></a>2.3 æ€»ç»“ï¼š</h5><p>åå•†ç¼“å­˜çš„ä¸¤ç§æ–¹å¼</p><ul><li>æ€§èƒ½ä¸Šï¼šLast-Modifiedæ›´å¥½ï¼Œå› ä¸ºetagéœ€è¦è¿ç®—</li><li>ç²¾åº¦ä¸Šï¼šetagæ›´å¥½ï¼Œæ¯”å¦‚è¯´æŸä¸ªèµ„æºæ–‡ä»¶ï¼Œåªæ˜¯touchäº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰ä¿®æ”¹å†…å®¹ï¼Œåœ¨ä¿®æ”¹æ—¶é—´ä¸Šæ˜¯æ›´æ–°äº†ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå†…å®¹æ²¡å˜ã€‚</li><li>å¦‚æœä¸¤ç§æ–¹å¼éƒ½æ”¯æŒï¼Œä¼˜å…ˆè€ƒè™‘etag</li></ul><h4 id="3-ç¼“å­˜ä½ç½®"><a href="#3-ç¼“å­˜ä½ç½®" class="headerlink" title="3 ç¼“å­˜ä½ç½®"></a>3 ç¼“å­˜ä½ç½®</h4><p>æ€»ç»“æ¥è¯´ï¼šå¤§çš„jsï¼Œcssç¼“å­˜æ˜¯æ”¾åœ¨ç£ç›˜ä¸­ï¼Œä¸€äº›å°çš„èµ„æºç±»æ˜¯æ”¾åœ¨å†…å­˜ä¸­</p><h4 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4 æ€»ç»“"></a>4 æ€»ç»“</h4><ul><li><p>é¦–å…ˆæ£€æŸ¥<code>Cache-Control</code>ï¼Œ å°é²œï¼Œçœ‹å¼ºç¼“å­˜æ˜¯å¦å¯ç”¨</p></li><li><p>å¦‚æœå¯ç”¨çš„è¯ï¼Œç›´æ¥ä½¿ç”¨</p></li><li><p>å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„<code>If-Modified-Since</code>æˆ–è€…<code>If-None-Match</code>å­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°</p></li><li><p>èµ„æºæ›´æ–°ï¼Œè¿”å›èµ„æºå’Œ200çŠ¶æ€ç ã€‚</p></li><li><p>å¦åˆ™ï¼Œè¿”å›304ï¼Œç›´æ¥å‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜ä¸­å»èµ„æºã€‚</p></li></ul><h3 id="å››ã€HTTPå’ŒHTTPS"><a href="#å››ã€HTTPå’ŒHTTPS" class="headerlink" title="å››ã€HTTPå’ŒHTTPS"></a>å››ã€HTTPå’ŒHTTPS</h3><p>HTTPSä¸æ˜¯ä¸€ä¸ªè¡Œçš„åº”ç”¨å±‚åè®®ï¼Œæœ¬è´¨æ˜¯HTTP+TLS/SSLåè®®çš„ç»„åˆï¼Œä¿è¯å®‰å…¨æ€§æ˜¯SSL/TLSçš„å·¥ä½œ</p><ul><li>SSLï¼šå®‰å…¨å¥—æ¥å±‚2</li><li>TLSï¼šä¼ è¾“å±‚å®‰å…¨ï¼ˆéå¯¹ç§°åŠ å¯†ï¼‰</li></ul><p>HTTPSçš„å…³é”®ï¼š</p><ul><li>å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®å®‰å…¨;</li><li>å¯¹ç½‘ç«™æœåŠ¡å™¨è¿›è¡ŒçœŸå®èº«ä»½è®¤è¯ã€‚</li></ul><h3 id="äº”ã€çŸ­è½®è¯¢ï¼Œé•¿è½®è¯¢ï¼ŒWebSocket"><a href="#äº”ã€çŸ­è½®è¯¢ï¼Œé•¿è½®è¯¢ï¼ŒWebSocket" class="headerlink" title="äº”ã€çŸ­è½®è¯¢ï¼Œé•¿è½®è¯¢ï¼ŒWebSocket"></a>äº”ã€çŸ­è½®è¯¢ï¼Œé•¿è½®è¯¢ï¼ŒWebSocket</h3><h4 id="1-çŸ­è½®è¯¢"><a href="#1-çŸ­è½®è¯¢" class="headerlink" title="1 çŸ­è½®è¯¢"></a>1 çŸ­è½®è¯¢</h4><p>é€šè¿‡ä¸æ–­å»ºç«‹httpè¯·æ±‚ï¼Œæ— è®ºæ•°æ®æ˜¯å¦æœ‰æ›´æ–°éƒ½ç›´æ¥å“åº”</p><p>ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šç®€å•</li><li>ç¼ºç‚¹ï¼šå¤§é‡æµªè´¹èµ„æº</li></ul><h4 id="2-é•¿è½®è¯¢"><a href="#2-é•¿è½®è¯¢" class="headerlink" title="2 é•¿è½®è¯¢"></a>2 é•¿è½®è¯¢</h4><p>æ¥å—åˆ°è¯·æ±‚ä¸ä¼šç›´æ¥å“åº”ï¼Œå…ˆæŠŠè¿™ä¸ªè¯·æ±‚æŒ‚èµ·ï¼Œåˆ¤æ–­æœåŠ¡ç«¯æ•°æ®æ˜¯å¦æœ‰æ›´æ–°</p><p>å¦‚æœæœ‰æ›´æ–°å°±å“åº”ï¼Œæ²¡æœ‰æ›´æ–°å°±ç­‰ä¸€ä¼šå†è¿”å›</p><p>ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šæ¯”çŸ­è½®è¯¢èŠ‚çœäº†èµ„æº</li><li>ç¼ºç‚¹ï¼šæŒ‚èµ·ä¹Ÿä¼šå¯¼è‡´èµ„æºçš„æµªè´¹</li></ul><h4 id="3-WebSocket"><a href="#3-WebSocket" class="headerlink" title="3 WebSocket"></a>3 WebSocket</h4><p>WebSocket æ˜¯ Html5 å®šä¹‰çš„ä¸€ä¸ªæ–°åè®®ï¼Œä¸ä¼ ç»Ÿçš„ http åè®®ä¸åŒï¼Œè¯¥åè®®å…è®¸ç”±æœåŠ¡å™¨ä¸»åŠ¨çš„å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ã€‚</p><p>ä½¿ç”¨ WebSocket åè®®çš„ç¼ºç‚¹æ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„é…ç½®æ¯”è¾ƒå¤æ‚ã€‚WebSocket æ˜¯ä¸€ä¸ªå…¨åŒå·¥çš„åè®®ï¼Œä¹Ÿå°±æ˜¯é€šä¿¡åŒæ–¹æ˜¯å¹³ç­‰çš„ï¼Œå¯ä»¥ç›¸äº’å‘é€æ¶ˆæ¯ã€‚</p><h3 id="å…­ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#å…­ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="å…­ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>å…­ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h3><p>æ­£å‘ä»£ç†ï¼š</p><p>æˆ‘è¦å»æ‰¾é©¬äº‘å€Ÿé’±ï¼Œä½†æ˜¯ç›´æ¥æ‰¾é©¬äº‘ä»–ä¸ä¼šç»™æˆ‘ï¼Œæˆ‘å¯ä»¥é€šè¿‡èŠ±å‘—æ‰¾é©¬äº‘å€Ÿé’±ï¼Œéšè—çš„æ˜¯æˆ‘ï¼ˆå®¢æˆ·ç«¯ï¼‰</p><p>åå‘ä»£ç†ï¼š</p><p>è¾“å…¥<a href="http://www.baidu.com,æˆ‘ä»¬ä¸çŸ¥é“æ˜¯å“ªå°æœåŠ¡å™¨ä¸ºæˆ‘ä»¬å·¥ä½œ,ä½†æ˜¯åªè¦èƒ½è®¿é—®åˆ°å°±è¡Œ,éšè—çš„æ˜¯æœåŠ¡å™¨/">www.baidu.comï¼Œæˆ‘ä»¬ä¸çŸ¥é“æ˜¯å“ªå°æœåŠ¡å™¨ä¸ºæˆ‘ä»¬å·¥ä½œï¼Œä½†æ˜¯åªè¦èƒ½è®¿é—®åˆ°å°±è¡Œï¼Œéšè—çš„æ˜¯æœåŠ¡å™¨</a></p><p>ä¸€èˆ¬åå‘ä»£ç†ç”¨äºå®ç°æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«&quot;&gt;&lt;a href=&quot;#ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«&quot;&gt;&lt;/a&gt;ä¸€ã€HTTPåè®®ç‰ˆæœ¬åŒºåˆ«&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;0.9 è¿œå¤ç‰ˆæœ¬ï¼Œåªæœ‰ä¸€ä¸ªGETå‘½ä»¤ï¼Œåªæ”¯æŒçº¯æ–‡</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å‰ç«¯" scheme="http://huang_zhao.gitee.io/task/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="åè®®ï¼ŒæŸ¥æ¼è¡¥ç¼º" scheme="http://huang_zhao.gitee.io/task/tags/%E5%8D%8F%E8%AE%AE%EF%BC%8C%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/"/>
    
  </entry>
  
  <entry>
    <title>XpathåŸºæœ¬ç”¨æ³•</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/25/Xpath%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/25/Xpath%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</id>
    <published>2020-04-25T05:20:11.000Z</published>
    <updated>2020-08-26T01:01:48.059Z</updated>
    
    <content type="html"><![CDATA[<p>XPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ï¼Œæœ¬è´¨ä¸Šå’Œbs4å·®ä¸å¤š</p><p>ä¸»è¦é€‰å–èŠ‚ç‚¹çš„è¡¨è¾¾å¼æ˜¯<code>/</code>å’Œ<code>//</code>ç»„æˆ</p><p>æ•™ç¨‹ï¼š<a href="https://www.runoob.com/xpath/xpath-syntax.html">https://www.runoob.com/xpath/xpath-syntax.html</a></p><table><thead><tr><th align="left">è¡¨è¾¾å¼</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">nodename</td><td align="left">é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚</td></tr><tr><td align="left">/</td><td align="left">ä»æ ¹èŠ‚ç‚¹é€‰å–ã€‚</td></tr><tr><td align="left">//</td><td align="left">ä»åŒ¹é…é€‰æ‹©çš„å½“å‰èŠ‚ç‚¹é€‰æ‹©æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬çš„ä½ç½®ã€‚</td></tr><tr><td align="left">.</td><td align="left">é€‰å–å½“å‰èŠ‚ç‚¹ã€‚</td></tr><tr><td align="left">..</td><td align="left">é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</td></tr><tr><td align="left">@</td><td align="left">é€‰å–å±æ€§ã€‚</td></tr></tbody></table><table><thead><tr><th align="left">è·¯å¾„è¡¨è¾¾å¼</th><th align="left">ç»“æœ</th></tr></thead><tbody><tr><td align="left">bookstore</td><td align="left">é€‰å– bookstore å…ƒç´ çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚</td></tr><tr><td align="left">/bookstore</td><td align="left">é€‰å–æ ¹å…ƒç´  bookstoreã€‚æ³¨é‡Šï¼šå‡å¦‚è·¯å¾„èµ·å§‹äºæ­£æ–œæ ( / )ï¼Œåˆ™æ­¤è·¯å¾„å§‹ç»ˆä»£è¡¨åˆ°æŸå…ƒç´ çš„ç»å¯¹è·¯å¾„ï¼</td></tr><tr><td align="left">bookstore/book</td><td align="left">é€‰å–å±äº bookstore çš„å­å…ƒç´ çš„æ‰€æœ‰ book å…ƒç´ ã€‚</td></tr><tr><td align="left">//book</td><td align="left">é€‰å–æ‰€æœ‰ book å­å…ƒç´ ï¼Œè€Œä¸ç®¡å®ƒä»¬åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ã€‚</td></tr><tr><td align="left">bookstore//book</td><td align="left">é€‰æ‹©å±äº bookstore å…ƒç´ çš„åä»£çš„æ‰€æœ‰ book å…ƒç´ ï¼Œè€Œä¸ç®¡å®ƒä»¬ä½äº bookstore ä¹‹ä¸‹çš„ä»€ä¹ˆä½ç½®ã€‚</td></tr><tr><td align="left">//@lang</td><td align="left">é€‰å–åä¸º lang çš„æ‰€æœ‰å±æ€§ã€‚</td></tr></tbody></table><pre class=" language-python"><code class="language-python">doc <span class="token operator">=</span> <span class="token triple-quoted-string string">"""&lt;html>&lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head>&lt;body>&lt;p id="my_p" class="title">hello&lt;b id="bbb" class="boldest">The Dormouse's story&lt;/b>&lt;/p>&lt;p class="story li">Once upon a time there were three little sisters; and their names were&lt;a href="http://example.com/elsie" class="sister" id="link1">Elsie&lt;/a>&lt;a href="http://example.com/lacie" class="sister" id="link2">Lacie&lt;/a> and&lt;a href="http://example.com/tillie" class="sister" id="link3">Tillie&lt;/a>;and they lived at the bottom of a well.&lt;/p>&lt;p class="story">...&lt;/p>"""</span></code></pre><p>æµ‹è¯•æ¡ˆä¾‹ï¼š</p><pre class=" language-python"><code class="language-python">html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ‰€æœ‰èŠ‚ç‚¹ï¼Œåˆ—è¡¨åŒ…å«ä¸€ä¸ªä¸ªtagå¯¹è±¡</span><span class="token comment" spellcheck="true"># a = html.xpath('//*')</span><span class="token comment" spellcheck="true"># åœ¨bodyä¸‹çš„æ‰€æœ‰bæ ‡ç­¾ï¼ˆåŒ…å«å­å­å­™å­™ï¼‰</span><span class="token comment" spellcheck="true"># a = html.xpath('body//b')</span><span class="token comment" spellcheck="true"># åœ¨bdoyä¸‹çš„å­æ ‡ç­¾ä¸­çš„bæ ‡ç­¾ï¼ˆåªæœ‰å­æ ‡ç­¾ï¼‰</span><span class="token comment" spellcheck="true"># a = html.xpath('body/b')</span><span class="token comment" spellcheck="true"># å±æ€§åŒ¹é…,åªèƒ½å®Œå…¨åŒ¹é…ï¼Œå¦‚æœæœ‰å¤šä¸ª</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[@class="title"]')</span><span class="token comment" spellcheck="true"># å±æ€§åŒ¹é…æ¨¡ç³Šï¼Œåªè¦æœ‰å°±èƒ½åŒ¹é…</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[contains(@class,"li")]')</span><span class="token comment" spellcheck="true"># å¤šå±æ€§åŒ¹é…</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[contains(@class,"li") or @id="my_p"]')</span><span class="token comment" spellcheck="true"># è·å–å½“å‰æ ‡ç­¾çš„æ–‡æœ¬ï¼ˆä¸åŒ…å«å…¶å­èŠ‚ç‚¹å†…éƒ¨çš„ï¼‰ï¼ˆåˆ—è¡¨ï¼‰</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[@class="title"]/text()')</span><span class="token comment" spellcheck="true"># è·å–æ ‡ç­¾çš„å±æ€§</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[@class="title"]/@id')</span><span class="token comment" spellcheck="true"># ç´¢å¼•å–å‡ºä¸€ä¸ªæ ‡ç­¾ï¼ˆæ³¨æ„ç¬¬ä¸€ä¸ªå°±æ˜¯ã€1ã€‘ä¸æ˜¯0ï½ï¼‰</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[1]/text()')</span><span class="token comment" spellcheck="true"># å–å‡ºæœ€åä¸€ä¸ª</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[last()]/text()')</span><span class="token comment" spellcheck="true"># å–å‡ºä½ç½®å°äº3çš„</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[position()&lt;3]')</span><span class="token comment" spellcheck="true"># å–å‡ºå€’æ•°ç¬¬äºŒä¸ª</span><span class="token comment" spellcheck="true"># a = html.xpath('body//p[last()-2]')</span><span class="token comment" spellcheck="true"># 11 èŠ‚ç‚¹è½´é€‰æ‹©</span><span class="token comment" spellcheck="true"># ancestorï¼šç¥–å…ˆèŠ‚ç‚¹</span><span class="token comment" spellcheck="true"># ä½¿ç”¨äº†* è·å–æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹</span><span class="token comment" spellcheck="true"># a=html.xpath('//a/ancestor::*')</span><span class="token comment" spellcheck="true"># # è·å–ç¥–å…ˆèŠ‚ç‚¹ä¸­çš„div</span><span class="token comment" spellcheck="true"># a=html.xpath('//a/ancestor::div')</span><span class="token comment" spellcheck="true"># attributeï¼šå±æ€§å€¼</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/attribute::*')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/@aa')</span><span class="token comment" spellcheck="true"># childï¼šç›´æ¥å­èŠ‚ç‚¹</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/child::*')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/child::img/@src')</span><span class="token comment" spellcheck="true"># descendantï¼šæ‰€æœ‰å­å­™èŠ‚ç‚¹</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[6]/descendant::*')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[6]/descendant::h5/text()')</span><span class="token comment" spellcheck="true"># following:å½“å‰èŠ‚ç‚¹ä¹‹åæ‰€æœ‰èŠ‚ç‚¹(å…„å¼ŸèŠ‚ç‚¹å’Œå…„å¼Ÿå†…éƒ¨çš„èŠ‚ç‚¹)</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/following::*')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/following::*[1]/@href')</span><span class="token comment" spellcheck="true"># following-sibling:å½“å‰èŠ‚ç‚¹ä¹‹ååŒçº§èŠ‚ç‚¹ï¼ˆåªæ‰¾å…„å¼Ÿï¼‰</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/following-sibling::*')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/following-sibling::a')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/following-sibling::*[2]')</span><span class="token comment" spellcheck="true"># a=html.xpath('//a[1]/following-sibling::*[2]/@href')</span></code></pre><h3 id="æœ€å¸¸ç”¨"><a href="#æœ€å¸¸ç”¨" class="headerlink" title="æœ€å¸¸ç”¨"></a>æœ€å¸¸ç”¨</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># è·å–æ–‡æœ¬</span>a <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'body//p[1]/text()'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è·å–å±æ€§å€¼</span>a<span class="token operator">=</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span>'<span class="token operator">//</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">/</span>@href<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯æ‰¾åˆ°ä¸€ä¸ªæ ‡ç­¾å†é€šè¿‡è¿™ä¸ªæ ‡ç­¾è¿›è¡Œxpathç­›é€‰</span>tag<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//a[1]/@href'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è¿™è¡¨ç¤ºè¿˜æ˜¯ä»æ ¹å¾€ä¸‹æ‰¾</span>tag<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'.//a[1]/@href'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è¿™è¡¨ç¤ºä»å½“å‰æ ‡ç­¾ä½ç½®ä¸ºæ ¹å¾€ä¸‹æ‰¾</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;XPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ï¼Œæœ¬è´¨ä¸Šå’Œbs4å·®ä¸å¤š&lt;/p&gt;
&lt;p&gt;ä¸»è¦é€‰å–èŠ‚ç‚¹çš„è¡¨è¾¾å¼æ˜¯&lt;code&gt;/&lt;/code&gt;å’Œ&lt;code&gt;//&lt;/code&gt;ç»„æˆ&lt;/p&gt;
&lt;p&gt;æ•™ç¨‹ï¼š&lt;a href=&quot;https://www.runoob.com/xpath/x</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="python" scheme="http://huang_zhao.gitee.io/task/tags/python/"/>
    
    <category term="çˆ¬è™«" scheme="http://huang_zhao.gitee.io/task/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>æ”¯ä»˜å®ç½‘é¡µæ”¯ä»˜æ¥å£è°ƒç”¨</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/25/%E6%94%AF%E4%BB%98%E5%AE%9D%E7%BD%91%E9%A1%B5%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/25/%E6%94%AF%E4%BB%98%E5%AE%9D%E7%BD%91%E9%A1%B5%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/</id>
    <published>2020-04-25T05:20:11.000Z</published>
    <updated>2020-08-26T01:05:37.429Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€SDK-APIæ¥å£çš„è°ƒç”¨"><a href="#ä¸€ã€SDK-APIæ¥å£çš„è°ƒç”¨" class="headerlink" title="ä¸€ã€SDK/APIæ¥å£çš„è°ƒç”¨"></a>ä¸€ã€SDK/APIæ¥å£çš„è°ƒç”¨</h2><p>æ”¯ä»˜å®å¹³å°ä¸æä¾›pythonçš„sdkï¼Œåªæœ‰apiï¼Œæˆ‘ä»¬å¯ä»¥å»ç½‘ä¸Šæ‰¾åˆ«äººå°è£…å¥½çš„sdkï¼Œå¤åˆ¶è¿‡æ¥ï¼Œäº†è§£å¯¹åº”å‚æ•°</p><p>å¯ä»¥é€šè¿‡æ”¯ä»˜å®æä¾›çš„è½¯ä»¶è‡ªåŠ¨ç”Ÿæˆå…¬é’¥å’Œç§é’¥</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> alipay <span class="token keyword">import</span> AliPay<span class="token comment" spellcheck="true"># app_private_key_string = open("/path/to/your/private/key.pem").read()</span><span class="token comment" spellcheck="true"># alipay_public_key_string = open("/path/to/alipay/public/key.pem").read()</span>app_private_key_string <span class="token operator">=</span> <span class="token triple-quoted-string string">"""-----BEGIN RSA PRIVATE KEY-----ä½ çš„ç§é’¥-----END RSA PRIVATE KEY-----"""</span>alipay_public_key_string <span class="token operator">=</span> <span class="token triple-quoted-string string">"""-----BEGIN PUBLIC KEY-----æ”¯ä»˜å®å¹³å°åˆ›å»ºçš„åº”ç”¨çš„å…¬é’¥-----END PUBLIC KEY-----"""</span>alipay <span class="token operator">=</span> AliPay<span class="token punctuation">(</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºåº”ç”¨çš„appid</span>    appid<span class="token operator">=</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    app_notify_url<span class="token operator">=</span><span class="token string">'http://127.0.0.1:8000/home/'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># the default notify path</span>    <span class="token comment" spellcheck="true"># é…ç½®ä½ çš„ç§é’¥</span>    app_private_key_string<span class="token operator">=</span>app_private_key_string<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># alipay public key, do not use your own public key!</span>    <span class="token comment" spellcheck="true"># é…ç½®åº”ç”¨çš„å…¬é’¥</span>    alipay_public_key_string<span class="token operator">=</span>alipay_public_key_string<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># åŠ å¯†æ–¹å¼</span>    sign_type<span class="token operator">=</span><span class="token string">"RSA2"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># RSA or RSA2</span>    <span class="token comment" spellcheck="true"># è°ƒè¯•æ¨¡å¼ï¼Œå¦‚æœç”¨çœŸå®ç¯å¢ƒå°±è¦æ”¹æˆTrue</span>    debug<span class="token operator">=</span><span class="token boolean">False</span>  <span class="token comment" spellcheck="true"># False by default</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ”¯ä»˜å®çš„ç½‘å…³æ¥å£</span>alipay_url<span class="token operator">=</span><span class="token string">'https://openapi.alipaydev.com/gateway.do?'</span><span class="token comment" spellcheck="true"># ç”Ÿæˆæ”¯ä»˜é¡µé¢</span>order_string <span class="token operator">=</span> alipay<span class="token punctuation">.</span>api_alipay_trade_page_pay    <span class="token punctuation">(</span>    out_trade_no<span class="token operator">=</span><span class="token string">"20161112www4334"</span><span class="token punctuation">,</span>    total_amount<span class="token operator">=</span><span class="token number">9999</span><span class="token punctuation">,</span>    subject<span class="token operator">=</span><span class="token string">'éŸ©çº¢ç‰ˆå……æ°”å¨ƒå¨ƒ'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># å•†å“åç§°</span>    <span class="token comment" spellcheck="true"># æäº¤getè¯·æ±‚çš„url</span>    return_url<span class="token operator">=</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true"># æäº¤postè¯·æ±‚çš„url</span>    notify_url<span class="token operator">=</span><span class="token string">"xxx"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ç”Ÿæˆæ”¯ä»˜é“¾æ¥</span><span class="token keyword">print</span><span class="token punctuation">(</span>alipay_url<span class="token operator">+</span>order_string<span class="token punctuation">)</span></code></pre><p>è¿™é‡Œå†…éƒ¨æœ‰å¾ˆå¤šé…ç½®ä¿¡æ¯ï¼Œå¯ä»¥æŠŠé…ç½®ä¿¡æ¯æå–å‡ºæ¥æ”¾åˆ°settingsæ–‡ä»¶ä¸­ï¼Œè§£è€¦åˆ</p><h2 id="äºŒã€é¡¹ç›®ä¸­è°ƒç”¨æ”¯ä»˜æ¥å£"><a href="#äºŒã€é¡¹ç›®ä¸­è°ƒç”¨æ”¯ä»˜æ¥å£" class="headerlink" title="äºŒã€é¡¹ç›®ä¸­è°ƒç”¨æ”¯ä»˜æ¥å£"></a>äºŒã€é¡¹ç›®ä¸­è°ƒç”¨æ”¯ä»˜æ¥å£</h2><p>å‰ç«¯ç‚¹å‡»ç«‹å³è´­ä¹°ï¼ŒæŠŠåç«¯æ‰€éœ€è¦çš„å‚æ•°å‘é€ç»™åç«¯</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">PayView</span><span class="token punctuation">(</span>GenericViewSet<span class="token punctuation">,</span> CreateModelMixin<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># ç™»å½•jwtè®¤è¯</span>    authentication_classes <span class="token operator">=</span> <span class="token punctuation">[</span>JSONWebTokenAuthentication<span class="token punctuation">,</span> <span class="token punctuation">]</span>    <span class="token comment" spellcheck="true"># é˜²æ­¢æ¸¸å®¢ç™»å½•</span>    permission_classes <span class="token operator">=</span> <span class="token punctuation">[</span>IsAuthenticated<span class="token punctuation">,</span> <span class="token punctuation">]</span>    queryset <span class="token operator">=</span> models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>all<span class="token punctuation">(</span><span class="token punctuation">)</span>    serializer_class <span class="token operator">=</span> sers<span class="token punctuation">.</span>OrderSerializer    <span class="token comment" spellcheck="true"># é‡å†™createæ–¹æ³•</span>    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        serializer <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>data<span class="token punctuation">,</span> context<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'request': request&amp;#125;)</span>        <span class="token comment" spellcheck="true"># é€šè¿‡åºåˆ—åŒ–ç±»å»æ ¡éªŒæ•°æ®ï¼Œä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ï¼Œç”Ÿæˆæ”¯ä»˜å®é“¾æ¥</span>        <span class="token comment" spellcheck="true"># ä¸»è¦é€»è¾‘éƒ½åœ¨åºåˆ—åŒ–ç±»ä¸­</span>        serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># ç­‰åŒäºser.saveï¼ˆï¼‰</span>        self<span class="token punctuation">.</span>perform_create<span class="token punctuation">(</span>serializer<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># è¿”å›æ”¯ä»˜å®æ”¯ä»˜é“¾æ¥</span>        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'pay_url'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>åºåˆ—åŒ–ç±»</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> ValidationError<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> models<span class="token keyword">class</span> <span class="token class-name">OrderSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># å‰ç«¯ä¼ ä»€ä¹ˆæ•°æ®è¿‡æ¥&amp;#123;course:[1,2,3],total_amount:100,subject:xxå•†å“,pay_type:1,&amp;#125;</span>    <span class="token comment" spellcheck="true"># userå­—æ®µéœ€è¦ï¼Œä½†æ˜¯ä¸æ˜¯ä¼ çš„ï¼Œä½¿ç”¨äº†jwt</span>    <span class="token comment" spellcheck="true"># éœ€è¦æŠŠcourse:[1,2,3] å¤„ç†æˆ course:[obj1,obj2,obj3]</span>    <span class="token comment" spellcheck="true"># è¯¾æ—¶ï¼š[1,4,6,]===>è¯¾æ—¶ï¼š[obj1,obj4,obj6,]</span>    <span class="token comment" spellcheck="true"># course=serializers.CharField()</span>    <span class="token keyword">from</span> course<span class="token punctuation">.</span>models <span class="token keyword">import</span> Course    <span class="token comment" spellcheck="true"># è¿™ä¸ªæ–¹æ³•å¯ä»¥è®©è¯¾æ—¶ï¼š[1,4,6,]===>è¯¾æ—¶ï¼š[obj1,obj4,obj6,]</span>    course<span class="token operator">=</span>serializers<span class="token punctuation">.</span>PrimaryKeyRelatedField<span class="token punctuation">(</span>queryset<span class="token operator">=</span>Course<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>all<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> write_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> models<span class="token punctuation">.</span>Order        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'total_amount'</span><span class="token punctuation">,</span><span class="token string">'subject'</span><span class="token punctuation">,</span><span class="token string">'pay_type'</span><span class="token punctuation">,</span><span class="token string">'course'</span><span class="token punctuation">]</span>        extra_kwargs<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>            <span class="token string">'total_amount'</span><span class="token punctuation">:</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'required':True&amp;#125;,</span>            <span class="token string">'pay_type'</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'required': True&amp;#125;,</span>        <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>    <span class="token keyword">def</span> <span class="token function">_check_price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>attrs<span class="token punctuation">)</span><span class="token punctuation">:</span>        total_amount<span class="token operator">=</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'total_amount'</span><span class="token punctuation">)</span>        course_list<span class="token operator">=</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'course'</span><span class="token punctuation">)</span>        total_price<span class="token operator">=</span><span class="token number">0</span>        <span class="token keyword">for</span> course <span class="token keyword">in</span> course_list<span class="token punctuation">:</span>            total_price<span class="token operator">+=</span>course<span class="token punctuation">.</span>price        <span class="token keyword">if</span> total_price<span class="token operator">!=</span>total_amount<span class="token punctuation">:</span>            <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span><span class="token string">'ä»·æ ¼ä¸åˆæ³•'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> total_amount    <span class="token keyword">def</span> <span class="token function">_gen_out_trade_no</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">import</span> uuid        <span class="token keyword">return</span> str<span class="token punctuation">(</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">_get_user</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># éœ€è¦requestå¯¹è±¡(éœ€è¦è§†å›¾é€šè¿‡contextæŠŠreuqestå¯¹è±¡ä¼ å…¥ã€‚é‡å†™createæ–¹æ³•)</span>        request<span class="token operator">=</span>self<span class="token punctuation">.</span>context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> request<span class="token punctuation">.</span>user    <span class="token keyword">def</span> <span class="token function">_gen_pay_url</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>out_trade_no<span class="token punctuation">,</span>total_amout<span class="token punctuation">,</span>subject<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># total_amoutæ˜¯Decimalç±»å‹ï¼Œè¯†åˆ«ä¸äº†ï¼Œéœ€è¦è½¬æ¢æˆfloatç±»å‹</span>        <span class="token keyword">from</span> luffyapi<span class="token punctuation">.</span>libs<span class="token punctuation">.</span>al_pay <span class="token keyword">import</span> alipay<span class="token punctuation">,</span>gateway        order_string <span class="token operator">=</span> alipay<span class="token punctuation">.</span>api_alipay_trade_page_pay    <span class="token punctuation">(</span>            out_trade_no<span class="token operator">=</span>out_trade_no<span class="token punctuation">,</span>            total_amount<span class="token operator">=</span>float<span class="token punctuation">(</span>total_amout<span class="token punctuation">)</span><span class="token punctuation">,</span>            subject<span class="token operator">=</span>subject<span class="token punctuation">,</span>            return_url<span class="token operator">=</span>settings<span class="token punctuation">.</span>RETURN_URL<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># getå›è°ƒï¼Œå‰å°åœ°å€ï¼ˆæœ€åè·³è½¬çš„æ”¯ä»˜æˆåŠŸé¡µé¢ï¼‰</span>            notify_url<span class="token operator">=</span>settings<span class="token punctuation">.</span>NOTIFY_URL   <span class="token comment" spellcheck="true"># postå›è°ƒï¼Œåå°åœ°å€ï¼ˆç»™åç«¯å»åˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸï¼Œæ”¯ä»˜æˆåŠŸè¿”å›successï¼‰</span>        <span class="token punctuation">)</span>        <span class="token keyword">return</span> gateway<span class="token operator">+</span>order_string    <span class="token keyword">def</span> <span class="token function">_before_create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>attrs<span class="token punctuation">,</span>user<span class="token punctuation">,</span>pay_url<span class="token punctuation">,</span>out_trade_no<span class="token punctuation">)</span><span class="token punctuation">:</span>        attrs<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token operator">=</span>user        attrs<span class="token punctuation">[</span><span class="token string">'out_trade_no'</span><span class="token punctuation">]</span><span class="token operator">=</span>out_trade_no        self<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'pay_url'</span><span class="token punctuation">]</span><span class="token operator">=</span>pay_url    <span class="token keyword">def</span> <span class="token function">validate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        # 1ï¼‰è®¢å•æ€»ä»·æ ¡éªŒ        # 2ï¼‰ç”Ÿæˆè®¢å•å·        # 3ï¼‰æ”¯ä»˜ç”¨æˆ·ï¼šrequest.user        # 4ï¼‰æ”¯ä»˜é“¾æ¥ç”Ÿæˆ        # 5ï¼‰å…¥åº“(ä¸¤ä¸ªè¡¨)çš„ä¿¡æ¯å‡†å¤‡        '''</span>        <span class="token comment" spellcheck="true"># 1ï¼‰è®¢å•æ€»ä»·æ ¡éªŒ</span>        total_amout <span class="token operator">=</span> self<span class="token punctuation">.</span>_check_price<span class="token punctuation">(</span>attrs<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2ï¼‰ç”Ÿæˆè®¢å•å·</span>        out_trade_no<span class="token operator">=</span>self<span class="token punctuation">.</span>_gen_out_trade_no<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 3ï¼‰æ”¯ä»˜ç”¨æˆ·ï¼šrequest.user</span>        user<span class="token operator">=</span>self<span class="token punctuation">.</span>_get_user<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 4ï¼‰æ”¯ä»˜é“¾æ¥ç”Ÿæˆ</span>        pay_url<span class="token operator">=</span>self<span class="token punctuation">.</span>_gen_pay_url<span class="token punctuation">(</span>out_trade_no<span class="token punctuation">,</span>total_amout<span class="token punctuation">,</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'subject'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 5ï¼‰å…¥åº“(ä¸¤ä¸ªè¡¨)çš„ä¿¡æ¯å‡†å¤‡</span>        self<span class="token punctuation">.</span>_before_create<span class="token punctuation">(</span>attrs<span class="token punctuation">,</span>user<span class="token punctuation">,</span>pay_url<span class="token punctuation">,</span>out_trade_no<span class="token punctuation">)</span>        <span class="token keyword">return</span> attrs    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>        course_list<span class="token operator">=</span>validated_data<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'course'</span><span class="token punctuation">)</span>        order<span class="token operator">=</span>models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span>validated_data<span class="token punctuation">)</span>        <span class="token keyword">for</span> course <span class="token keyword">in</span> course_list<span class="token punctuation">:</span>            models<span class="token punctuation">.</span>OrderDetail<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>order<span class="token operator">=</span>order<span class="token punctuation">,</span>course<span class="token operator">=</span>course<span class="token punctuation">,</span>price<span class="token operator">=</span>course<span class="token punctuation">.</span>price<span class="token punctuation">,</span>real_price<span class="token operator">=</span>course<span class="token punctuation">.</span>price<span class="token punctuation">)</span>        <span class="token keyword">return</span> order</code></pre><p>æ”¯ä»˜æˆåŠŸåï¼Œå‰ç«¯ä¼šç›´æ¥è·³è½¬åˆ°æ”¯ä»˜æˆåŠŸçš„é¡µé¢ï¼Œæ”¯ä»˜å®ä¼šå‘åç«¯å‘é€postè¯·æ±‚ï¼Œè®©æˆ‘ä»¬éªŒè¯æ‰€æœ‰çš„ä¿¡æ¯æ˜¯å¦æ­£ç¡®</p><pre class=" language-python"><code class="language-python"> <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        æ”¯ä»˜å®å›è°ƒæ¥å£        '''</span>        <span class="token keyword">from</span> luffyapi<span class="token punctuation">.</span>libs<span class="token punctuation">.</span>al_pay <span class="token keyword">import</span> alipay        <span class="token keyword">from</span> luffyapi<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>logger <span class="token keyword">import</span> log        data <span class="token operator">=</span> request<span class="token punctuation">.</span>data        out_trade_no<span class="token operator">=</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'out_trade_no'</span><span class="token punctuation">,</span>None<span class="token punctuation">)</span>        gmt_payment<span class="token operator">=</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'gmt_payment'</span><span class="token punctuation">,</span>None<span class="token punctuation">)</span>        signature <span class="token operator">=</span> data<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">"sign"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># éªŒè¯ç­¾å</span>        success <span class="token operator">=</span> alipay<span class="token punctuation">.</span>verify<span class="token punctuation">(</span>data<span class="token punctuation">,</span> signature<span class="token punctuation">)</span>        <span class="token keyword">if</span> success <span class="token operator">and</span> data<span class="token punctuation">[</span><span class="token string">"trade_status"</span><span class="token punctuation">]</span> <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">"TRADE_SUCCESS"</span><span class="token punctuation">,</span> <span class="token string">"TRADE_FINISHED"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>out_trade_no<span class="token operator">=</span>out_trade_no<span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span>order_status<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>pay_time<span class="token operator">=</span>gmt_payment<span class="token punctuation">)</span>            log<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'%sè®¢å•æ”¯ä»˜æˆåŠŸ'</span><span class="token operator">%</span>out_trade_no<span class="token punctuation">)</span>            <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            log<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'%sè®¢å•æœ‰é—®é¢˜'</span> <span class="token operator">%</span> out_trade_no<span class="token punctuation">)</span>            <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span></code></pre><p>å‰ç«¯åˆ°äº†æ”¯ä»˜æˆåŠŸçš„é¡µé¢ï¼Œå…¶å®ä¹Ÿä¸å®Œå…¨æ˜¯æ”¯ä»˜æˆåŠŸï¼Œå› ä¸ºè¿˜æ²¡æœ‰å¾—åˆ°åç«¯çš„ç¡®è®¤ï¼Œæ‰€ä»¥å¯ä»¥å‘é€ä¸€ä¸ªgetè¯·æ±‚å»æ ¡éªŒä¸€ä¸‹æ˜¯å¦æˆåŠŸ</p><pre class=" language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        out_trade_no<span class="token operator">=</span>request<span class="token punctuation">.</span>query_params<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'out_trade_no'</span><span class="token punctuation">)</span>        order<span class="token operator">=</span>models<span class="token punctuation">.</span>Order<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>out_trade_no<span class="token operator">=</span>out_trade_no<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> order<span class="token punctuation">.</span>order_status<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€SDK-APIæ¥å£çš„è°ƒç”¨&quot;&gt;&lt;a href=&quot;#ä¸€ã€SDK-APIæ¥å£çš„è°ƒç”¨&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€SDK/APIæ¥å£çš„è°ƒç”¨&quot;&gt;&lt;/a&gt;ä¸€ã€SDK/APIæ¥å£çš„è°ƒç”¨&lt;/h2&gt;&lt;p&gt;æ”¯ä»˜å®å¹³å°ä¸æä¾›pythonçš„sdkï¼Œåªæœ‰a</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="django" scheme="http://huang_zhao.gitee.io/task/tags/django/"/>
    
    <category term="python" scheme="http://huang_zhao.gitee.io/task/tags/python/"/>
    
    <category term="ç¬¬ä¸‰æ–¹æ¥å£" scheme="http://huang_zhao.gitee.io/task/tags/%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8E%A5%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>celeryåŸºç¡€</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/25/celery/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/25/celery/</id>
    <published>2020-04-25T05:20:11.000Z</published>
    <updated>2020-08-26T01:02:17.121Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€celeryä»‹ç»"><a href="#ä¸€ã€celeryä»‹ç»" class="headerlink" title="ä¸€ã€celeryä»‹ç»"></a>ä¸€ã€celeryä»‹ç»</h2><p>Celery å®˜ç½‘ï¼š<a href="http://www.celeryproject.org/">http://www.celeryproject.org/</a></p><p>Celery å®˜æ–¹æ–‡æ¡£è‹±æ–‡ç‰ˆï¼š<a href="http://docs.celeryproject.org/en/latest/index.html">http://docs.celeryproject.org/en/latest/index.html</a></p><p>Celery å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆï¼š<a href="http://docs.jinkan.org/docs/celery/">http://docs.jinkan.org/docs/celery/</a></p><ul><li>å¼‚æ­¥ä»»åŠ¡æ¡†æ¶</li><li>æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡</li><li>æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡</li><li>æ‰§è¡Œå®šæ—¶ä»»åŠ¡</li></ul><h2 id="äºŒã€celeryæ¶æ„"><a href="#äºŒã€celeryæ¶æ„" class="headerlink" title="äºŒã€celeryæ¶æ„"></a>äºŒã€celeryæ¶æ„</h2><p><img src="https://gitee.com/huang_zhao/hz/raw/master/hz/007S8ZIlgy1ggqw0f7bltj30q80c174d.jpg" alt="007S8ZIlgy1ggqw0f7bltj30q80c174d" loading="lazy"></p><h4 id="æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="æ¶ˆæ¯ä¸­é—´ä»¶"></a>æ¶ˆæ¯ä¸­é—´ä»¶</h4><p>Celeryæœ¬èº«ä¸æä¾›æ¶ˆæ¯æœåŠ¡ï¼Œä½†æ˜¯å¯ä»¥æ–¹ä¾¿çš„å’Œç¬¬ä¸‰æ–¹æä¾›çš„æ¶ˆæ¯ä¸­é—´ä»¶é›†æˆã€‚åŒ…æ‹¬ï¼ŒRabbitMQ, Redisç­‰ç­‰</p><h4 id="ä»»åŠ¡æ‰§è¡Œå•å…ƒ"><a href="#ä»»åŠ¡æ‰§è¡Œå•å…ƒ" class="headerlink" title="ä»»åŠ¡æ‰§è¡Œå•å…ƒ"></a>ä»»åŠ¡æ‰§è¡Œå•å…ƒ</h4><p>Workeræ˜¯Celeryæä¾›çš„ä»»åŠ¡æ‰§è¡Œçš„å•å…ƒï¼Œworkerå¹¶å‘çš„è¿è¡Œåœ¨åˆ†å¸ƒå¼çš„ç³»ç»ŸèŠ‚ç‚¹ä¸­ã€‚</p><h4 id="ä»»åŠ¡ç»“æœå­˜å‚¨"><a href="#ä»»åŠ¡ç»“æœå­˜å‚¨" class="headerlink" title="ä»»åŠ¡ç»“æœå­˜å‚¨"></a>ä»»åŠ¡ç»“æœå­˜å‚¨</h4><p>Task result storeç”¨æ¥å­˜å‚¨Workeræ‰§è¡Œçš„ä»»åŠ¡çš„ç»“æœï¼ŒCeleryæ”¯æŒä»¥ä¸åŒæ–¹å¼å­˜å‚¨ä»»åŠ¡çš„ç»“æœï¼ŒåŒ…æ‹¬AMQP, redisç­‰</p><h4 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h4><p>å¼‚æ­¥æ‰§è¡Œï¼šè§£å†³è€—æ—¶ä»»åŠ¡,å°†è€—æ—¶æ“ä½œä»»åŠ¡æäº¤ç»™Celeryå»å¼‚æ­¥æ‰§è¡Œï¼Œæ¯”å¦‚å‘é€çŸ­ä¿¡/é‚®ä»¶ã€æ¶ˆæ¯æ¨é€ã€éŸ³è§†é¢‘å¤„ç†ç­‰ç­‰</p><p>å»¶è¿Ÿæ‰§è¡Œï¼šè§£å†³å»¶è¿Ÿä»»åŠ¡</p><p>å®šæ—¶æ‰§è¡Œï¼šè§£å†³å‘¨æœŸ(å‘¨æœŸ)ä»»åŠ¡,æ¯”å¦‚æ¯å¤©æ•°æ®ç»Ÿè®¡</p><h2 id="ä¸‰ã€celeryä½¿ç”¨"><a href="#ä¸‰ã€celeryä½¿ç”¨" class="headerlink" title="ä¸‰ã€celeryä½¿ç”¨"></a>ä¸‰ã€celeryä½¿ç”¨</h2><p>å®‰è£…ï¼š<code>pip install celery</code></p><p>æ ¹æ®celeryæ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œworkerå°±åƒæ˜¯ä¸€ä¸ªå·¥äººï¼Œä¸€ç›´åœ¨å·¥ä½œï¼Œå¦‚æœæœ‰å·¥ä½œçš„æ—¶å€™å°±ä¼šä»brokerï¼ˆRedistï¼‰é‡Œå»æ‹¿è¿‡æ¥æ‰§è¡Œï¼Œå¹¶æ”¾åˆ°pakendï¼ˆredistï¼‰ä¸­å­˜æ”¾ç»“æœ</p><h3 id="æ–¹å¼ä¸€ï¼šåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…çš„ä¸‰ä¸ªé¡µé¢"><a href="#æ–¹å¼ä¸€ï¼šåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…çš„ä¸‰ä¸ªé¡µé¢" class="headerlink" title="æ–¹å¼ä¸€ï¼šåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…çš„ä¸‰ä¸ªé¡µé¢"></a>æ–¹å¼ä¸€ï¼šåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…çš„ä¸‰ä¸ªé¡µé¢</h3><p><strong>workeræ‰§è¡Œé¡µé¢</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> celery<span class="token comment" spellcheck="true"># brokerå­˜å‚¨çš„ä½ç½®</span>broker <span class="token operator">=</span> <span class="token string">'redis://127.0.0.1:6379/1'</span><span class="token comment" spellcheck="true"># backendå­˜å‚¨çš„ä½ç½®</span>backend <span class="token operator">=</span><span class="token string">'redis://127.0.0.1:6379/2'</span><span class="token comment" spellcheck="true"># å®ä¾‹åŒ–çš„celeryå¯¹è±¡</span>app<span class="token operator">=</span>celery<span class="token punctuation">.</span>Celery<span class="token punctuation">(</span>__name__<span class="token punctuation">,</span>broker<span class="token operator">=</span>broker<span class="token punctuation">,</span>backend<span class="token operator">=</span>backend<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># éœ€è¦æ·»åŠ çš„ä»»åŠ¡</span>@app<span class="token punctuation">.</span>task<span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token operator">*</span>y<span class="token punctuation">)</span>    <span class="token keyword">return</span> x<span class="token operator">+</span>y</code></pre><p><strong>brokeræäº¤ä»»åŠ¡çš„é¡µé¢</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> celery_test <span class="token keyword">import</span> add<span class="token comment" spellcheck="true"># æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±æ˜¯æŠŠè¿™ä¸ªä»»åŠ¡æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼Œåªè¦workeråœ¨å·¥ä½œ</span><span class="token comment" spellcheck="true"># å°±ä¼šæŠŠè¿™ä¸ªä»»åŠ¡ä»æ•°æ®åº“1ä¸­æ‹¿å‡ºæ¥æ‰§è¡Œï¼Œå¹¶æŠŠç»“æœæ”¾åˆ°æ•°æ®åº“2ä¸­</span>ret <span class="token operator">=</span> add<span class="token punctuation">.</span>delay<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ret æ˜¯è¿™ä¸ªä»»åŠ¡çš„uuidï¼Œç”¨äºè·å–ä»»åŠ¡ç»“æœ</span></code></pre><p><strong>backendè·å–ä»»åŠ¡ç»“æœçš„é¡µé¢</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> celery_test <span class="token keyword">import</span> app<span class="token keyword">from</span> celery<span class="token punctuation">.</span>result <span class="token keyword">import</span> AsyncResult<span class="token comment" spellcheck="true"># ä»»åŠ¡å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ï¼šuuid</span>id <span class="token operator">=</span> <span class="token string">'19dc2faa-39f9-47b6-af77-e9d3a4d05d2e'</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    async1 <span class="token operator">=</span> AsyncResult<span class="token punctuation">(</span>id<span class="token operator">=</span>id<span class="token punctuation">,</span> app<span class="token operator">=</span>app<span class="token punctuation">)</span>    <span class="token keyword">if</span> async1<span class="token punctuation">.</span>successful<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> async1<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>    <span class="token keyword">elif</span> async1<span class="token punctuation">.</span>failed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ä»»åŠ¡å¤±è´¥'</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> async1<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'PENDING'</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ä»»åŠ¡ç­‰å¾…ä¸­è¢«æ‰§è¡Œ'</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> async1<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'RETRY'</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ä»»åŠ¡å¼‚å¸¸åæ­£åœ¨é‡è¯•'</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> async1<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'STARTED'</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ä»»åŠ¡å·²ç»å¼€å§‹è¢«æ‰§è¡Œ'</span><span class="token punctuation">)</span></code></pre><h3 id="æ–¹å¼äºŒï¼šworkerå•ç‹¬åšä¸€ä¸ªé¡¹ç›®æ–‡ä»¶ï¼Œæ·»åŠ ä»»åŠ¡å’Œè·å–ç»“æœåˆ†ç¦»å‡ºæ¥ï¼ˆæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼‰"><a href="#æ–¹å¼äºŒï¼šworkerå•ç‹¬åšä¸€ä¸ªé¡¹ç›®æ–‡ä»¶ï¼Œæ·»åŠ ä»»åŠ¡å’Œè·å–ç»“æœåˆ†ç¦»å‡ºæ¥ï¼ˆæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼‰" class="headerlink" title="æ–¹å¼äºŒï¼šworkerå•ç‹¬åšä¸€ä¸ªé¡¹ç›®æ–‡ä»¶ï¼Œæ·»åŠ ä»»åŠ¡å’Œè·å–ç»“æœåˆ†ç¦»å‡ºæ¥ï¼ˆæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼‰"></a>æ–¹å¼äºŒï¼šworkerå•ç‹¬åšä¸€ä¸ªé¡¹ç›®æ–‡ä»¶ï¼Œæ·»åŠ ä»»åŠ¡å’Œè·å–ç»“æœåˆ†ç¦»å‡ºæ¥ï¼ˆæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼‰</h3><p>åˆ›å»ºä¸€ä¸ªceleryé¡¹ç›®ï¼ˆåŒ…ï¼‰ï¼Œå†…éƒ¨å¿…é¡»å«æœ‰åå­—ä¸ºceleryçš„pyæ–‡ä»¶ï¼Œåœ¨å†…éƒ¨åˆ›å»ºceleryå¯¹è±¡</p><p><strong>celery.py</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> celerybroker <span class="token operator">=</span> <span class="token string">'redis://127.0.0.1:6379/1'</span>backend <span class="token operator">=</span><span class="token string">'redis://127.0.0.1:6379/2'</span>app<span class="token operator">=</span>celery<span class="token punctuation">.</span>Celery<span class="token punctuation">(</span>__name__<span class="token punctuation">,</span>broker<span class="token operator">=</span>broker<span class="token punctuation">,</span>backend<span class="token operator">=</span>backend<span class="token punctuation">,</span>include<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'celery_task.task1'</span><span class="token punctuation">,</span><span class="token string">'celery_task.task2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>ç¼–å†™éœ€è¦æ·»åŠ çš„ä»»åŠ¡ä¹Ÿåœ¨è¿™ä¸ªåŒ…å†…ï¼Œå¯åˆ›å»ºä¸åŒçš„ä»»åŠ¡æ–‡ä»¶ï¼Œå¯æ·»åŠ å¤šä¸ª</p><p><strong>task1.py</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> <span class="token punctuation">.</span>celery <span class="token keyword">import</span> app@app<span class="token punctuation">.</span>task<span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>    <span class="token keyword">return</span> x<span class="token operator">+</span>y</code></pre><h3 id="æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡"><a href="#æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡" class="headerlink" title="æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡"></a>æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡</h3><p>æ·»åŠ ä»»åŠ¡é¡µé¢</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡å°±æ˜¯å¤šä¸ªä¸€ä¸ªæ—¶é—´å‚æ•°</span><span class="token comment" spellcheck="true"># è¿™é‡Œæ³¨æ„ï¼Œæ—¶é—´å‚æ•°æ˜¯æ ¹æ®utcæ—¶é—´ï¼Œå¹¶ä¸æ˜¯ä¸­å›½æ—¶é—´</span><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token punctuation">,</span> timedelta<span class="token comment" spellcheck="true"># æ—¶é—´å¯¹è±¡å¿…é¡»å’Œæ—¶é—´å¯¹è±¡ç›¸åŠ </span>eta<span class="token operator">=</span>datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>add<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> eta<span class="token operator">=</span>eta<span class="token punctuation">)</span></code></pre><h3 id="æ·»åŠ å®šæ—¶ä»»åŠ¡"><a href="#æ·»åŠ å®šæ—¶ä»»åŠ¡" class="headerlink" title="æ·»åŠ å®šæ—¶ä»»åŠ¡"></a>æ·»åŠ å®šæ—¶ä»»åŠ¡</h3><p>celeryé¡µé¢</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># æ—¶åŒº</span>app<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>timezone <span class="token operator">=</span> <span class="token string">'Asia/Shanghai'</span><span class="token comment" spellcheck="true"># æ˜¯å¦ä½¿ç”¨UTC</span>app<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>enable_utc <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment" spellcheck="true"># ä»»åŠ¡çš„å®šæ—¶é…ç½®</span><span class="token keyword">from</span> datetime <span class="token keyword">import</span> timedelta<span class="token keyword">from</span> celery<span class="token punctuation">.</span>schedules <span class="token keyword">import</span> crontabapp<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>beat_schedule <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>    <span class="token string">'low-task'</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>        <span class="token string">'task'</span><span class="token punctuation">:</span> <span class="token string">'celery_task.tasks.low'</span><span class="token punctuation">,</span>        <span class="token string">'schedule'</span><span class="token punctuation">:</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true"># 'schedule': crontab(hour=8, day_of_week=1),  # æ¯å‘¨ä¸€æ—©å…«ç‚¹</span>        <span class="token string">'args'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span><span class="token comment" spellcheck="true"># å®šæ—¶ä»»åŠ¡çš„æ·»åŠ å¿…é¡»è¦æ–°å¯åŠ¨ä¸€ä¸ªbeatå‘½ä»¤å»å·¥ä½œ</span><span class="token comment" spellcheck="true"># celery beat -A pc_celery -l info</span><span class="token comment" spellcheck="true"># celery -A pc_celery worker -l info -P eventlet</span></code></pre><h2 id="å››ã€djangoä¸­é…ç½®celery"><a href="#å››ã€djangoä¸­é…ç½®celery" class="headerlink" title="å››ã€djangoä¸­é…ç½®celery"></a>å››ã€djangoä¸­é…ç½®celery</h2><p>celeryåŒ…æœ€å¥½æ”¾åœ¨æ ¹è·¯å¾„ä¸‹</p><p><strong>æ·»åŠ å®šæ—¶ä»»åŠ¡</strong></p><p>celery.py</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token comment" spellcheck="true"># é…ç½®djangoé…ç½®</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">'DJANGO_SETTINGS_MODULE'</span><span class="token punctuation">,</span> <span class="token string">'luffyapi.settings.dev'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># é…ç½®celeryçš„workerç¯å¢ƒ</span><span class="token keyword">from</span> celery <span class="token keyword">import</span> Celerybroker <span class="token operator">=</span> <span class="token string">'redis://127.0.0.1:6379/1'</span>backend <span class="token operator">=</span> <span class="token string">'redis://127.0.0.1:6379/2'</span><span class="token comment" spellcheck="true"># å®ä¾‹åŒ–workerå¯¹è±¡appï¼Œç”¨includeæ·»åŠ å®šæ—¶ä»»åŠ¡</span>app<span class="token operator">=</span>Celery<span class="token punctuation">(</span>__name__<span class="token punctuation">,</span>broker<span class="token operator">=</span>broker<span class="token punctuation">,</span>backend<span class="token operator">=</span>backend<span class="token punctuation">,</span>include<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'celery_task.task2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ—¶åŒº</span>app<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>timezone <span class="token operator">=</span> <span class="token string">'Asia/Shanghai'</span><span class="token comment" spellcheck="true"># æ˜¯å¦ä½¿ç”¨UTC</span>app<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>enable_utc <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment" spellcheck="true"># ä»»åŠ¡çš„å®šæ—¶é…ç½®</span><span class="token keyword">from</span> datetime <span class="token keyword">import</span> timedelta<span class="token keyword">from</span> celery<span class="token punctuation">.</span>schedules <span class="token keyword">import</span> crontabapp<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>beat_schedule <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>    <span class="token string">'low-task'</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>        <span class="token string">'task'</span><span class="token punctuation">:</span> <span class="token string">'celery_task.task2.update_banner'</span><span class="token punctuation">,</span>        <span class="token string">'schedule'</span><span class="token punctuation">:</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true"># 'schedule': crontab(hour=8, day_of_week=1),  # æ¯å‘¨ä¸€æ—©å…«ç‚¹</span>        <span class="token comment" spellcheck="true"># 'args': (),</span>    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span><span class="token comment" spellcheck="true"># å®šæ—¶ä»»åŠ¡çš„æ·»åŠ å¿…é¡»è¦æ–°å¯åŠ¨ä¸€ä¸ªbeatå‘½ä»¤å»å·¥ä½œ</span><span class="token comment" spellcheck="true"># celery beat -A celery_task -l info</span></code></pre><p><strong>taskå®šæ—¶ä»»åŠ¡</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> <span class="token punctuation">.</span>celery <span class="token keyword">import</span> app<span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>cache <span class="token keyword">import</span> cache<span class="token comment" spellcheck="true"># æ¯ä¸‰ç§’è·Ÿæ–°ä¸€æ¬¡ç¼“å­˜</span><span class="token comment" spellcheck="true"># æ·»åŠ ä¸€ä¸ªä»»åŠ¡ï¼Œceleryå†…è®¾å®šé—´éš”æ—¶é—´3ç§’</span><span class="token comment" spellcheck="true"># ä»»åŠ¡å†…å»cacheè·Ÿæ–°banner_listï¼Œä»æ•°æ®åº“ä¸­æ‹¿åˆ°banneræ”¾åˆ°cacheä¸­çš„banner_listä¸­</span><span class="token keyword">from</span> home<span class="token punctuation">.</span>models <span class="token keyword">import</span> Banner<span class="token comment" spellcheck="true"># from luffyapi.settings import const</span><span class="token comment" spellcheck="true"># [OrderedDict(</span><span class="token comment" spellcheck="true">#     [('image', 'http://127.0.0.1:8000/media/banner/banner1.png'), ('link', '/free-courses'), ('name', 'banner1')]),</span><span class="token comment" spellcheck="true">#  OrderedDict(</span><span class="token comment" spellcheck="true">#      [('image', 'http://127.0.0.1:8000/media/banner/banner2.png'), ('link', '/light-courses'), ('name', 'banner2')]),</span><span class="token comment" spellcheck="true">#  OrderedDict(</span><span class="token comment" spellcheck="true">#      [('image', 'http://127.0.0.1:8000/media/banner/banner3.png'), ('link', '/actual-courses'), ('name', 'banner3')])]</span><span class="token keyword">from</span> home<span class="token punctuation">.</span>sers <span class="token keyword">import</span> BannerSer@app<span class="token punctuation">.</span>task<span class="token keyword">def</span> <span class="token function">update_banner</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    queryset <span class="token operator">=</span> Banner<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>is_delete<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    banner_ser <span class="token operator">=</span> BannerSer<span class="token punctuation">(</span>queryset<span class="token punctuation">,</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> banner <span class="token keyword">in</span> banner_ser<span class="token punctuation">.</span>data<span class="token punctuation">:</span>        banner<span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'http://127.0.0.1:8000'</span> <span class="token operator">+</span> banner<span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span>    cache<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token string">'banner_list'</span><span class="token punctuation">,</span> banner_ser<span class="token punctuation">.</span>data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>banner_ser<span class="token punctuation">.</span>data<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token string">'æ›´æ–°banneræˆåŠŸ'</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€celeryä»‹ç»&quot;&gt;&lt;a href=&quot;#ä¸€ã€celeryä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€celeryä»‹ç»&quot;&gt;&lt;/a&gt;ä¸€ã€celeryä»‹ç»&lt;/h2&gt;&lt;p&gt;Celery å®˜ç½‘ï¼š&lt;a href=&quot;http://www.celerypr</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="å¼‚æ­¥ä»»åŠ¡æ¡†æ¶" scheme="http://huang_zhao.gitee.io/task/tags/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E6%A1%86%E6%9E%B6/"/>
    
    <category term="django" scheme="http://huang_zhao.gitee.io/task/tags/django/"/>
    
    <category term="python" scheme="http://huang_zhao.gitee.io/task/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Redisç®¡é“ï¼Œä½å›¾ï¼Œgeoï¼ŒHyperLogLogï¼Œå‘å¸ƒè®¢é˜…</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/23/Redis%E7%AE%A1%E9%81%93%EF%BC%8C%E4%BD%8D%E5%9B%BE%EF%BC%8Cgeo%EF%BC%8CHyperLogLog%EF%BC%8C%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/23/Redis%E7%AE%A1%E9%81%93%EF%BC%8C%E4%BD%8D%E5%9B%BE%EF%BC%8Cgeo%EF%BC%8CHyperLogLog%EF%BC%8C%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/</id>
    <published>2020-04-23T12:13:11.000Z</published>
    <updated>2020-09-13T14:51:52.165Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€æ…¢æŸ¥è¯¢"><a href="#ä¸€ã€æ…¢æŸ¥è¯¢" class="headerlink" title="ä¸€ã€æ…¢æŸ¥è¯¢"></a>ä¸€ã€æ…¢æŸ¥è¯¢</h2><p>å› ä¸ºredisæ˜¯ä¸ªå•çº¿ç¨‹æ¶æ„ï¼Œæ‰€ä»¥åªè¦æœ‰æ…¢æŸ¥è¯¢å¤¯ä½ä¼šéå¸¸å½±å“æ€§èƒ½ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥é¿å…å‡ºç°æ…¢æŸ¥è¯¢æˆ–è€…é™åˆ¶æ…¢æŸ¥è¯¢</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># redis.conf</span>slowlog<span class="token operator">-</span>log<span class="token operator">-</span>slower<span class="token operator">-</span>than<span class="token operator">=</span><span class="token number">0</span>ï¼Œè®°å½•æ‰€æœ‰å‘½ä»¤slowlog<span class="token operator">-</span>log<span class="token operator">-</span>slower<span class="token operator">-</span>than <span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span>ä¸è®°å½•ä»»ä½•å‘½ä»¤<span class="token comment" spellcheck="true"># ä¹Ÿå¯ä»¥ç›´æ¥åœ¨é“¾æ¥è¿‡ç¨‹ä¸­ä¿®æ”¹é…ç½®</span>config get slowlog<span class="token operator">-</span>max<span class="token operator">-</span>len<span class="token operator">=</span><span class="token number">128</span> <span class="token comment" spellcheck="true"># æ…¢æŸ¥è¯¢æœ€å¤§æ¥æ”¶æ•°</span>Config get slowly<span class="token operator">-</span>log<span class="token operator">-</span>slower<span class="token operator">-</span>than<span class="token operator">=</span><span class="token number">10000</span> <span class="token comment" spellcheck="true"># æ¥å—å°äº1æ¯«ç§’çš„å‘½ä»¤</span></code></pre><p>æ€»ç»“ï¼š</p><ol><li>slowlog-max-len ä¸è¦è®¾ç½®è¿‡å¤§ï¼Œé»˜è®¤10msï¼Œé€šå¸¸è®¾ç½®1ms</li><li>slowlog-log-slower-thanä¸è¦è®¾ç½®è¿‡å°ï¼Œé€šå¸¸è®¾ç½®1000å·¦å³</li><li>ç†è§£å‘½ä»¤ç”Ÿå‘½å‘¨æœŸ</li><li>å®šæœŸæŒä¹…åŒ–æ…¢æŸ¥è¯¢</li></ol><h2 id="äºŒã€piplineå’Œwatch"><a href="#äºŒã€piplineå’Œwatch" class="headerlink" title="äºŒã€piplineå’Œwatch"></a>äºŒã€piplineå’Œwatch</h2><h3 id="1-pipline"><a href="#1-pipline" class="headerlink" title="1 pipline"></a>1 pipline</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># piplineåœ¨rediså‘½ä»¤ä¸­ä¸æ”¯æŒï¼Œä½†æ˜¯åœ¨ç¼–ç¨‹è¯­è¨€ä¸­æ”¯æŒ</span><span class="token comment" spellcheck="true"># å…¶å®å°±æ˜¯æ‰¹é‡æ‰§è¡Œå‘½ä»¤çš„ä¸€ç§æ–¹å¼ï¼Œrediså‘½ä»¤å¯ä»¥ç”¨äº‹åŠ¡æ¥å®ç°è¿™ç§åŠŸèƒ½</span><span class="token comment" spellcheck="true"># å®¢æˆ·ç«¯å®ç°</span><span class="token keyword">import</span> redispool <span class="token operator">=</span> redis<span class="token punctuation">.</span>ConnectionPool<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'10.211.55.4'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>r <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>connection_pool<span class="token operator">=</span>pool<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># pipe = r.pipeline(transaction=False)</span><span class="token comment" spellcheck="true">#åˆ›å»ºpipeline</span>pipe <span class="token operator">=</span> r<span class="token punctuation">.</span>pipeline<span class="token punctuation">(</span>transaction<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#å¼€å¯äº‹åŠ¡</span>pipe<span class="token punctuation">.</span>multi<span class="token punctuation">(</span><span class="token punctuation">)</span>pipe<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'lqz'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#å…¶ä»–ä»£ç ï¼Œå¯èƒ½å‡ºå¼‚å¸¸</span>pipe<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'nb'</span><span class="token punctuation">)</span>pipe<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="2-åŸç”Ÿäº‹åŠ¡"><a href="#2-åŸç”Ÿäº‹åŠ¡" class="headerlink" title="2 åŸç”Ÿäº‹åŠ¡"></a>2 åŸç”Ÿäº‹åŠ¡</h3><pre class=" language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> multi <span class="token comment" spellcheck="true"># å¼€å¯äº‹åŠ¡åæ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šæ”¾åˆ°Queeä¸­ï¼Œç›´åˆ°æ‰§è¡Œexecç»“æŸäº‹åŠ¡æ‰ä¼šæ‰§è¡Œ</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">exec</span> </code></pre><h3 id="3-watch"><a href="#3-watch" class="headerlink" title="3 watch"></a>3 watch</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># redisä¸­å¯ä»¥é€šè¿‡watchå®ç°ä¹è§‚é”</span><span class="token comment" spellcheck="true"># æ¼”ç¤ºï¼šwatchä¸€ä¸ªkeyï¼Œåœ¨å¼€å¯äº‹åŠ¡åå¯ä»¥ä¿®æ”¹è¿™ä¸ªkeyï¼Œä½†æ˜¯å¦‚æœåœ¨äº‹åŠ¡å¤–åŒæ—¶æœ‰ä¿®æ”¹è¿™ä¸ªkeyçš„è¯·æ±‚ï¼Œå†ä¿®æ”¹äº‹åŠ¡ä¸­çš„keyå°±ä¼šå¤±è´¥</span></code></pre><h2 id="ä¸‰ã€ä½å›¾"><a href="#ä¸‰ã€ä½å›¾" class="headerlink" title="ä¸‰ã€ä½å›¾"></a>ä¸‰ã€ä½å›¾</h2><p>å› ä¸ºrediså¯ä»¥é€šè¿‡byteè¿›è¡Œå­˜å‚¨ï¼Œå½’å±å­—ç¬¦ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡bitmapåšä¸€äº›æ“ä½œï¼šç‹¬ç«‹ç”¨æˆ·ç»Ÿè®¡</p><p>éœ€è¦ç”¨æˆ·é‡éå¸¸å¤§å¤§æ¦‚ä¸€äº¿å·¦å³çš„ç”¨æˆ·é‡æ‰ä¼šå’Œç”¨é›†åˆå­˜å‚¨æœ‰å·®åˆ«</p><pre class=" language-python"><code class="language-python">set hello big <span class="token comment" spellcheck="true">#æ”¾å…¥keyä½hello å€¼ä¸ºbigçš„å­—ç¬¦ä¸²</span>getbit hello <span class="token number">0</span> <span class="token comment" spellcheck="true">#å–ä½å›¾çš„ç¬¬0ä¸ªä½ç½®ï¼Œè¿”å›0</span>getbit hello <span class="token number">1</span> <span class="token comment" spellcheck="true">#å–ä½å›¾çš„ç¬¬1ä¸ªä½ç½®ï¼Œè¿”å›1 å¦‚ä¸Šå›¾</span><span class="token comment" spellcheck="true">##æˆ‘ä»¬å¯ä»¥ç›´æ¥æ“çºµä½</span>setbit key offset value <span class="token comment" spellcheck="true">#ç»™ä½å›¾æŒ‡å®šç´¢å¼•è®¾ç½®å€¼</span>setbit hello <span class="token number">7</span> <span class="token number">1</span> <span class="token comment" spellcheck="true">#æŠŠhelloçš„ç¬¬7ä¸ªä½ç½®è®¾ä¸º1 è¿™æ ·ï¼Œbigå°±å˜æˆäº†cig</span>setbit test <span class="token number">50</span> <span class="token number">1</span> <span class="token comment" spellcheck="true">#testä¸å­˜åœ¨ï¼Œåœ¨keyä¸ºtestçš„valueçš„ç¬¬50ä½è®¾ä¸º1ï¼Œé‚£å…¶ä»–ä½éƒ½ä»¥0è¡¥</span>bitcount key <span class="token punctuation">[</span>start end<span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#è·å–ä½å›¾æŒ‡å®šèŒƒå›´(startåˆ°end,å•ä½ä¸ºå­—èŠ‚,æ³¨æ„æŒ‰å­—èŠ‚ä¸€ä¸ªå­—èŠ‚8ä¸ªbitä¸ºï¼Œå¦‚æœä¸æŒ‡å®šå°±æ˜¯è·å–å…¨éƒ¨)ä½å€¼ä¸º1çš„ä¸ªæ•°</span>bitop op destkey key <span class="token punctuation">[</span>key<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#åšå¤šä¸ªBitmapçš„and(äº¤é›†)/or(å¹¶é›†)/not(é)/xor(å¼‚æˆ–)ï¼Œæ“ä½œå¹¶å°†ç»“æœä¿å­˜åœ¨destkeyä¸­ </span>bitop <span class="token operator">and</span> after_lqz lqz lqz2 <span class="token comment" spellcheck="true">#æŠŠlqzå’Œlqz2æŒ‰ä½ä¸æ“ä½œï¼Œæ”¾åˆ°after_lqzä¸­</span>bitpos key targetBit start end <span class="token comment" spellcheck="true">#è®¡ç®—ä½å›¾æŒ‡å®šèŒƒå›´(startåˆ°endï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œå¦‚æœä¸æŒ‡å®šæ˜¯è·å–å…¨éƒ¨)ç¬¬ä¸€ä¸ªåç§»é‡å¯¹åº”çš„å€¼ç­‰äºtargetBitçš„ä½ç½®</span>bitpos lqz <span class="token number">1</span> <span class="token comment" spellcheck="true">#big å¯¹åº”ä½å›¾ä¸­ç¬¬ä¸€ä¸ª1çš„ä½ç½®ï¼Œåœ¨ç¬¬äºŒä¸ªä½ç½®ä¸Šï¼Œç”±äºä»0å¼€å§‹è¿”å›1</span>bitpos lqz <span class="token number">0</span> <span class="token comment" spellcheck="true">#big å¯¹åº”ä½å›¾ä¸­ç¬¬ä¸€ä¸ª0çš„ä½ç½®ï¼Œåœ¨ç¬¬ä¸€ä¸ªä½ç½®ä¸Šï¼Œç”±äºä»0å¼€å§‹è¿”å›0</span>bitpos lqz <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token comment" spellcheck="true">#è¿”å›9ï¼šè¿”å›ä»ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°ç¬¬äºŒä¸ªå­—èŠ‚ä¹‹é—´ ç¬¬ä¸€ä¸ª1çš„ä½ç½®ï¼Œçœ‹ä¸Šå›¾ï¼Œä¸º9</span></code></pre><h2 id="å››ã€HyperLogLog"><a href="#å››ã€HyperLogLog" class="headerlink" title="å››ã€HyperLogLog"></a>å››ã€HyperLogLog</h2><p>æœ¬è´¨ï¼šå¸ƒéš†è¿‡æ»¤å™¨</p><p>å­˜å‚¨æ•°æ®é‡æå°ï¼Œåªæœ‰å­˜åœ¨å’Œä¸å­˜åœ¨çš„çŠ¶æ€ï¼Œæœ¬èº«å†…å®¹æ— æ³•è¯»å–</p><p>ç™¾ä¸‡çº§ç‹¬ç«‹ç”¨æˆ·ç»Ÿè®¡ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºé”™ï¼Œå¯ä»¥åšæ—¥æ´»ç”¨æˆ·ç»Ÿè®¡</p><p>å®é™…ä¸Šå°±ä¸‰ä¸ªæ“ä½œï¼šæ·»åŠ ï¼Œåˆå¹¶ï¼Œç»Ÿè®¡</p><pre class=" language-python"><code class="language-python">pfadd key element <span class="token comment" spellcheck="true">#å‘hyperloglogæ·»åŠ å…ƒç´ ,å¯ä»¥åŒæ—¶æ·»åŠ å¤šä¸ª</span>pfcount key <span class="token comment" spellcheck="true">#è®¡ç®—hyperloglogçš„ç‹¬ç«‹æ€»æ•°</span>pfmerge destroy sourcekey1 sourcekey2<span class="token comment" spellcheck="true">#åˆå¹¶å¤šä¸ªhyperloglogï¼ŒæŠŠsourcekey1å’Œsourcekey2åˆå¹¶ä¸ºdestroy</span>pfadd uuids <span class="token string">"uuid1"</span> <span class="token string">"uuid2"</span> <span class="token string">"uuid3"</span> <span class="token string">"uuid4"</span> <span class="token comment" spellcheck="true">#å‘uuidsä¸­æ·»åŠ 4ä¸ªuuid</span>pfcount uuids <span class="token comment" spellcheck="true">#è¿”å›4</span>pfadd uuids <span class="token string">"uuid1"</span> <span class="token string">"uuid5"</span><span class="token comment" spellcheck="true">#æœ‰ä¸€ä¸ªä¹‹å‰å­˜åœ¨äº†ï¼Œå…¶å®åªæŠŠuuid5æ·»åŠ äº†</span>pfcount uuids <span class="token comment" spellcheck="true">#è¿”å›5</span>pfadd uuids1 <span class="token string">"uuid1"</span> <span class="token string">"uuid2"</span> <span class="token string">"uuid3"</span> <span class="token string">"uuid4"</span>pfadd uuids2 <span class="token string">"uuid3"</span> <span class="token string">"uuid4"</span> <span class="token string">"uuid5"</span> <span class="token string">"uuid6"</span>pfmerge uuidsall uuids1 uuids2 <span class="token comment" spellcheck="true">#åˆå¹¶</span>pfcount uuidsall <span class="token comment" spellcheck="true">#ç»Ÿè®¡ä¸ªæ•° è¿”å›6</span></code></pre><h2 id="äº”ã€geo"><a href="#äº”ã€geo" class="headerlink" title="äº”ã€geo"></a>äº”ã€geo</h2><p>æ ¹æ®ç»çº¬åº¦è®¡ç®—è·ç¦»ï¼Œç»Ÿè®¡èŒƒå›´å†…çš„äºº</p><p>æ“ä½œï¼šæ·»åŠ ï¼Œè·å–ï¼ˆåœ°ç†ä½ç½®ï¼Œä¸¤åœ°è·ç¦»ï¼‰ï¼ŒæŸ¥çœ‹èŒƒå›´å†…çš„äºº</p><pre class=" language-python"><code class="language-python">geoadd key longitude latitude member <span class="token comment" spellcheck="true">#å¢åŠ åœ°ç†ä½ç½®ä¿¡æ¯</span>geoadd cities<span class="token punctuation">:</span>locations <span class="token number">116.28</span> <span class="token number">39.55</span> beijing <span class="token comment" spellcheck="true">#æŠŠåŒ—äº¬åœ°ç†ä¿¡æ¯å¤©æ´¥åˆ°cities:locationsä¸­</span>geoadd cities<span class="token punctuation">:</span>locations <span class="token number">117.12</span> <span class="token number">39.08</span> tianjingeoadd cities<span class="token punctuation">:</span>locations <span class="token number">114.29</span> <span class="token number">38.02</span> shijiazhuanggeoadd cities<span class="token punctuation">:</span>locations <span class="token number">118.01</span> <span class="token number">39.38</span> tangshangeoadd cities<span class="token punctuation">:</span>locations <span class="token number">115.29</span> <span class="token number">38.51</span> baodinggeopos key member <span class="token comment" spellcheck="true">#è·å–åœ°ç†ä½ç½®ä¿¡æ¯</span>geopos cities<span class="token punctuation">:</span>locations beijing <span class="token comment" spellcheck="true">#è·å–åŒ—äº¬åœ°ç†ä¿¡æ¯</span>geodist key member1 member2 <span class="token punctuation">[</span>unit<span class="token punctuation">]</span><span class="token comment" spellcheck="true">#è·å–ä¸¤ä¸ªåœ°ç†ä½ç½®çš„è·ç¦» unit:m(ç±³) km(åƒç±³) mi(è‹±é‡Œ) ft(å°º)</span>geodist cities<span class="token punctuation">:</span>locations beijing tianjin km <span class="token comment" spellcheck="true">#åŒ—äº¬åˆ°å¤©æ´¥çš„è·ç¦»ï¼Œ89å…¬é‡Œ</span>georadius key logitude latitude radiusm<span class="token operator">|</span>km<span class="token operator">|</span>ft<span class="token operator">|</span>mi <span class="token punctuation">[</span>withcoord<span class="token punctuation">]</span> <span class="token punctuation">[</span>withdist<span class="token punctuation">]</span> <span class="token punctuation">[</span>withhash<span class="token punctuation">]</span> <span class="token punctuation">[</span>COUNT count<span class="token punctuation">]</span> <span class="token punctuation">[</span>asc<span class="token operator">|</span>desc<span class="token punctuation">]</span> <span class="token punctuation">[</span>store key<span class="token punctuation">]</span><span class="token punctuation">[</span>storedist key<span class="token punctuation">]</span>georadiusbymember key member radiusm<span class="token operator">|</span>km<span class="token operator">|</span>ft<span class="token operator">|</span>mi <span class="token punctuation">[</span>withcoord<span class="token punctuation">]</span> <span class="token punctuation">[</span>withdist<span class="token punctuation">]</span> <span class="token punctuation">[</span>withhash<span class="token punctuation">]</span> <span class="token punctuation">[</span>COUNT count<span class="token punctuation">]</span> <span class="token punctuation">[</span>asc<span class="token operator">|</span>desc<span class="token punctuation">]</span> <span class="token punctuation">[</span>store key<span class="token punctuation">]</span><span class="token punctuation">[</span>storedist key<span class="token punctuation">]</span><span class="token comment" spellcheck="true">#è·å–æŒ‡å®šä½ç½®èŒƒå›´å†…çš„åœ°ç†ä½ç½®ä¿¡æ¯é›†åˆ</span><span class="token triple-quoted-string string">'''withcoord:è¿”å›ç»“æœä¸­åŒ…å«ç»çº¬åº¦withdistï¼šè¿”å›ç»“æœä¸­åŒ…å«è·ç¦»ä¸­å¿ƒèŠ‚ç‚¹ä½ç½®withhashï¼šè¿”å›è§£é›‡ä¸­åŒ…å«geohashCOUNT countï¼šæŒ‡å®šè¿”å›ç»“æœçš„æ•°é‡asc|descï¼šè¿”å›ç»“æœæŒ‰ç…§è·ç¦»ä¸­å¿ƒåº—çš„è·ç¦»åšå‡åº/é™åºæ’åˆ—store keyï¼šå°†è¿”å›ç»“æœçš„åœ°ç†ä½ç½®ä¿¡æ¯ä¿å­˜åˆ°æŒ‡å®šé”®storedist keyï¼šå°†è¿”å›ç»“æœè·ç¦»ä¸­å¿ƒç‚¹çš„è·ç¦»ä¿å­˜åˆ°æŒ‡å®šé”®'''</span>georadiusbymember cities<span class="token punctuation">:</span>locations beijing <span class="token number">150</span> km<span class="token triple-quoted-string string">'''1) "beijing"2) "tianjin"3) "tangshan"4) "baoding"'''</span></code></pre><h2 id="å…­ã€å‘å¸ƒè®¢é˜…ï¼ˆåŸºæœ¬ä¸ç”¨ï¼‰"><a href="#å…­ã€å‘å¸ƒè®¢é˜…ï¼ˆåŸºæœ¬ä¸ç”¨ï¼‰" class="headerlink" title="å…­ã€å‘å¸ƒè®¢é˜…ï¼ˆåŸºæœ¬ä¸ç”¨ï¼‰"></a>å…­ã€å‘å¸ƒè®¢é˜…ï¼ˆåŸºæœ¬ä¸ç”¨ï¼‰</h2><p>å‘å¸ƒè€…å‘å¸ƒäº†æ¶ˆæ¯ï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ¥å—åˆ°ï¼Œæœ¬è´¨æ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</p><pre class=" language-python"><code class="language-python">publish channel message <span class="token comment" spellcheck="true">#å‘å¸ƒå‘½ä»¤</span>publish souhu<span class="token punctuation">:</span>tv <span class="token string">"hello world"</span> <span class="token comment" spellcheck="true">#åœ¨souhu:tvé¢‘é“å‘å¸ƒä¸€æ¡hello world  è¿”å›è®¢é˜…è€…ä¸ªæ•°</span>subscribe <span class="token punctuation">[</span>channel<span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#è®¢é˜…å‘½ä»¤ï¼Œå¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ª</span>subscribe souhu<span class="token punctuation">:</span>tv  <span class="token comment" spellcheck="true">#è®¢é˜…sohu:tvé¢‘é“</span>unsubscribe <span class="token punctuation">[</span>channel<span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#å–æ¶ˆè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“</span>unsubscribe sohu<span class="token punctuation">:</span>tv  <span class="token comment" spellcheck="true">#å–æ¶ˆè®¢é˜…sohu:tvé¢‘é“</span>psubscribe <span class="token punctuation">[</span>pattern<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#è®¢é˜…æ¨¡å¼åŒ¹é…</span>psubscribe c<span class="token operator">*</span>  <span class="token comment" spellcheck="true">#è®¢é˜…ä»¥cå¼€å¤´çš„é¢‘é“</span>unpsubscribe <span class="token punctuation">[</span>pattern<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#æŒ‰æ¨¡å¼é€€è®¢æŒ‡å®šé¢‘é“</span>pubsub channels <span class="token comment" spellcheck="true">#åˆ—å‡ºè‡³å°‘æœ‰ä¸€ä¸ªè®¢é˜…è€…çš„é¢‘é“,åˆ—å‡ºæ´»è·ƒçš„é¢‘é“</span>pubsub numsub <span class="token punctuation">[</span>channel<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#åˆ—å‡ºç»™å®šé¢‘é“çš„è®¢é˜…è€…æ•°é‡</span>pubsub numpat <span class="token comment" spellcheck="true">#åˆ—å‡ºè¢«è®¢é˜…æ¨¡å¼çš„æ•°é‡</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€æ…¢æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#ä¸€ã€æ…¢æŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€æ…¢æŸ¥è¯¢&quot;&gt;&lt;/a&gt;ä¸€ã€æ…¢æŸ¥è¯¢&lt;/h2&gt;&lt;p&gt;å› ä¸ºredisæ˜¯ä¸ªå•çº¿ç¨‹æ¶æ„ï¼Œæ‰€ä»¥åªè¦æœ‰æ…¢æŸ¥è¯¢å¤¯ä½ä¼šéå¸¸å½±å“æ€§èƒ½ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥é¿å…å‡ºç°æ…¢æŸ¥è¯¢æˆ–è€…é™åˆ¶æ…¢æŸ¥è¯¢&lt;/p</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="æ•°æ®åº“" scheme="http://huang_zhao.gitee.io/task/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="Redisé«˜çº§" scheme="http://huang_zhao.gitee.io/task/tags/Redis%E9%AB%98%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>Scrapyæ¡†æ¶</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/22/scrapy%E7%88%AC%E8%99%AB%E6%A1%86%E6%9E%B6/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/22/scrapy%E7%88%AC%E8%99%AB%E6%A1%86%E6%9E%B6/</id>
    <published>2020-04-22T04:30:31.000Z</published>
    <updated>2020-09-04T11:23:22.586Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å®‰è£…"><a href="#ä¸€ã€å®‰è£…" class="headerlink" title="ä¸€ã€å®‰è£…"></a>ä¸€ã€å®‰è£…</h2><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#1 pip3 install scrapyï¼ˆmacï¼Œlinuxï¼‰</span><span class="token comment" spellcheck="true">#2 windowsä¸Šï¼ˆ80%èƒ½æˆåŠŸï¼Œå°‘éƒ¨åˆ†äººæˆåŠŸä¸äº†ï¼‰</span>    <span class="token number">1</span>ã€pip3 install wheel <span class="token comment" spellcheck="true">#å®‰è£…åï¼Œä¾¿æ”¯æŒé€šè¿‡wheelæ–‡ä»¶å®‰è£…è½¯ä»¶ï¼Œwheelæ–‡ä»¶å®˜ç½‘ï¼šhttps://www.lfd.uci.edu/~gohlke/pythonlibs</span>    <span class="token number">3</span>ã€pip3 install lxml    <span class="token number">4</span>ã€pip3 install pyopenssl    <span class="token number">5</span>ã€ä¸‹è½½å¹¶å®‰è£…pywin32ï¼šhttps<span class="token punctuation">:</span><span class="token operator">//</span>sourceforge<span class="token punctuation">.</span>net<span class="token operator">/</span>projects<span class="token operator">/</span>pywin32<span class="token operator">/</span>files<span class="token operator">/</span>pywin32<span class="token operator">/</span>    <span class="token number">6</span>ã€ä¸‹è½½twistedçš„wheelæ–‡ä»¶ï¼šhttp<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>lfd<span class="token punctuation">.</span>uci<span class="token punctuation">.</span>edu<span class="token operator">/</span><span class="token operator">~</span>gohlke<span class="token operator">/</span>pythonlibs<span class="token operator">/</span><span class="token comment" spellcheck="true">#twisted</span>    <span class="token number">7</span>ã€æ‰§è¡Œpip3 install ä¸‹è½½ç›®å½•\Twisted<span class="token number">-17.9</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span>cp36<span class="token operator">-</span>cp36m<span class="token operator">-</span>win_amd64<span class="token punctuation">.</span>whl    <span class="token number">8</span>ã€pip3 install scrapy<span class="token comment" spellcheck="true"># 3 å°±æœ‰scrapyå‘½ä»¤</span>    <span class="token operator">-</span>D<span class="token punctuation">:</span>\Python36\Scripts\scrapy<span class="token punctuation">.</span>exe  ç”¨äºåˆ›å»ºé¡¹ç›®</code></pre><h2 id="äºŒã€æ¡†æ¶ç®€ä»‹"><a href="#äºŒã€æ¡†æ¶ç®€ä»‹" class="headerlink" title="äºŒã€æ¡†æ¶ç®€ä»‹"></a>äºŒã€æ¡†æ¶ç®€ä»‹</h2><p><strong>æ‰§è¡Œæµç¨‹å›¾</strong></p><p><img src="https://gitee.com/huang_zhao/hz/raw/master/hz/1036857-20171109221422778-1731419400.png" alt="1036857-20171109221422778-1731419400" loading="lazy"></p><ol><li><p>å¼•æ“(EGINE)</p><p>å¼•æ“è´Ÿè´£æ§åˆ¶ç³»ç»Ÿæ‰€æœ‰ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµï¼Œå¹¶åœ¨æŸäº›åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘äº‹ä»¶ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ä¸Šé¢çš„æ•°æ®æµéƒ¨åˆ†ã€‚</p><p>ï¼ˆscrapyçš„æ ¸å¿ƒï¼Œç”¨äºè½¬å‘æ•°æ®æˆ–è¯·æ±‚ï¼Œå¦‚æœæ˜¯æ•°æ®ï¼Œè½¬åˆ°ç®¡é“å»ä¿å­˜ï¼Œå¦‚æœæ˜¯è¯·æ±‚ï¼Œè½¬åˆ°è°ƒåº¦å™¨ï¼Œå¦‚æœæ¥çš„æ˜¯å“åº”å¯¹è±¡ï¼Œè½¬ç»™çˆ¬è™«ï¼‰</p></li><li><p><strong>è°ƒåº¦å™¨(SCHEDULER)</strong><br>ç”¨æ¥æ¥å—å¼•æ“å‘è¿‡æ¥çš„è¯·æ±‚, å‹å…¥é˜Ÿåˆ—ä¸­, å¹¶åœ¨å¼•æ“å†æ¬¡è¯·æ±‚çš„æ—¶å€™è¿”å›. å¯ä»¥æƒ³åƒæˆä¸€ä¸ªURLçš„ä¼˜å…ˆçº§é˜Ÿåˆ—, ç”±å®ƒæ¥å†³å®šä¸‹ä¸€ä¸ªè¦æŠ“å–çš„ç½‘å€æ˜¯ä»€ä¹ˆ, åŒæ—¶å»é™¤é‡å¤çš„ç½‘å€</p><p>ï¼ˆç”¨äºå¤„ç†è¦çˆ¬å–çš„urlçš„é¡ºåºï¼Œæ·±åº¦ä¼˜å…ˆ/è¡¨ç¤ºä¸€æ¡è·¯èµ°åˆ°é»‘ï¼Œè¿˜æ˜¯å¹¿åº¦ä¼˜å…ˆ/è¡¨ç¤ºåŒä¸€å±‚å…ˆçˆ¬ä¸‹æ¥ï¼Œï¼Œå»é‡ï¼‰</p></li><li><p><strong>ä¸‹è½½å™¨(DOWLOADER)</strong><br>ç”¨äºä¸‹è½½ç½‘é¡µå†…å®¹, å¹¶å°†ç½‘é¡µå†…å®¹è¿”å›ç»™EGINEï¼Œä¸‹è½½å™¨æ˜¯å»ºç«‹åœ¨twistedè¿™ä¸ªé«˜æ•ˆçš„å¼‚æ­¥æ¨¡å‹ä¸Šçš„</p><p>ï¼ˆå‘å¤–è¦çˆ¬å–çš„åœ°å€å‘é€è¯·æ±‚ï¼‰</p></li><li><p><strong>çˆ¬è™«(SPIDERS)</strong><br>SPIDERSæ˜¯å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„ç±»ï¼Œç”¨æ¥è§£æresponsesï¼Œå¹¶ä¸”æå–itemsï¼Œæˆ–è€…å‘é€æ–°çš„è¯·æ±‚</p></li><li><p><strong>é¡¹ç›®ç®¡é“(ITEM PIPLINES)</strong><br>åœ¨itemsè¢«æå–åè´Ÿè´£å¤„ç†å®ƒä»¬ï¼Œä¸»è¦åŒ…æ‹¬æ¸…ç†ã€éªŒè¯ã€æŒä¹…åŒ–ï¼ˆæ¯”å¦‚å­˜åˆ°æ•°æ®åº“ï¼‰ç­‰æ“ä½œ</p><p>ï¼ˆéœ€è¦åœ¨settingsä¸­é…ç½®ï¼‰</p></li><li><p>ä¸‹è½½å™¨ä¸­é—´ä»¶(Downloader Middlewares)</p><p>ä½äºScrapyå¼•æ“å’Œä¸‹è½½å™¨ä¹‹é—´ï¼Œä¸»è¦ç”¨æ¥å¤„ç†ä»EGINEä¼ åˆ°DOWLOADERçš„è¯·æ±‚requestï¼Œå·²ç»ä»DOWNLOADERä¼ åˆ°EGINEçš„å“åº”responseï¼Œä½ å¯ç”¨è¯¥ä¸­é—´ä»¶åšä»¥ä¸‹å‡ ä»¶äº‹</p><ol><li>process a request just before it is sent to the Downloader (i.e. right before Scrapy sends the request to the website);</li><li>change received response before passing it to a spider;</li><li>send a new Request instead of passing received response to a spider;</li><li>pass response to a spider without fetching a web page;</li><li>silently drop some requests.</li></ol></li><li><p><strong>çˆ¬è™«ä¸­é—´ä»¶(Spider Middlewares)</strong><br>ä½äºEGINEå’ŒSPIDERSä¹‹é—´ï¼Œä¸»è¦å·¥ä½œæ˜¯å¤„ç†SPIDERSçš„è¾“å…¥ï¼ˆå³responsesï¼‰å’Œè¾“å‡ºï¼ˆå³requestsï¼‰</p></li></ol><p>æ‰§è¡Œé¡ºåºï¼šçˆ¬è™«æŠŠè¦çˆ¬çš„urlè½¬å‘ç»™å¼•æ“ï¼Œå¼•æ“å†è½¬å‘ç»™è°ƒåº¦å™¨ï¼Œç”±è°ƒåº¦å™¨å†³å®šé¡ºåºï¼Œè¿”å›ç»™å¼•æ“ï¼Œå¼•æ“å†æŠŠè¦çˆ¬å–çš„urlé€šè¿‡ä¸‹è½½ä¸­é—´ä»¶ï¼ˆç”¨äºåŠ ä¸ªå¤´ï¼Œcookieå•¥çš„ï¼‰å‘éœ€è¦çˆ¬å–çš„æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œå“åº”å›æ¥ä¹‹åä¹Ÿé€šè¿‡ä¸‹è½½ä¸­é—´ä»¶ç»™å¼•æ“ï¼Œå¼•æ“åˆ¤æ–­æ˜¯å“åº”æ•°æ®ä¹‹åï¼Œè½¬å‘ç»™çˆ¬è™«ï¼Œçˆ¬è™«å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„éœ€è¦çˆ¬çš„åœ°å€ï¼ˆå°±ç»§ç»­ä¸Šé¢çš„æµç¨‹ï¼‰æˆ–è€…éœ€è¦ä¿å­˜çš„æ•°æ®ï¼Œæ•°æ®éƒ¨åˆ†ç”±å¼•æ“è½¬å‘ç»™ç®¡é“ï¼Œä¿å­˜æ•°æ®</p><p><strong>ç›®å½•ä»‹ç»</strong></p><pre class=" language-python"><code class="language-python">    firstscrapy  <span class="token comment" spellcheck="true"># é¡¹ç›®åå­—</span>        firstscrapy <span class="token comment" spellcheck="true"># åŒ…</span>            <span class="token operator">-</span>spiders <span class="token comment" spellcheck="true"># æ‰€æœ‰çš„çˆ¬è™«æ–‡ä»¶æ”¾åœ¨é‡Œé¢</span>                <span class="token operator">-</span>baidu<span class="token punctuation">.</span>py <span class="token comment" spellcheck="true"># ä¸€ä¸ªä¸ªçš„çˆ¬è™«ï¼ˆä»¥ååŸºæœ¬ä¸Šéƒ½åœ¨è¿™å†™ä¸œè¥¿ï¼‰</span>                <span class="token operator">-</span>chouti<span class="token punctuation">.</span>py            <span class="token operator">-</span>middlewares<span class="token punctuation">.</span>py <span class="token comment" spellcheck="true"># ä¸­é—´ä»¶ï¼ˆçˆ¬è™«ï¼Œä¸‹è½½ä¸­é—´ä»¶éƒ½å†™åœ¨è¿™ï¼‰</span>            <span class="token operator">-</span>pipelines<span class="token punctuation">.</span>py   <span class="token comment" spellcheck="true"># æŒä¹…åŒ–ç›¸å…³å†™åœ¨è¿™ï¼ˆitems.pyä¸­ç±»çš„å¯¹è±¡ï¼‰</span>            <span class="token operator">-</span>main<span class="token punctuation">.</span>py        <span class="token comment" spellcheck="true"># è‡ªå·±åŠ çš„ï¼Œæ‰§è¡Œçˆ¬è™«</span>            <span class="token operator">-</span>items<span class="token punctuation">.</span>py       <span class="token comment" spellcheck="true"># ä¸€ä¸ªä¸€ä¸ªçš„ç±»ï¼Œ</span>            <span class="token operator">-</span>settings<span class="token punctuation">.</span>py    <span class="token comment" spellcheck="true"># é…ç½®æ–‡ä»¶</span>        scrapy<span class="token punctuation">.</span>cfg          <span class="token comment" spellcheck="true"># ä¸Šçº¿ç›¸å…³</span></code></pre><p><strong>settingså‚æ•°ä»‹ç»</strong></p><pre class=" language-python"><code class="language-python"><span class="token number">1</span> é»˜è®¤æƒ…å†µï¼Œscrapyä¼šå»éµå¾ªçˆ¬è™«åè®®<span class="token number">2</span> ä¿®æ”¹é…ç½®æ–‡ä»¶å‚æ•°ï¼Œå¼ºè¡Œçˆ¬å–ï¼Œä¸éµå¾ªåè®®    <span class="token operator">-</span>ROBOTSTXT_OBEY <span class="token operator">=</span> <span class="token boolean">False</span><span class="token number">3</span> USER_AGENT <span class="token operator">=</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.105 Safari/537.36'</span><span class="token number">4</span> LOG_LEVEL<span class="token operator">=</span><span class="token string">'ERROR'</span> <span class="token comment" spellcheck="true"># è¿è¡Œçš„æ—¶å€™å°±ä¸ä¼šæŠŠå…¶ä»–æ—¥å¿—å±•ç¤ºå‡ºæ¥</span></code></pre><h2 id="ä¸‰ã€åŸºæœ¬ä½¿ç”¨"><a href="#ä¸‰ã€åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ä¸‰ã€åŸºæœ¬ä½¿ç”¨"></a>ä¸‰ã€åŸºæœ¬ä½¿ç”¨</h2><h3 id="1-åŸºæœ¬å‘½ä»¤"><a href="#1-åŸºæœ¬å‘½ä»¤" class="headerlink" title="1 åŸºæœ¬å‘½ä»¤"></a>1 åŸºæœ¬å‘½ä»¤</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># åˆ›å»ºé¡¹ç›®</span>scrapy startproject firstscrapy<span class="token comment" spellcheck="true"># åˆ›å»ºçˆ¬è™«</span>scrapy genspider çˆ¬è™«å çˆ¬è™«åœ°å€scrapy genspider chouti dig<span class="token punctuation">.</span>chouti<span class="token punctuation">.</span>com<span class="token comment" spellcheck="true"># ä¸€æ‰§è¡Œå°±ä¼šåœ¨spideræ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå‡ºä¸€ä¸ªpyæ–‡ä»¶</span><span class="token comment" spellcheck="true"># è¿è¡Œçˆ¬è™«</span>scrapy crawl chouti   <span class="token comment" spellcheck="true"># å¸¦è¿è¡Œæ—¥å¿—</span>scrapy crawl chouti <span class="token operator">-</span><span class="token operator">-</span>nolog  <span class="token comment" spellcheck="true"># ä¸å¸¦æ—¥å¿—</span><span class="token comment" spellcheck="true"># æ”¯æŒå³é”®æ‰§è¡Œçˆ¬è™«</span><span class="token comment" spellcheck="true"># åœ¨é¡¹ç›®è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªmain.py</span><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>cmdline <span class="token keyword">import</span> executeexecute<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'scrapy'</span><span class="token punctuation">,</span><span class="token string">'crawl'</span><span class="token punctuation">,</span><span class="token string">'chouti'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><h3 id="2-æ•°æ®è§£æ"><a href="#2-æ•°æ®è§£æ" class="headerlink" title="2 æ•°æ®è§£æ"></a>2 æ•°æ®è§£æ</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#xpathï¼š</span>    <span class="token operator">-</span>response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//a[contains(@class,"link-title")]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å–æ–‡æœ¬</span>    <span class="token operator">-</span>response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//a[contains(@class,"link-title")]/@href'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#å–å±æ€§</span><span class="token comment" spellcheck="true">#css</span>    <span class="token operator">-</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.link-title::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å–æ–‡æœ¬</span>    <span class="token operator">-</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.link-title::attr(href)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å–å±æ€§</span></code></pre><h3 id="3-æ•°æ®æŒä¹…åŒ–"><a href="#3-æ•°æ®æŒä¹…åŒ–" class="headerlink" title="3 æ•°æ®æŒä¹…åŒ–"></a>3 æ•°æ®æŒä¹…åŒ–</h3><p><strong>items.py</strong></p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># æŒä¹…åŒ–åŒ¹é…çš„å­—æ®µ</span><span class="token keyword">class</span> <span class="token class-name">ChoutiItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># define the fields for your item here like:</span>    title <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>    laiyuan <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>spiders/chouti.py</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> scrapy<span class="token keyword">class</span> <span class="token class-name">ChoutiSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'chouti'</span>    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'dig.chouti.com'</span><span class="token punctuation">]</span>    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://dig.chouti.com/'</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># è¿”å›è¦çˆ¬å–çš„é¡µé¢ï¼Œæˆ–è€…è¿”å›è¦ä¿å­˜çš„æ•°æ®</span>        <span class="token comment" spellcheck="true"># ä¸‹é¢ä¸¤è€…æ•ˆæœç›¸åŒ</span>        <span class="token keyword">from</span> pachong<span class="token punctuation">.</span>items <span class="token keyword">import</span> ChoutiItem        item <span class="token operator">=</span> ChoutiItem<span class="token punctuation">(</span><span class="token punctuation">)</span>        div_list <span class="token operator">=</span> response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.link-con .link-item'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># div_list = response.xpath('//div[contains(@class,"link-item")]')</span>        <span class="token keyword">for</span> div <span class="token keyword">in</span> div_list<span class="token punctuation">:</span>            title <span class="token operator">=</span> div<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.link-title::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>            laiyuan <span class="token operator">=</span> div<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.link-from::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># title = div.xpath('//a[contains(@class,"link-title")]/text()').extract()</span>            <span class="token keyword">if</span> <span class="token operator">not</span> laiyuan<span class="token punctuation">:</span>                laiyuan <span class="token operator">=</span> <span class="token string">''</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>laiyuan<span class="token punctuation">)</span>            item<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> title            item<span class="token punctuation">[</span><span class="token string">'laiyuan'</span><span class="token punctuation">]</span> <span class="token operator">=</span> laiyuan            <span class="token keyword">yield</span> item</code></pre><p><strong>pipelines.py</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token keyword">class</span> <span class="token class-name">PachongPipeline</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">open_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>spider<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">,</span>                 database<span class="token operator">=</span><span class="token string">'pachong'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>        cursor <span class="token operator">=</span> self<span class="token punctuation">.</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>        sql <span class="token operator">=</span> <span class="token string">'insert into chouti (title,laiyuan)values(%s,%s)'</span>        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">[</span>item<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">[</span><span class="token string">'laiyuan'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> item    <span class="token keyword">def</span> <span class="token function">close_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>spider<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>settings.py</strong></p><pre class=" language-python"><code class="language-python">ITEM_PIPELINES <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>   <span class="token string">'pachong.pipelines.PachongPipeline'</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span><span class="token comment" spellcheck="true"># é…ç½®ä¼˜å…ˆçº§</span></code></pre><h2 id="å››ã€scrapyé«˜çº§"><a href="#å››ã€scrapyé«˜çº§" class="headerlink" title="å››ã€scrapyé«˜çº§"></a>å››ã€scrapyé«˜çº§</h2><h3 id="1-æå‡scrapyçˆ¬å–æ•°æ®çš„æ•ˆç‡"><a href="#1-æå‡scrapyçˆ¬å–æ•°æ®çš„æ•ˆç‡" class="headerlink" title="1 æå‡scrapyçˆ¬å–æ•°æ®çš„æ•ˆç‡"></a>1 æå‡scrapyçˆ¬å–æ•°æ®çš„æ•ˆç‡</h3><pre class=" language-python"><code class="language-python"><span class="token operator">-</span> åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³çš„é…ç½®å³å¯<span class="token punctuation">:</span><span class="token punctuation">(</span>é»˜è®¤è¿˜æœ‰ä¸€å¥—setting<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#1 å¢åŠ å¹¶å‘ï¼š</span>é»˜è®¤scrapyå¼€å¯çš„å¹¶å‘çº¿ç¨‹ä¸º<span class="token number">32</span>ä¸ªï¼Œå¯ä»¥é€‚å½“è¿›è¡Œå¢åŠ ã€‚åœ¨settingsé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹CONCURRENT_REQUESTS <span class="token operator">=</span> <span class="token number">100</span>å€¼ä¸º<span class="token number">100</span><span class="token punctuation">,</span>å¹¶å‘è®¾ç½®æˆäº†ä¸º<span class="token number">100</span>ã€‚<span class="token comment" spellcheck="true">#2 é™ä½æ—¥å¿—çº§åˆ«ï¼š</span>åœ¨è¿è¡Œscrapyæ—¶ï¼Œä¼šæœ‰å¤§é‡æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºï¼Œä¸ºäº†å‡å°‘CPUçš„ä½¿ç”¨ç‡ã€‚å¯ä»¥è®¾ç½®logè¾“å‡ºä¿¡æ¯ä¸ºINFOæˆ–è€…ERRORå³å¯ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–å†™ï¼šLOG_LEVEL <span class="token operator">=</span> â€˜INFOâ€™<span class="token comment" spellcheck="true"># 3 ç¦æ­¢cookieï¼š</span>å¦‚æœä¸æ˜¯çœŸçš„éœ€è¦cookieï¼Œåˆ™åœ¨scrapyçˆ¬å–æ•°æ®æ—¶å¯ä»¥ç¦æ­¢cookieä»è€Œå‡å°‘CPUçš„ä½¿ç”¨ç‡ï¼Œæå‡çˆ¬å–æ•ˆç‡ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–å†™ï¼šCOOKIES_ENABLED <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment" spellcheck="true"># 4ç¦æ­¢é‡è¯•ï¼š</span>å¯¹å¤±è´¥çš„HTTPè¿›è¡Œé‡æ–°è¯·æ±‚ï¼ˆé‡è¯•ï¼‰ä¼šå‡æ…¢çˆ¬å–é€Ÿåº¦ï¼Œå› æ­¤å¯ä»¥ç¦æ­¢é‡è¯•ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–å†™ï¼šRETRY_ENABLED <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment" spellcheck="true"># 5 å‡å°‘ä¸‹è½½è¶…æ—¶ï¼š</span>å¦‚æœå¯¹ä¸€ä¸ªéå¸¸æ…¢çš„é“¾æ¥è¿›è¡Œçˆ¬å–ï¼Œå‡å°‘ä¸‹è½½è¶…æ—¶å¯ä»¥èƒ½è®©å¡ä½çš„é“¾æ¥å¿«é€Ÿè¢«æ”¾å¼ƒï¼Œä»è€Œæå‡æ•ˆç‡ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œç¼–å†™ï¼šDOWNLOAD_TIMEOUT <span class="token operator">=</span> <span class="token number">10</span> è¶…æ—¶æ—¶é—´ä¸º10s</code></pre><h3 id="2-scrapyçš„ä¸­é—´ä»¶ï¼ˆä¸‹è½½ä¸­é—´ä»¶ï¼‰"><a href="#2-scrapyçš„ä¸­é—´ä»¶ï¼ˆä¸‹è½½ä¸­é—´ä»¶ï¼‰" class="headerlink" title="2 scrapyçš„ä¸­é—´ä»¶ï¼ˆä¸‹è½½ä¸­é—´ä»¶ï¼‰"></a>2 scrapyçš„ä¸­é—´ä»¶ï¼ˆä¸‹è½½ä¸­é—´ä»¶ï¼‰</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 1 éƒ½å†™åœ¨middlewares.py</span><span class="token comment" spellcheck="true"># 2 çˆ¬è™«ä¸­é—´ä»¶</span><span class="token comment" spellcheck="true"># 3 ä¸‹è½½ä¸­é—´ä»¶</span><span class="token comment" spellcheck="true"># 4 è¦ç”Ÿæ•ˆï¼Œä¸€å®šè¦é…ç½®ï¼Œé…ç½®æ–‡ä»¶</span><span class="token comment" spellcheck="true"># ä¸‹è½½ä¸­é—´ä»¶</span><span class="token operator">-</span>process_requestï¼šè¿”å›ä¸åŒçš„å¯¹è±¡ï¼Œåç»­å¤„ç†ä¸åŒï¼ˆåŠ ä»£ç†<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>ï¼‰          <span class="token comment" spellcheck="true"># 1 æ›´æ¢è¯·æ±‚å¤´</span>        <span class="token comment" spellcheck="true"># print(type(request.headers))</span>        <span class="token comment" spellcheck="true"># print(request.headers)</span>        <span class="token comment" spellcheck="true">#</span>        <span class="token comment" spellcheck="true"># from scrapy.http.headers import Headers</span>        <span class="token comment" spellcheck="true"># request.headers['User-Agent']=''</span>        <span class="token comment" spellcheck="true"># 2 åŠ cookie ---cookieæ± </span>        <span class="token comment" spellcheck="true"># å‡è®¾ä½ ä½ å·²ç»æ­å»ºå¥½cookie æ± äº†ï¼Œ</span>        <span class="token comment" spellcheck="true"># print('00000--',request.cookies)</span>        <span class="token comment" spellcheck="true"># request.cookies=&amp;#123;'username':'asdfasdf'&amp;#125;</span>        <span class="token comment" spellcheck="true"># 3 åŠ ä»£ç†</span>        <span class="token comment" spellcheck="true"># print(request.meta)</span>        <span class="token comment" spellcheck="true"># request.meta['download_timeout'] = 20</span>        <span class="token comment" spellcheck="true"># request.meta["proxy"] = 'http://27.188.62.3:8060'</span><span class="token operator">-</span>process_responseï¼šè¿”å›ä¸åŒçš„å¯¹è±¡ï¼Œåç»­å¤„ç†ä¸åŒ<span class="token operator">-</span> process_exception<span class="token keyword">def</span> <span class="token function">process_exception</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> exception<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'xxxx'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># ä¸å…è®¸ç›´æ¥æ”¹url</span>        <span class="token comment" spellcheck="true"># request.url='https://www.baidu.com'</span>        <span class="token keyword">from</span> scrapy <span class="token keyword">import</span> Request        request<span class="token operator">=</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>callback<span class="token operator">=</span>spider<span class="token punctuation">.</span>parser<span class="token punctuation">)</span>        <span class="token keyword">return</span> request</code></pre><h3 id="3-seleniumåœ¨scrapyä¸­çš„ä½¿ç”¨æµç¨‹"><a href="#3-seleniumåœ¨scrapyä¸­çš„ä½¿ç”¨æµç¨‹" class="headerlink" title="3 seleniumåœ¨scrapyä¸­çš„ä½¿ç”¨æµç¨‹"></a>3 seleniumåœ¨scrapyä¸­çš„ä½¿ç”¨æµç¨‹</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># å½“å‰çˆ¬è™«ç”¨çš„seleniumæ˜¯åŒä¸€ä¸ª</span><span class="token comment" spellcheck="true"># 1 åœ¨çˆ¬è™«ä¸­åˆå§‹åŒ–webdriverå¯¹è±¡</span>    <span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver    <span class="token keyword">class</span> <span class="token class-name">CnblogSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> <span class="token string">'cnblog'</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> bro<span class="token operator">=</span>webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>executable_path<span class="token operator">=</span><span class="token string">'../chromedriver.exe'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 2 åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨ï¼ˆprocess_requestï¼‰</span>spider<span class="token punctuation">.</span>bro<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://dig.chouti.com/'</span><span class="token punctuation">)</span>   response<span class="token operator">=</span>HtmlResponse<span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string">'https://dig.chouti.com/'</span><span class="token punctuation">,</span>body<span class="token operator">=</span>spider<span class="token punctuation">.</span>bro<span class="token punctuation">.</span>page_source<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>request<span class="token operator">=</span>request<span class="token punctuation">)</span>    <span class="token keyword">return</span> response<span class="token comment" spellcheck="true"># 3 åœ¨çˆ¬è™«ä¸­å…³é—­</span>    <span class="token keyword">def</span> <span class="token function">close</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æˆ‘ç»“æŸäº†"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bro<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="4-åˆ†å¸ƒå¼çˆ¬è™«ï¼ˆscrapy-redisï¼‰"><a href="#4-åˆ†å¸ƒå¼çˆ¬è™«ï¼ˆscrapy-redisï¼‰" class="headerlink" title="4 åˆ†å¸ƒå¼çˆ¬è™«ï¼ˆscrapy-redisï¼‰"></a>4 åˆ†å¸ƒå¼çˆ¬è™«ï¼ˆscrapy-redisï¼‰</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 1 pip3 install scrapy-redis</span><span class="token comment" spellcheck="true"># 2 åŸæ¥ç»§æ‰¿Spiderï¼Œç°åœ¨ç»§æ‰¿RedisSpider</span><span class="token comment" spellcheck="true"># 3 ä¸èƒ½å†™start_urls = ['https:/www.cnblogs.com/']</span><span class="token comment" spellcheck="true"># 4 éœ€è¦å†™redis_key = 'myspider:start_urls'</span><span class="token comment" spellcheck="true"># 5 settingä¸­é…ç½®ï¼š</span><span class="token comment" spellcheck="true"># redisçš„è¿æ¥</span>REDIS_HOST <span class="token operator">=</span> <span class="token string">'localhost'</span>                            <span class="token comment" spellcheck="true"># ä¸»æœºå</span>REDIS_PORT <span class="token operator">=</span> <span class="token number">6379</span>                                   <span class="token comment" spellcheck="true"># ç«¯å£</span>    <span class="token comment" spellcheck="true"># ä½¿ç”¨scrapy-redisçš„å»é‡</span>DUPEFILTER_CLASS <span class="token operator">=</span> <span class="token string">"scrapy_redis.dupefilter.RFPDupeFilter"</span><span class="token comment" spellcheck="true"># ä½¿ç”¨scrapy-redisçš„Scheduler</span><span class="token comment" spellcheck="true"># åˆ†å¸ƒå¼çˆ¬è™«çš„é…ç½®</span>SCHEDULER <span class="token operator">=</span> <span class="token string">"scrapy_redis.scheduler.Scheduler"</span><span class="token comment" spellcheck="true"># æŒä¹…åŒ–çš„å¯ä»¥é…ç½®ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®</span>ITEM_PIPELINES <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>   <span class="token string">'scrapy_redis.pipelines.RedisPipeline'</span><span class="token punctuation">:</span> <span class="token number">299</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span><span class="token comment" spellcheck="true"># 9ç°åœ¨è¦è®©çˆ¬è™«è¿è¡Œèµ·æ¥ï¼Œéœ€è¦å»redisä¸­ä»¥myspider:start_urlsä¸ºkeyï¼Œæ’å…¥ä¸€ä¸ªèµ·å§‹åœ°å€lpush myspider:start_urls https://www.cnblogs.com/</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€å®‰è£…&quot;&gt;&lt;a href=&quot;#ä¸€ã€å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å®‰è£…&quot;&gt;&lt;/a&gt;ä¸€ã€å®‰è£…&lt;/h2&gt;&lt;pre class=&quot; language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="çˆ¬è™«" scheme="http://huang_zhao.gitee.io/task/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="pythonæ¡†æ¶" scheme="http://huang_zhao.gitee.io/task/tags/python%E6%A1%86%E6%9E%B6/"/>
    
    <category term="çˆ¬è™«é«˜çº§" scheme="http://huang_zhao.gitee.io/task/tags/%E7%88%AC%E8%99%AB%E9%AB%98%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>BeautifulSoupæ¨¡å—çš„ä½¿ç”¨</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/21/BeautifulSoup%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/21/BeautifulSoup%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8/</id>
    <published>2020-04-21T06:10:11.000Z</published>
    <updated>2020-09-04T11:23:29.202Z</updated>
    
    <content type="html"><![CDATA[<h2 id="BeautifulSoupæ¨¡å—çš„ä½¿ç”¨"><a href="#BeautifulSoupæ¨¡å—çš„ä½¿ç”¨" class="headerlink" title="BeautifulSoupæ¨¡å—çš„ä½¿ç”¨"></a>BeautifulSoupæ¨¡å—çš„ä½¿ç”¨</h2><h4 id="1-å‚æ•°ä»‹ç»"><a href="#1-å‚æ•°ä»‹ç»" class="headerlink" title="1 å‚æ•°ä»‹ç»"></a>1 å‚æ•°ä»‹ç»</h4><pre class=" language-python"><code class="language-python">html_doc <span class="token operator">=</span> <span class="token triple-quoted-string string">"""&lt;html>&lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head>&lt;body>&lt;p id="my_p" class="title">hello&lt;b id="bbb" class="boldest">The Dormouse's story&lt;/b>&lt;/p>&lt;p class="story">Once upon a time there were three little sisters; and their names were&lt;a href="http://example.com/elsie" class="sister" id="link1">Elsie&lt;/a>&lt;a href="http://example.com/lacie" class="sister" id="link2">Lacie&lt;/a> and&lt;a href="http://example.com/tillie" class="sister" id="link3">Tillie&lt;/a>;and they lived at the bottom of a well.&lt;/p>&lt;p class="story">...&lt;/p>"""</span>soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span><span class="token string">'lxml'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è§£æçš„htmlé¡µé¢ï¼Œé€šå¸¸æ˜¯æˆ‘ä»¬é€šè¿‡è¯·æ±‚å¾—åˆ°çš„é¡µé¢æ•°æ®</span><span class="token comment" spellcheck="true"># ç¬¬äºŒä¸ªå‚æ•°æ˜¯è§£æçš„è§£æå™¨é€‰æ‹©</span><span class="token comment" spellcheck="true"># pythonå†…ç½®çš„html.parser</span><span class="token comment" spellcheck="true"># å…¶ä»–è§£é‡Šå™¨ï¼šlxmlï¼ˆé€šå¸¸ä½¿ç”¨ï¼‰ï¼Œxmlï¼Œhtml5lib</span></code></pre><p>æ–‡æ¡£ï¼š<a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html">https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html</a></p><h4 id="2-åŸºæœ¬ä½¿ç”¨"><a href="#2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2 åŸºæœ¬ä½¿ç”¨"></a>2 åŸºæœ¬ä½¿ç”¨</h4><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 1 æ ‡ç­¾æŸ¥æ‰¾</span>soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span><span class="token string">'lxml'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å¦‚æœæœ‰å¤šä¸ªåªä¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ª</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>pres <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>b<span class="token comment" spellcheck="true"># 2 æ ‡ç­¾å±æ€§</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>b<span class="token punctuation">.</span>attrs<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'id': 'bbb', 'class': ['boldest']&amp;#125;</span><span class="token comment" spellcheck="true"># 3 è·å–æ–‡æœ¬å†…å®¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>string <span class="token comment" spellcheck="true"># å½“pä¸‹åªæœ‰æ–‡æœ¬å–åˆ°ï¼Œå¦åˆ™ä¸ºNone</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>strings <span class="token comment" spellcheck="true"># è·å–å…¨éƒ¨æ–‡æœ¬å¾—åˆ°ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>text <span class="token comment" spellcheck="true"># å–åˆ°æ ‡ç­¾ä¸‹æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹æ‹¼æ¥èµ·æ¥</span><span class="token comment" spellcheck="true"># 4 åµŒå¥—é€‰æ‹©</span><span class="token comment" spellcheck="true"># å¯ä»¥è®©é€‰æ‹©æ›´åŠ å‡†ç¡®</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>b<span class="token punctuation">.</span>string<span class="token comment" spellcheck="true"># 5 å­èŠ‚ç‚¹ã€å­å­™èŠ‚ç‚¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>contents <span class="token comment" spellcheck="true"># è·å¾—på†…æ‰€æœ‰å­èŠ‚ç‚¹</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>b <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"boldest"</span> id<span class="token operator">=</span><span class="token string">"bbb"</span><span class="token operator">></span>The Dormouse<span class="token string">'s story&lt;/b>, '</span>\n'<span class="token punctuation">]</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>children <span class="token comment" spellcheck="true"># å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«på†…æ‰€æœ‰å­èŠ‚ç‚¹</span><span class="token triple-quoted-string string">'''å­èŠ‚ç‚¹hello&lt;b class="boldest" id="bbb">The Dormouse's story&lt;/b>'''</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>descendants <span class="token comment" spellcheck="true"># å¾—åˆ°ä¸€ä¸ªç”Ÿæˆå™¨ï¼ŒåŒ…å«på†…æ‰€æœ‰å­å­™èŠ‚ç‚¹</span><span class="token triple-quoted-string string">'''å­å­™èŠ‚ç‚¹hello&lt;b class="boldest" id="bbb">The Dormouse's story&lt;/b>The Dormouse's story'''</span><span class="token comment" spellcheck="true"># 6 çˆ¶èŠ‚ç‚¹ã€ç¥–èŠ‚ç‚¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>parent <span class="token comment" spellcheck="true"># è·å¾—pçš„çˆ¶èŠ‚ç‚¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>parents <span class="token comment" spellcheck="true"># è·å¾—pçš„çˆ¶èŠ‚ç‚¹ï¼Œå’Œçˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ã€‚ã€‚çš„ç”Ÿæˆå™¨</span><span class="token comment" spellcheck="true"># 7 å…„å¼ŸèŠ‚ç‚¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>next_sibling <span class="token comment" spellcheck="true"># ä¸‹ä¸€ä¸ªå…„å¼Ÿ</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>next_previous_sibling <span class="token comment" spellcheck="true"># ä¸Šä¸€ä¸ªå…„å¼Ÿ</span></code></pre><h4 id="3-æœç´¢æ–‡æ¡£æ ‘"><a href="#3-æœç´¢æ–‡æ¡£æ ‘" class="headerlink" title="3 æœç´¢æ–‡æ¡£æ ‘"></a>3 æœç´¢æ–‡æ¡£æ ‘</h4><h5 id="3-1-äº”ç§è¿‡æ»¤å™¨"><a href="#3-1-äº”ç§è¿‡æ»¤å™¨" class="headerlink" title="3.1 äº”ç§è¿‡æ»¤å™¨"></a>3.1 äº”ç§è¿‡æ»¤å™¨</h5><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 1 å­—ç¬¦ä¸²</span><span class="token comment" spellcheck="true"># å¦‚æœæœ‰å¤šä¸ªå–ç¬¬ä¸€ä¸ª</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è·å–å…¨éƒ¨ï¼Œåªæœ‰ä¸€ä¸ªä¹Ÿæ˜¯æ”¾åœ¨åˆ—è¡¨ä¸­</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 2 æ­£åˆ™è¡¨è¾¾å¼</span><span class="token comment" spellcheck="true"># è·å¾—æ‰€æœ‰ä»¥bå¼€å¤´çš„æ ‡ç­¾ï¼šbodyï¼Œb</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">'^b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 3 åˆ—è¡¨</span><span class="token comment" spellcheck="true"># aæ ‡ç­¾ï¼Œbæ ‡ç­¾éƒ½ä¼šå–</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 4 å¸ƒå°”</span><span class="token comment" spellcheck="true"># ä¼šæŸ¥æ‰¾åˆ°æ‰€æœ‰æ ‡ç­¾ï¼Œä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 5 è‡ªå®šä¹‰è¿‡æ»¤å™¨</span><span class="token comment" spellcheck="true"># ä¼šæŠŠæ•´ä¸ªé¡µé¢ä¼ ç»™tag</span><span class="token keyword">def</span> <span class="token function">has_class_not_id</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> tag<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token operator">not</span> tag<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>has_class_not_id<span class="token punctuation">)</span></code></pre><h5 id="3-2-find-all"><a href="#3-2-find-all" class="headerlink" title="3.2 find_all()"></a>3.2 find_all()</h5><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># nameï¼šå¯ä»¥æ”¾ä»»æ„ç±»å‹çš„è¿‡æ»¤å™¨</span><span class="token comment" spellcheck="true"># keywordï¼šæ”¾é”®å€¼å¯¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>id <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">'^my'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å¦‚æœæœ‰ç‰¹æ®Šå‚æ•°ä¸èƒ½é€šè¿‡kï¼Œvæ¥è¡¨ç¤º</span><span class="token comment" spellcheck="true"># æ¯”å¦‚data-foo = value</span>soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;"data-foo":"value"&amp;#125;)</span><span class="token comment" spellcheck="true"># æŒ‰ç±»åçš„æ—¶å€™ï¼Œå…³é”®å­—æ˜¯class_</span><span class="token comment" spellcheck="true"># æŸ¥æ‰¾ç”±sisterå’Œsssç±»çš„aæ ‡ç­¾</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span>class_<span class="token operator">=</span><span class="token string">'sister sss'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># limitå‚æ•°</span><span class="token comment" spellcheck="true"># æ‰¾å‰è¿ä¸ªaæ ‡ç­¾</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span>limit<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># recursive = False ä¼šæŸ¥æ‰¾tagä¸‹çš„ç›´æ¥çš„å­èŠ‚ç‚¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>html<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>recursive <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span></code></pre><h5 id="3-3-cssé€‰æ‹©å™¨"><a href="#3-3-cssé€‰æ‹©å™¨" class="headerlink" title="3.3 cssé€‰æ‹©å™¨"></a>3.3 cssé€‰æ‹©å™¨</h5><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># é€‰æ‹©å™¨</span><span class="token comment" spellcheck="true"># ç±»</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.sister'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å«æœ‰sisterç±»ä¸‹çš„bæ ‡ç­¾</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.title b'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># id</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#sister'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è·å–å±æ€§</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.title b'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>attrs<span class="token comment" spellcheck="true"># è·å–å†…å®¹</span>res <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.title b'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;BeautifulSoupæ¨¡å—çš„ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#BeautifulSoupæ¨¡å—çš„ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;BeautifulSoupæ¨¡å—çš„ä½¿ç”¨&quot;&gt;&lt;/a&gt;BeautifulSoupæ¨¡å—çš„ä½¿ç”¨&lt;/h2&gt;&lt;h4 id=&quot;1</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="çˆ¬è™«" scheme="http://huang_zhao.gitee.io/task/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="pythonæ¨¡å—" scheme="http://huang_zhao.gitee.io/task/tags/python%E6%A8%A1%E5%9D%97/"/>
    
  </entry>
  
  <entry>
    <title>RedisæŒä¹…åŒ–ï¼Œä¸»ä»ï¼Œå“¨å…µï¼Œé›†ç¾¤</title>
    <link href="http://huang_zhao.gitee.io/task/2020/04/21/Redis%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%8C%E4%B8%BB%E4%BB%8E%EF%BC%8C%E5%93%A8%E5%85%B5%EF%BC%8C%E9%9B%86%E7%BE%A4/"/>
    <id>http://huang_zhao.gitee.io/task/2020/04/21/Redis%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%8C%E4%B8%BB%E4%BB%8E%EF%BC%8C%E5%93%A8%E5%85%B5%EF%BC%8C%E9%9B%86%E7%BE%A4/</id>
    <published>2020-04-21T06:10:11.000Z</published>
    <updated>2020-09-04T11:15:13.112Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€æŒä¹…åŒ–"><a href="#ä¸€ã€æŒä¹…åŒ–" class="headerlink" title="ä¸€ã€æŒä¹…åŒ–"></a>ä¸€ã€æŒä¹…åŒ–</h2><p>æŒä¹…åŒ–è¡¨ç¤ºæŠŠæ•°æ®å­˜å‚¨åˆ°ç¡¬ç›˜çš„è¿‡ç¨‹</p><p>æŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼</p><ul><li>å¿«ç…§ï¼šæŸäº‹æŸåˆ»æ•°æ®åº“çš„å®Œæ•´å¤‡ä»½ redisçš„RDB</li><li>å†™æ—¥å¿—ï¼šä»»ä½•æ“ä½œéƒ½è®°å½•ä¸‹æ¥ï¼Œè¦æ¢å¤æ•°æ®å°±é‡æ–°èµ°ä¸€éæµç¨‹å³å¯ redisçš„AOF</li></ul><h3 id="1-RDB"><a href="#1-RDB" class="headerlink" title="1 RDB"></a>1 RDB</h3><p>RDBçš„ä¸‰ç§è§¦å‘æœºåˆ¶</p><pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">'''save(åŒæ­¥)1 å®¢æˆ·ç«¯æ‰§è¡Œsaveå‘½ä»¤----ã€‹redisæœåŠ¡ç«¯----ã€‹åŒæ­¥åˆ›å»ºRDBäºŒè¿›åˆ¶æ–‡ä»¶2 ä¼šé€ æˆredisçš„é˜»å¡ï¼ˆæ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼‰3 æ–‡ä»¶ç­–ç•¥ï¼šå¦‚æœè€çš„RDBå­˜åœ¨ï¼Œä¼šæ›¿æ¢è€çš„4 å¤æ‚åº¦ o(n)'''</span><span class="token triple-quoted-string string">'''bgsave(å¼‚æ­¥ï¼ŒBackgroud saving started)1 å®¢æˆ·ç«¯æ‰§è¡Œsaveå‘½ä»¤----ã€‹redisæœåŠ¡ç«¯----ã€‹å¼‚æ­¥åˆ›å»ºRDBäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆforkå‡½æ•°ç”Ÿæˆä¸€ä¸ªå­è¿›ç¨‹ï¼ˆforkä¼šé˜»å¡reidsï¼‰ï¼Œæ‰§è¡ŒcreateRDBï¼Œæ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ç»™reidsæ¶ˆæ¯ï¼‰2 æ­¤æ—¶è®¿é—®redisï¼Œä¼šæ­£å¸¸å“åº”å®¢æˆ·ç«¯3 æ–‡ä»¶ç­–ç•¥ï¼šè·Ÿsaveç›¸åŒï¼Œå¦‚æœè€çš„RDBå­˜åœ¨ï¼Œä¼šæ›¿æ¢è€çš„4 å¤æ‚åº¦ o(n)'''</span><span class="token triple-quoted-string string">'''è‡ªåŠ¨ï¼ˆé€šè¿‡é…ç½®ï¼‰é…ç½®   seconds   changessave   900        1save   300        10save   60         10000å¦‚æœ60sä¸­æ”¹å˜äº†1wæ¡æ•°æ®ï¼Œè‡ªåŠ¨ç”Ÿæˆrdbå¦‚æœ300sä¸­æ”¹å˜äº†10æ¡æ•°æ®ï¼Œè‡ªåŠ¨ç”Ÿæˆrdbå¦‚æœ900sä¸­æ”¹å˜äº†1æ¡æ•°æ®ï¼Œè‡ªåŠ¨ç”Ÿæˆrdbä»¥ä¸Šä¸‰æ¡ç¬¦åˆä»»æ„ä¸€æ¡ï¼Œå°±è‡ªåŠ¨ç”Ÿæˆrdbï¼Œå†…éƒ¨ä½¿ç”¨bgsave'''</span><span class="token comment" spellcheck="true">#é…ç½®ï¼š</span>save <span class="token number">900</span> <span class="token number">1</span> <span class="token comment" spellcheck="true">#é…ç½®ä¸€æ¡</span>save <span class="token number">300</span> <span class="token number">10</span> <span class="token comment" spellcheck="true">#é…ç½®ä¸€æ¡</span>save <span class="token number">60</span> <span class="token number">10000</span> <span class="token comment" spellcheck="true">#é…ç½®ä¸€æ¡</span>dbfilename dump<span class="token punctuation">.</span>rdb  <span class="token comment" spellcheck="true">#rdbæ–‡ä»¶çš„åå­—ï¼Œé»˜è®¤ä¸ºdump.rdb</span>dir <span class="token punctuation">.</span><span class="token operator">/</span> <span class="token comment" spellcheck="true">#rdbæ–‡ä»¶å­˜åœ¨å½“å‰ç›®å½•</span>stop<span class="token operator">-</span>writes<span class="token operator">-</span>on<span class="token operator">-</span>bgsave<span class="token operator">-</span>error yes <span class="token comment" spellcheck="true">#å¦‚æœbgsaveå‡ºç°é”™è¯¯ï¼Œæ˜¯å¦åœæ­¢å†™å…¥ï¼Œé»˜è®¤ä¸ºyes</span>rdbcompression yes <span class="token comment" spellcheck="true">#é‡‡ç”¨å‹ç¼©æ ¼å¼</span>rdbchecksum yes <span class="token comment" spellcheck="true">#æ˜¯å¦å¯¹rdbæ–‡ä»¶è¿›è¡Œæ ¡éªŒå’Œæ£€éªŒ</span><span class="token comment" spellcheck="true">#æœ€ä½³é…ç½®</span>save <span class="token number">900</span> <span class="token number">1</span> save <span class="token number">300</span> <span class="token number">10</span> save <span class="token number">60</span> <span class="token number">10000</span> dbfilename dump<span class="token operator">-</span>$<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;port&amp;#125;.rdb  #ä»¥ç«¯å£å·ä½œä¸ºæ–‡ä»¶åï¼Œå¯èƒ½ä¸€å°æœºå™¨ä¸Šå¾ˆå¤šreidsï¼Œä¸ä¼šä¹±</span>dir <span class="token operator">/</span>bigdiskpath <span class="token comment" spellcheck="true">#ä¿å­˜è·¯å¾„æ”¾åˆ°ä¸€ä¸ªå¤§ç¡¬ç›˜ä½ç½®ç›®å½•</span>stop<span class="token operator">-</span>writes<span class="token operator">-</span>on<span class="token operator">-</span>bgsave<span class="token operator">-</span>error yes <span class="token comment" spellcheck="true">#å‡ºç°é”™è¯¯åœæ­¢</span>rdbcompression yes <span class="token comment" spellcheck="true">#å‹ç¼©</span>rdbchecksum yes <span class="token comment" spellcheck="true">#æ ¡éªŒ</span></code></pre><p><strong>è§¦å‘æœºåˆ¶</strong></p><pre><code>1 å…¨é‡å¤åˆ¶ #æ²¡æœ‰æ‰§è¡Œsaveå’Œbgsaveæ²¡æœ‰æ·»åŠ rdbç­–ç•¥ï¼Œè¿˜ä¼šç”Ÿæˆrdbæ–‡ä»¶ï¼Œå¦‚æœå¼€å¯ä¸»ä»å¤åˆ¶ï¼Œä¸»ä¼šè‡ªåŠ¨ç”Ÿæˆrdb2 debug reload #debugçº§åˆ«çš„é‡å¯ï¼Œä¸ä¼šå°†å†…å­˜ä¸­çš„æ•°æ®æ¸…ç©º3 shutdown save#å…³é—­ä¼šå‡ºå‘rdbçš„ç”Ÿæˆ</code></pre><p><strong>å­˜åœ¨çš„é—®é¢˜</strong>ï¼šè€—æ—¶ï¼Œè€—æ€§èƒ½ï¼Œä¸å¯æ§ï¼Œæ•°æ®å¯èƒ½ä¼šä¸¢å¤±</p><h3 id="2-AOF"><a href="#2-AOF" class="headerlink" title="2 AOF"></a>2 AOF</h3><p>åŸç†ï¼šå®¢æˆ·ç«¯æ¯å†™å…¥ä¸€æ¡å‘½ä»¤å°±ä¼šè®°å½•ä¸€æ¡æ—¥å¿—ï¼Œæ”¾åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå¦‚æœå‡ºç°å®•æœºå®Œå…¨å¯ä»¥æ¢å¤</p><p><strong>AOFä¸‰ç§ä¿å­˜ç­–ç•¥</strong></p><p>æ—¥å¿—ä¸æ˜¯ç›´æ¥å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œè€Œæ˜¯å…ˆæ”¾åœ¨ç¼“å†²åŒºï¼Œç¼“å†²åŒºæ ¹æ®ä¸€äº›ç­–ç•¥ï¼Œå†™åˆ°ç¡¬ç›˜ä¸Š</p><ul><li><p>alwaysï¼šredisâ€“ã€‹å†™å‘½ä»¤åˆ·æ–°çš„ç¼“å†²åŒºâ€”ã€‹æ¯æ¡å‘½ä»¤fsyncåˆ°ç¡¬ç›˜â€”ã€‹AOFæ–‡ä»¶</p></li><li><p>everysecï¼ˆé»˜è®¤å€¼ï¼‰ï¼šredisâ€”â€”ã€‹å†™å‘½ä»¤åˆ·æ–°çš„ç¼“å†²åŒºâ€”ã€‹æ¯ç§’æŠŠç¼“å†²åŒºfsyncåˆ°ç¡¬ç›˜â€“ã€‹AOFæ–‡ä»¶</p></li><li><p>no:redisâ€”â€”ã€‹å†™å‘½ä»¤åˆ·æ–°çš„ç¼“å†²åŒºâ€”ã€‹æ“ä½œç³»ç»Ÿå†³å®šï¼Œç¼“å†²åŒºfsyncåˆ°ç¡¬ç›˜â€“ã€‹AOFæ–‡ä»¶</p></li></ul><table><thead><tr><th>å‘½ä»¤</th><th>always</th><th>everysec</th><th>no</th></tr></thead><tbody><tr><td>ä¼˜ç‚¹</td><td>ä¸ä¸¢å¤±æ•°æ®</td><td>æ¯ç§’ä¸€æ¬¡fsyncï¼Œä¸¢å¤±1ç§’æ•°æ®</td><td>ä¸ç”¨ç®¡</td></tr><tr><td>ç¼ºç‚¹</td><td>IOå¼€é”€å¤§ï¼Œä¸€èˆ¬çš„sataç›˜åªæœ‰å‡ ç™¾TPS</td><td>ä¸¢1ç§’æ•°æ®</td><td>ä¸å¯æ§</td></tr></tbody></table><h4 id="3-1-AOFé‡å†™"><a href="#3-1-AOFé‡å†™" class="headerlink" title="3.1 AOFé‡å†™"></a>3.1 AOFé‡å†™</h4><p>æ˜¯aofä¸­çš„ä¸€ä¸ªæ¨¡å¼ï¼Œæ—¥å¿—æ–‡ä»¶è¶Šå †è¶Šå¤šå°±ä¼šå­˜åœ¨å¾ˆå¤šæ²¡ç”¨çš„å‘½ä»¤</p><p>æ¯”å¦‚ç»™helloèµ‹å€¼äº†10æ¬¡ï¼Œå®é™…ä¸Šåªæœ‰ç¬¬10æ¬¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥å‰é¢9æ¬¡éƒ½å¯ä»¥åˆ æ‰ï¼Œæˆ–è€…æ˜¯rpush aï¼Œrpush b ï¼Œrpush cï¼Œå¯ä»¥å†™æˆrpush aï¼Œbï¼Œc</p><p>æœ¬è´¨å°±æ˜¯æŠŠè¿‡æœŸçš„ï¼Œæ— ç”¨çš„ï¼Œé‡å¤çš„ï¼Œå¯ä»¥ä¼˜åŒ–çš„å‘½ä»¤ï¼Œæ¥ä¼˜åŒ–</p><p>è¿™æ ·å¯ä»¥å‡å°‘ç£ç›˜å ç”¨é‡ï¼ŒåŠ é€Ÿæ¢å¤é€Ÿåº¦</p><p><strong>å®ç°æ–¹å¼</strong></p><p>bgrewriteaofï¼š</p><p>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€bgrewriteaofå‘½ä»¤ï¼ŒæœåŠ¡ç«¯ä¼šèµ·ä¸€ä¸ªforkè¿›ç¨‹ï¼Œå®ŒæˆAOFé‡å†™</p><p><strong>é…ç½®æ–¹å¼</strong></p><pre class=" language-python"><code class="language-python">appendonly yes <span class="token comment" spellcheck="true">#å°†è¯¥é€‰é¡¹è®¾ç½®ä¸ºyesï¼Œæ‰“å¼€</span>appendfilename <span class="token string">"appendonly-$&amp;#123;port&amp;#125;.aof"</span> #æ–‡ä»¶ä¿å­˜çš„åå­—appendfsync everysec <span class="token comment" spellcheck="true">#é‡‡ç”¨ç¬¬äºŒç§ç­–ç•¥</span>dir <span class="token operator">/</span>bigdiskpath <span class="token comment" spellcheck="true">#å­˜æ”¾çš„è·¯å¾„</span>no<span class="token operator">-</span>appendfsync<span class="token operator">-</span>on<span class="token operator">-</span>rewrite yes <span class="token comment" spellcheck="true">#åœ¨aofé‡å†™çš„æ—¶å€™ï¼Œæ˜¯å¦è¦åšaofçš„appendæ“ä½œï¼Œå› ä¸ºaofé‡å†™æ¶ˆè€—æ€§èƒ½ï¼Œç£ç›˜æ¶ˆè€—ï¼Œæ­£å¸¸aofå†™ç£ç›˜æœ‰ä¸€å®šçš„å†²çªï¼Œè¿™æ®µæœŸé—´çš„æ•°æ®ï¼Œå…è®¸ä¸¢å¤±</span></code></pre><h2 id="äºŒã€ä¸»ä»å¤åˆ¶"><a href="#äºŒã€ä¸»ä»å¤åˆ¶" class="headerlink" title="äºŒã€ä¸»ä»å¤åˆ¶"></a>äºŒã€ä¸»ä»å¤åˆ¶</h2><p>QPSè¾¾åˆ°ç“¶é¢ˆå°±å¯ä»¥åšä¸»ä»å¤åˆ¶</p><ul><li><p>ä¸€ä¸»ä¸€ä»æˆ–è€…ä¸€ä¸»å¤šä»</p></li><li><p>åšè¯»å†™åˆ†ç¦»ï¼Œæ•°æ®å‰¯æœ¬</p></li><li><p>æ‰©å±•æ“ä½œæ•°æ®çš„æ–°èƒ½</p></li><li><p>ä¸€ä¸ªmasterï¼ˆä¸»ï¼‰å¯ä»¥æœ‰å¤šä¸ªslaveï¼ˆä»ï¼‰</p></li><li><p>ä¸€ä¸ªä»æ™ºèƒ½å±äºä¸€ä¸ªä¸»</p></li><li><p>æ•°æ®æµå‘æ˜¯å•å‘çš„ï¼Œä»ä¸»åˆ°ä»</p></li></ul><p><strong>åŸç†</strong></p><pre><code>1 ä»åº“é€šè¿‡ slaveof ip ç«¯å£è¿æ¥ä¸»åº“ï¼Œå¹¶å‘é€ä¸€ä¸ªSYNCè¯·æ±‚ç»™ä¸»åº“2 ä¸»åº“æ¥å—åˆ°SYNCï¼Œä¼šç«‹å³å‡ºå‘bgsaveï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œåå°ä¿å­˜RDBï¼Œå‘é€ç»™ä»åº“3 ä»åº“æ¥æ”¶åˆ°RDBæ–‡ä»¶ä¼šæ‰§è¡Œï¼ˆå°±æ˜¯æŠŠæ•°æ®è¯»å‡ºæ¥ï¼‰4 æ­¤æ—¶ä¸»ä»å¤åˆ¶å°±èƒ½æ­£å¸¸å·¥ä½œäº†ï¼Œä¸»åº“ä¼šå°†æ–°çš„æ“ä½œä»¥å‘½ä»¤çš„å½¢å¼é™†ç»­å‘ç»™ä»åº“5 æ‰€æœ‰çš„å¤åˆ¶ä¿¡æ¯éƒ½å¯ä»¥ä»infoä¸­æŸ¥åˆ°6 å¦‚æœå‘ç”Ÿä¸»ä»å…³ç³»æ–­å¼€æ—¶,ä»åº“æ•°æ®æ²¡æœ‰ä»»ä½•æŸå,åœ¨ä¸‹æ¬¡é‡è¿ä¹‹å,ä»åº“å‘é€PSYNCç»™ä¸»åº“7 ä¸»åº“åªä¼šå°†ä»åº“ç¼ºå¤±éƒ¨åˆ†çš„æ•°æ®åŒæ­¥ç»™ä»åº“åº”ç”¨,è¾¾åˆ°å¿«é€Ÿæ¢å¤ä¸»ä»çš„ç›®çš„</code></pre><h3 id="1-è¾…åŠ©é…ç½®"><a href="#1-è¾…åŠ©é…ç½®" class="headerlink" title="1 è¾…åŠ©é…ç½®"></a>1 è¾…åŠ©é…ç½®</h3><pre class=" language-python"><code class="language-python">min<span class="token operator">-</span>slaves<span class="token operator">-</span>to<span class="token operator">-</span>write <span class="token number">1</span>min<span class="token operator">-</span>slaves<span class="token operator">-</span>max<span class="token operator">-</span>lag <span class="token number">3</span><span class="token comment" spellcheck="true">#é‚£ä¹ˆåœ¨ä»æœåŠ¡å™¨çš„æ•°é‡å°‘äº1ä¸ªï¼Œæˆ–è€…ä¸‰ä¸ªä»æœåŠ¡å™¨çš„å»¶è¿Ÿï¼ˆlagï¼‰å€¼éƒ½å¤§äºæˆ–ç­‰äº3ç§’æ—¶ï¼Œä¸»æœåŠ¡å™¨å°†æ‹’ç»æ‰§è¡Œå†™å‘½ä»¤</span></code></pre><h3 id="2-å¤åˆ¶é…ç½®"><a href="#2-å¤åˆ¶é…ç½®" class="headerlink" title="2 å¤åˆ¶é…ç½®"></a>2 å¤åˆ¶é…ç½®</h3><h4 id="2-1-slaveå‘½ä»¤"><a href="#2-1-slaveå‘½ä»¤" class="headerlink" title="2.1 slaveå‘½ä»¤"></a>2.1 slaveå‘½ä»¤</h4><pre class=" language-python"><code class="language-python"><span class="token number">6380</span>æ˜¯ä»ï¼Œ<span class="token number">6379</span>æ˜¯ä¸»åœ¨<span class="token number">6380</span>ä¸Šæ‰§è¡Œï¼ˆå»ä»åº“é…ç½®ï¼Œé…ç½®ä¸»åº“ï¼‰slaveof <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token number">6379</span> <span class="token comment" spellcheck="true">#å¼‚æ­¥</span>slaveof no one <span class="token comment" spellcheck="true">#å–æ¶ˆå¤åˆ¶ï¼Œä¸ä¼šæŠŠä¹‹å‰çš„æ•°æ®æ¸…é™¤</span></code></pre><h4 id="2-2-é…ç½®æ–‡ä»¶"><a href="#2-2-é…ç½®æ–‡ä»¶" class="headerlink" title="2.2 é…ç½®æ–‡ä»¶"></a>2.2 é…ç½®æ–‡ä»¶</h4><pre class=" language-python"><code class="language-python">slaveof ip port <span class="token comment" spellcheck="true">#é…ç½®ä»èŠ‚ç‚¹ipå’Œç«¯å£</span>slave<span class="token operator">-</span>read<span class="token operator">-</span>only yes <span class="token comment" spellcheck="true">#ä»èŠ‚ç‚¹åªè¯»ï¼Œå› ä¸ºå¯è¯»å¯å†™ï¼Œæ•°æ®ä¼šä¹±</span><span class="token triple-quoted-string string">'''mkdir -p redis1/conf redis1/data redis2/conf redis2/data redis3/conf redis3/datavim redis.confdaemonize nopidfile redis.pidbind 0.0.0.0protected-mode noport 6379timeout 0logfile redis.logdbfilename dump.rdbdir /dataslaveof 10.0.0.101 6379slave-read-only yescp redis.conf /home/redis2/conf/docker run -p 6379:6379 --name redis_6379 -v /home/redis1/conf/redis.conf:/etc/redis/redis.conf -v /home/redis1/data:/data -d redis redis-server /etc/redis/redis.confdocker run -p 6378:6379 --name redis_6378 -v /home/redis2/conf/redis.conf:/etc/redis/redis.conf -v /home/redis2/data:/data -d redis redis-server /etc/redis/redis.confdocker run -p 6377:6379 --name redis_6377 -v /home/redis3/conf/redis.conf:/etc/redis/redis.conf -v /home/redis3/data:/data -d redis redis-server /etc/redis/redis.confinfo replication'''</span></code></pre><h4 id="2-3-å¤åˆ¶å¸¸è§çš„é—®é¢˜"><a href="#2-3-å¤åˆ¶å¸¸è§çš„é—®é¢˜" class="headerlink" title="2.3 å¤åˆ¶å¸¸è§çš„é—®é¢˜"></a>2.3 å¤åˆ¶å¸¸è§çš„é—®é¢˜</h4><pre class=" language-python"><code class="language-python"><span class="token number">1</span> è¯»å†™åˆ†ç¦»è¯»æµé‡åˆ†æ‘Šåˆ°ä»èŠ‚ç‚¹å¯èƒ½é‡åˆ°é—®é¢˜ï¼šå¤åˆ¶æ•°æ®å»¶è¿Ÿï¼Œè¯»åˆ°è¿‡æœŸæ•°æ®ï¼Œä»èŠ‚ç‚¹æ•…éšœ<span class="token number">2</span> ä¸»ä»é…ç½®ä¸ä¸€è‡´maxmemoryä¸ä¸€è‡´ï¼šä¸¢å¤±æ•°æ®æ•°æ®ç»“æ„ä¼˜åŒ–å‚æ•°ï¼šä¸»èŠ‚ç‚¹åšäº†ä¼˜åŒ–ï¼Œä»èŠ‚ç‚¹æ²¡æœ‰è®¾ç½®ä¼˜åŒ–ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜<span class="token number">3</span> è§„é¿å…¨é‡å¤åˆ¶ç¬¬ä¸€æ¬¡å…¨é‡å¤åˆ¶ï¼Œä¸å¯é¿å…ï¼šå°ä¸»èŠ‚ç‚¹ï¼Œä½å³°<span class="token punctuation">(</span>å¤œé—´<span class="token punctuation">)</span>èŠ‚ç‚¹è¿è¡Œidä¸åŒ¹é…ï¼šä¸»èŠ‚ç‚¹é‡å¯<span class="token punctuation">(</span>è¿è¡Œidå˜åŒ–<span class="token punctuation">)</span>å¤åˆ¶æŒ¤å‹ç¼“å†²åŒºä¸è¶³ï¼šå¢å¤§å¤åˆ¶ç¼“å†²åŒºå¤§å°ï¼Œrel_backlog_size<span class="token number">4</span> è§„é¿å¤åˆ¶é£æš´å•ä¸»èŠ‚ç‚¹å¤åˆ¶é£æš´ï¼Œä¸»èŠ‚ç‚¹é‡å¯ï¼Œæ‰€æœ‰ä»èŠ‚ç‚¹å¤åˆ¶</code></pre><h2 id="ä¸‰ã€redis-Sentinelï¼ˆå“¨å…µï¼‰"><a href="#ä¸‰ã€redis-Sentinelï¼ˆå“¨å…µï¼‰" class="headerlink" title="ä¸‰ã€redis-Sentinelï¼ˆå“¨å…µï¼‰"></a>ä¸‰ã€redis-Sentinelï¼ˆå“¨å…µï¼‰</h2><p>å“¨å…µå°±æ˜¯ä¸ºäº†å®ç°ä¸»ä»å¤åˆ¶çš„é«˜å¯ç”¨</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#ä¸»ä»å¤åˆ¶å­˜åœ¨çš„é—®é¢˜ï¼š</span><span class="token comment" spellcheck="true">#1 ä¸»ä»å¤åˆ¶ï¼Œä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œéœ€è¦åšæ•…éšœè½¬ç§»ï¼Œå¯ä»¥æ‰‹åŠ¨è½¬ç§»ï¼šè®©å…¶ä¸­ä¸€ä¸ªslaveå˜æˆmaster</span><span class="token comment" spellcheck="true">#2 ä¸»ä»å¤åˆ¶ï¼Œåªèƒ½ä¸»å†™æ•°æ®ï¼Œæ‰€ä»¥å†™èƒ½åŠ›å’Œå­˜å‚¨èƒ½åŠ›æœ‰é™</span></code></pre><p><strong>æ¶æ„è¯´æ˜</strong></p><p>1 å¤šä¸ªsentinelå‘ç°å¹¶ç¡®è®¤masteræœ‰é—®é¢˜</p><p>2 é€‰ä¸¾è§¦ä¸€ä¸ªsentinelä½œä¸ºé¢†å¯¼</p><p>3 é€‰å–ä¸€ä¸ªslaveä½œä¸ºæ–°çš„master</p><p>4 é€šçŸ¥å…¶ä½™slaveæˆä¸ºæ–°çš„masterçš„slave</p><p>5 é€šçŸ¥å®¢æˆ·ç«¯ä¸»ä»å˜åŒ–</p><p>6 ç­‰å¾…è€çš„masterå¤æ´»æˆä¸ºæ–°masterçš„slave</p><h3 id="1-å®‰è£…é…ç½®"><a href="#1-å®‰è£…é…ç½®" class="headerlink" title="1 å®‰è£…é…ç½®"></a>1 å®‰è£…é…ç½®</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#é…ç½®å¼€å¯sentinelç›‘æ§ä¸»èŠ‚ç‚¹</span>mkdir <span class="token operator">-</span>p redis4<span class="token operator">/</span>conf redis4<span class="token operator">/</span>data redis5<span class="token operator">/</span>conf redis5<span class="token operator">/</span>data redis6<span class="token operator">/</span>data redis6<span class="token operator">/</span>confvi sentinel<span class="token punctuation">.</span>confport <span class="token number">26379</span>daemonize yesdir dataprotected<span class="token operator">-</span>mode nobind <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span>logfile <span class="token string">"redis_sentinel.log"</span>sentinel monitor mymaster <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token number">6379</span> <span class="token number">2</span>sentinel down<span class="token operator">-</span>after<span class="token operator">-</span>milliseconds mymaster <span class="token number">30000</span>sentinel parallel<span class="token operator">-</span>syncs mymaster <span class="token number">1</span>sentinel failover<span class="token operator">-</span>timeout mymaster <span class="token number">180000</span>docker run <span class="token operator">-</span>p <span class="token number">26379</span><span class="token punctuation">:</span><span class="token number">26379</span> <span class="token operator">-</span><span class="token operator">-</span>name redis_26379 <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>redis4<span class="token operator">/</span>conf<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>conf<span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>conf <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>redis4<span class="token operator">/</span>data<span class="token punctuation">:</span><span class="token operator">/</span>data <span class="token operator">-</span>d redis redis<span class="token operator">-</span>sentinel <span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>confdocker run <span class="token operator">-</span>p <span class="token number">26378</span><span class="token punctuation">:</span><span class="token number">26379</span> <span class="token operator">-</span><span class="token operator">-</span>name redis_26378 <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>redis5<span class="token operator">/</span>conf<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>conf<span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>conf <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>redis5<span class="token operator">/</span>data<span class="token punctuation">:</span><span class="token operator">/</span>data <span class="token operator">-</span>d redis redis<span class="token operator">-</span>sentinel <span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>confdocker run <span class="token operator">-</span>p <span class="token number">26377</span><span class="token punctuation">:</span><span class="token number">26379</span> <span class="token operator">-</span><span class="token operator">-</span>name redis_26377 <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>redis6<span class="token operator">/</span>conf<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>conf<span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>conf <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>redis6<span class="token operator">/</span>data<span class="token punctuation">:</span><span class="token operator">/</span>data <span class="token operator">-</span>d redis redis<span class="token operator">-</span>sentinel <span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>sentinel<span class="token punctuation">.</span>confredis<span class="token operator">-</span>sentinel sentinel<span class="token punctuation">.</span>confinfoé…ç½®ä¼šé‡å†™ï¼Œè‡ªåŠ¨å‘ç°slave</code></pre><pre class=" language-python"><code class="language-python">sentinel monitor mymaster <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token number">6379</span> <span class="token number">2</span>sentinel down<span class="token operator">-</span>after<span class="token operator">-</span>milliseconds mymaster <span class="token number">30000</span>sentinel parallel<span class="token operator">-</span>syncs mymaster <span class="token number">1</span>sentinel failover<span class="token operator">-</span>timeout mymaster <span class="token number">180000</span>sentinel monitor <span class="token operator">&lt;</span>master<span class="token operator">-</span>name<span class="token operator">></span> <span class="token operator">&lt;</span>ip<span class="token operator">></span> <span class="token operator">&lt;</span>redis<span class="token operator">-</span>port<span class="token operator">></span> <span class="token operator">&lt;</span>quorum<span class="token operator">></span>å‘Šè¯‰sentinelå»ç›‘å¬åœ°å€ä¸ºip<span class="token punctuation">:</span>portçš„ä¸€ä¸ªmasterï¼Œè¿™é‡Œçš„master<span class="token operator">-</span>nameå¯ä»¥è‡ªå®šä¹‰ï¼Œquorumæ˜¯ä¸€ä¸ªæ•°å­—ï¼ŒæŒ‡æ˜å½“æœ‰å¤šå°‘ä¸ªsentinelè®¤ä¸ºä¸€ä¸ªmasterå¤±æ•ˆæ—¶ï¼Œmasteræ‰ç®—çœŸæ­£å¤±æ•ˆsentinel auth<span class="token operator">-</span><span class="token keyword">pass</span> <span class="token operator">&lt;</span>master<span class="token operator">-</span>name<span class="token operator">></span> <span class="token operator">&lt;</span>password<span class="token operator">></span>è®¾ç½®è¿æ¥masterå’Œslaveæ—¶çš„å¯†ç ï¼Œæ³¨æ„çš„æ˜¯sentinelä¸èƒ½åˆ†åˆ«ä¸ºmasterå’Œslaveè®¾ç½®ä¸åŒçš„å¯†ç ï¼Œå› æ­¤masterå’Œslaveçš„å¯†ç åº”è¯¥è®¾ç½®ç›¸åŒã€‚sentinel down<span class="token operator">-</span>after<span class="token operator">-</span>milliseconds <span class="token operator">&lt;</span>master<span class="token operator">-</span>name<span class="token operator">></span> <span class="token operator">&lt;</span>milliseconds<span class="token operator">></span> è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†éœ€è¦å¤šå°‘å¤±æ•ˆæ—¶é—´ï¼Œä¸€ä¸ªmasteræ‰ä¼šè¢«è¿™ä¸ªsentinelä¸»è§‚åœ°è®¤ä¸ºæ˜¯ä¸å¯ç”¨çš„ã€‚ å•ä½æ˜¯æ¯«ç§’ï¼Œé»˜è®¤ä¸º<span class="token number">30</span>ç§’sentinel parallel<span class="token operator">-</span>syncs <span class="token operator">&lt;</span>master<span class="token operator">-</span>name<span class="token operator">></span> <span class="token operator">&lt;</span>numslaves<span class="token operator">></span> è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œè¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º <span class="token number">1</span> æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚sentinel failover<span class="token operator">-</span>timeout <span class="token operator">&lt;</span>master<span class="token operator">-</span>name<span class="token operator">></span> <span class="token operator">&lt;</span>milliseconds<span class="token operator">></span>failover<span class="token operator">-</span>timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š     <span class="token number">1</span><span class="token punctuation">.</span> åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚   <span class="token number">2</span><span class="token punctuation">.</span> å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚    <span class="token number">3</span><span class="token punctuation">.</span>å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚    <span class="token number">4</span><span class="token punctuation">.</span>å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel<span class="token operator">-</span>syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†ã€‚</code></pre><pre class=" language-python"><code class="language-python"><span class="token number">1</span> æ­ä¸€ä¸ªä¸€ä¸»ä¸¤ä»<span class="token comment" spellcheck="true">#åˆ›å»ºä¸‰ä¸ªé…ç½®æ–‡ä»¶ï¼š</span><span class="token comment" spellcheck="true">#ç¬¬ä¸€ä¸ªæ˜¯ä¸»é…ç½®æ–‡ä»¶</span>daemonize yespidfile <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>redis<span class="token punctuation">.</span>pidport <span class="token number">6379</span>dir <span class="token string">"/opt/soft/redis/data"</span>logfile â€œ<span class="token number">6379.</span>logâ€<span class="token comment" spellcheck="true">#ç¬¬äºŒä¸ªæ˜¯ä»é…ç½®æ–‡ä»¶</span>daemonize yespidfile <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>redis2<span class="token punctuation">.</span>pidport <span class="token number">6378</span>dir <span class="token string">"/opt/soft/redis/data2"</span>logfile â€œ<span class="token number">6378.</span>logâ€slaveof <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token number">6379</span>slave<span class="token operator">-</span>read<span class="token operator">-</span>only yes<span class="token comment" spellcheck="true">#ç¬¬ä¸‰ä¸ªæ˜¯ä»é…ç½®æ–‡ä»¶</span>daemonize yespidfile <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>redis3<span class="token punctuation">.</span>pidport <span class="token number">6377</span>dir <span class="token string">"/opt/soft/redis/data3"</span>logfile â€œ<span class="token number">6377.</span>logâ€slaveof <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token number">6379</span>slave<span class="token operator">-</span>read<span class="token operator">-</span>only yes<span class="token comment" spellcheck="true">#æŠŠä¸‰ä¸ªredisæœåŠ¡éƒ½å¯åŠ¨èµ·æ¥</span><span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>server redis_6379<span class="token punctuation">.</span>conf<span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>server redis_6378<span class="token punctuation">.</span>conf<span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>server redis_6377<span class="token punctuation">.</span>conf<span class="token number">2</span> æ­å»ºå“¨å…µ<span class="token comment" spellcheck="true"># sentinel.confè¿™ä¸ªæ–‡ä»¶</span><span class="token comment" spellcheck="true"># æŠŠå“¨å…µä¹Ÿå½“æˆä¸€ä¸ªredisæœåŠ¡å™¨</span>åˆ›å»ºä¸‰ä¸ªé…ç½®æ–‡ä»¶åˆ†åˆ«å«sentinel_26379<span class="token punctuation">.</span>conf sentinel_26378<span class="token punctuation">.</span>conf  sentinel_26377<span class="token punctuation">.</span>conf<span class="token comment" spellcheck="true"># å½“å‰è·¯å¾„ä¸‹åˆ›å»º data1 data2 data3 ä¸ªæ–‡ä»¶å¤¹</span><span class="token comment" spellcheck="true">#å†…å®¹å¦‚ä¸‹(éœ€è¦ä¿®æ”¹ç«¯å£ï¼Œæ–‡ä»¶åœ°å€æ—¥å¿—æ–‡ä»¶åå­—)</span>port <span class="token number">26379</span>daemonize yesdir <span class="token punctuation">.</span><span class="token operator">/</span>data3protected<span class="token operator">-</span>mode nobind <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span>logfile <span class="token string">"redis_sentinel3.log"</span>sentinel monitor mymaster <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token number">6379</span> <span class="token number">2</span>sentinel down<span class="token operator">-</span>after<span class="token operator">-</span>milliseconds mymaster <span class="token number">30000</span>sentinel parallel<span class="token operator">-</span>syncs mymaster <span class="token number">1</span>sentinel failover<span class="token operator">-</span>timeout mymaster <span class="token number">180000</span><span class="token comment" spellcheck="true">#å¯åŠ¨ä¸‰ä¸ªå“¨å…µ</span><span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>sentinel sentinel_26379<span class="token punctuation">.</span>conf<span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>sentinel sentinel_26378<span class="token punctuation">.</span>conf<span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>sentinel sentinel_26377<span class="token punctuation">.</span>conf<span class="token comment" spellcheck="true"># ç™»é™†å“¨å…µ</span><span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>redis<span class="token operator">-</span>cli <span class="token operator">-</span>p <span class="token number">26377</span><span class="token comment" spellcheck="true"># è¾“å…¥ info</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹å“¨å…µçš„é…ç½®æ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„</span><span class="token comment" spellcheck="true"># ä¸»åŠ¨åœæ‰ä¸»redis 6379ï¼Œå“¨å…µä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªä»åº“ä½œä¸ºä¸»åº“</span>redis<span class="token operator">-</span>cli <span class="token operator">-</span>p <span class="token number">6379</span>shutdown<span class="token comment" spellcheck="true">#ç­‰å¾…åŸæ¥çš„ä¸»åº“å¯åŠ¨ï¼Œè¯¥ä¸»åº“ä¼šå˜æˆä»åº“</span></code></pre><h3 id="2-å®¢æˆ·ç«¯é“¾æ¥"><a href="#2-å®¢æˆ·ç«¯é“¾æ¥" class="headerlink" title="2 å®¢æˆ·ç«¯é“¾æ¥"></a>2 å®¢æˆ·ç«¯é“¾æ¥</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> redis<span class="token keyword">from</span> redis<span class="token punctuation">.</span>sentinel <span class="token keyword">import</span> Sentinel<span class="token comment" spellcheck="true"># è¿æ¥å“¨å…µæœåŠ¡å™¨(ä¸»æœºåä¹Ÿå¯ä»¥ç”¨åŸŸå)</span><span class="token comment" spellcheck="true"># 10.0.0.101:26379</span>sentinel <span class="token operator">=</span> Sentinel<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'10.0.0.101'</span><span class="token punctuation">,</span> <span class="token number">26379</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                     <span class="token punctuation">(</span><span class="token string">'10.0.0.101'</span><span class="token punctuation">,</span> <span class="token number">26378</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                     <span class="token punctuation">(</span><span class="token string">'10.0.0.101'</span><span class="token punctuation">,</span> <span class="token number">26377</span><span class="token punctuation">)</span>             <span class="token punctuation">]</span><span class="token punctuation">,</span>                    socket_timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>sentinel<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è·å–ä¸»æœåŠ¡å™¨åœ°å€</span>master <span class="token operator">=</span> sentinel<span class="token punctuation">.</span>discover_master<span class="token punctuation">(</span><span class="token string">'mymaster'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>master<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è·å–ä»æœåŠ¡å™¨åœ°å€</span>slave <span class="token operator">=</span> sentinel<span class="token punctuation">.</span>discover_slaves<span class="token punctuation">(</span><span class="token string">'mymaster'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>slave<span class="token punctuation">)</span><span class="token comment" spellcheck="true">##### è¯»å†™åˆ†ç¦»</span><span class="token comment" spellcheck="true"># è·å–ä¸»æœåŠ¡å™¨è¿›è¡Œå†™å…¥</span><span class="token comment" spellcheck="true"># master = sentinel.master_for('mymaster', socket_timeout=0.5)</span><span class="token comment" spellcheck="true"># w_ret = master.set('foo', 'bar')</span><span class="token comment" spellcheck="true"># slave = sentinel.slave_for('mymaster', socket_timeout=0.5)</span><span class="token comment" spellcheck="true"># r_ret = slave.get('foo')</span><span class="token comment" spellcheck="true"># print(r_ret)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€æŒä¹…åŒ–&quot;&gt;&lt;a href=&quot;#ä¸€ã€æŒä¹…åŒ–&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€æŒä¹…åŒ–&quot;&gt;&lt;/a&gt;ä¸€ã€æŒä¹…åŒ–&lt;/h2&gt;&lt;p&gt;æŒä¹…åŒ–è¡¨ç¤ºæŠŠæ•°æ®å­˜å‚¨åˆ°ç¡¬ç›˜çš„è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;æŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿«ç…§ï¼šæŸäº‹æŸåˆ»æ•°æ®åº“çš„å®Œ</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="æ•°æ®åº“" scheme="http://huang_zhao.gitee.io/task/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="Redisé«˜çº§" scheme="http://huang_zhao.gitee.io/task/tags/Redis%E9%AB%98%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>Rabbitmqã€Rpc</title>
    <link href="http://huang_zhao.gitee.io/task/2020/03/24/Rabbitmq%EF%BC%8CRpc/"/>
    <id>http://huang_zhao.gitee.io/task/2020/03/24/Rabbitmq%EF%BC%8CRpc/</id>
    <published>2020-03-24T12:30:17.000Z</published>
    <updated>2020-09-09T11:19:32.791Z</updated>
    
    <content type="html"><![CDATA[<p>æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»ï¼š<strong><a href="http://mrw.so/6m21VY">http://mrw.so/6m21VY</a></strong></p><h3 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1 å®‰è£…"></a>1 å®‰è£…</h3><pre class=" language-python"><code class="language-python"><span class="token number">1</span> åŸç”Ÿå®‰è£…    <span class="token operator">-</span>å®‰è£…æ‰©å±•epelæº    <span class="token operator">-</span>yum <span class="token operator">-</span>y install erlang    <span class="token operator">-</span>yum <span class="token operator">-</span>y install rabbitmq<span class="token operator">-</span>server    <span class="token operator">-</span>systemctl start rabbitmq<span class="token operator">-</span>server<span class="token number">2</span> dockeræ‹‰å–    <span class="token operator">-</span>docker pull rabbitmq<span class="token punctuation">:</span>managementï¼ˆè‡ªåŠ¨å¼€å¯äº†webç®¡ç†ç•Œé¢ï¼‰    <span class="token operator">-</span>docker run <span class="token operator">-</span>di <span class="token operator">-</span><span class="token operator">-</span>name rabbitmq <span class="token operator">-</span>e RABBITMQ_DEFAULT_USER<span class="token operator">=</span>admin <span class="token operator">-</span>e RABBITMQ_DEFAULT_PASS<span class="token operator">=</span>admin <span class="token operator">-</span>p <span class="token number">15672</span><span class="token punctuation">:</span><span class="token number">15672</span> <span class="token operator">-</span>p <span class="token number">5672</span><span class="token punctuation">:</span><span class="token number">5672</span> rabbitmq<span class="token punctuation">:</span>management<span class="token number">3</span> <span class="token number">5672</span>ï¼šæ˜¯rabbitmqçš„é»˜è®¤ç«¯å£  <span class="token number">15672</span>ï¼šwebç®¡ç†ç•Œé¢çš„ç«¯å£<span class="token number">4</span> åˆ›å»ºç”¨æˆ·rabbitmqctl add_user lqz <span class="token number">123</span><span class="token number">5</span> åˆ†é…æƒé™rabbitmqctl set_user_tags lqz administratorrabbitmqctl set_permissions <span class="token operator">-</span>p <span class="token string">"/"</span> lqz <span class="token string">".*"</span> <span class="token string">".*"</span> <span class="token string">".*"</span></code></pre><h3 id="2-åŸºæœ¬ä½¿ç”¨"><a href="#2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2 åŸºæœ¬ä½¿ç”¨"></a>2 åŸºæœ¬ä½¿ç”¨</h3><h4 id="2-1-æ¶ˆæ¯å®‰å…¨â˜ack"><a href="#2-1-æ¶ˆæ¯å®‰å…¨â˜ack" class="headerlink" title="2.1 æ¶ˆæ¯å®‰å…¨â˜ack"></a>2.1 æ¶ˆæ¯å®‰å…¨â˜ack</h4><p>æ˜¯å¦å“åº”æ•°æ®å·²ç»è¢«æ¥å—</p><p>å°±æ˜¯æ¶ˆè´¹è€…ä¸­æ¥å—æ•°æ®çš„æ—¶å€™é…ç½®ä¸€ä¸ªå‚æ•°auto_ack=Falseï¼Œå°±ä¼šå¯¼è‡´æ‹¿åˆ°æ•°æ®äº†ï¼Œä½†æ˜¯æ•°æ®è¿˜åœ¨é˜Ÿåˆ—ä¸­</p><p><strong>æ¶ˆè´¹è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pika<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºä¸€ä¸ªç”¨æˆ·å¯¹è±¡</span>    credentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"admin"</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºä¸€ä¸ªé“¾æ¥å¯¹è±¡</span>    connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'121.36.98.49'</span><span class="token punctuation">,</span> credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºæ“ä½œå¯¹è±¡</span>    channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼ˆé»˜è®¤æ˜¯åœ¨ç”Ÿäº§è€…ä¸­åˆ›å»ºï¼Œä¸ºäº†é˜²æ­¢æ¶ˆè´¹è€…å…ˆå¯åŠ¨ï¼Œå¤šå†™ä¹Ÿä¸ä¼šé‡å¤åˆ›å»ºï¼‰</span>    channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'hello'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" [x] Received %r"</span> <span class="token operator">%</span> body<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># ç­‰åˆ°helloé˜Ÿåˆ—ä¸­å‡ºç°æ•°æ®ï¼Œå¦‚æœå‡ºç°åˆ™æ‰§è¡Œcallback</span>    channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'hello'</span><span class="token punctuation">,</span> on_message_callback<span class="token operator">=</span>callback<span class="token punctuation">,</span> auto_ack<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># ä¸€ç›´å¯åŠ¨ç­‰å¾…æ¥æ”¶æ¶ˆæ¯</span>    channel<span class="token punctuation">.</span>start_consuming<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    main<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>ç”Ÿäº§è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pika<span class="token comment" spellcheck="true"># æ‹¿åˆ°è¿æ¥å¯¹è±¡</span><span class="token comment" spellcheck="true"># connection = pika.BlockingConnection(pika.ConnectionParameters('101.133.225.166'))</span><span class="token comment" spellcheck="true"># æœ‰ç”¨æˆ·åå¯†ç çš„æƒ…å†µ</span>credentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'121.36.98.49'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ‹¿åˆ°channelå¯¹è±¡</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—</span>channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'hello'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># æŒ‡å®šé˜Ÿåˆ—åå­—</span><span class="token comment" spellcheck="true"># ç”Ÿäº§è€…å‘helloé˜Ÿåˆ—ä¸­æ”¾ä¸€æ¡æ¶ˆæ¯"lqz js nb"</span>channel<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>                      routing_key<span class="token operator">=</span><span class="token string">'hello'</span><span class="token punctuation">,</span>                      body<span class="token operator">=</span><span class="token string">'lqz js nb'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" Sent 'Hello World!'"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å…³é—­è¿æ¥</span>connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="2-2-æ¶ˆæ¯å®‰å…¨â˜durableæŒä¹…åŒ–"><a href="#2-2-æ¶ˆæ¯å®‰å…¨â˜durableæŒä¹…åŒ–" class="headerlink" title="2.2 æ¶ˆæ¯å®‰å…¨â˜durableæŒä¹…åŒ–"></a>2.2 æ¶ˆæ¯å®‰å…¨â˜durableæŒä¹…åŒ–</h4><p>durableæŒä¹…åŒ–æ¶ˆè´¹è€…ä¸éœ€è¦åŠ¨ï¼Œåªè¦åœ¨ç”Ÿäº§è€…äº§ç”Ÿæ•°æ®çš„æ—¶å€™é…ç½®ä¸€ä¸ªå‚æ•°å³å¯</p><p>æ³¨æ„ï¼šé…ç½®æŒä¹…åŒ–å¿…é¡»æ˜¯æ–°çš„é˜Ÿåˆ—</p><p><strong>ç”Ÿäº§è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—),durable=Trueæ”¯æŒæŒä¹…åŒ–ï¼Œé˜Ÿåˆ—å¿…é¡»æ˜¯æ–°çš„æ‰å¯ä»¥</span>channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'lqz1'</span><span class="token punctuation">,</span>durable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>                      routing_key<span class="token operator">=</span><span class="token string">'lqz1'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># æ¶ˆæ¯é˜Ÿåˆ—åç§°</span>                      body<span class="token operator">=</span><span class="token string">'111'</span><span class="token punctuation">,</span>                      properties<span class="token operator">=</span>pika<span class="token punctuation">.</span>BasicProperties<span class="token punctuation">(</span>                          delivery_mode<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true"># make message persistent,æ¶ˆæ¯ä¹ŸæŒä¹…åŒ–</span>                      <span class="token punctuation">)</span>                      <span class="token punctuation">)</span>connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="2-3-é—²ç½®æ¶ˆè´¹"><a href="#2-3-é—²ç½®æ¶ˆè´¹" class="headerlink" title="2.3 é—²ç½®æ¶ˆè´¹"></a>2.3 é—²ç½®æ¶ˆè´¹</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¶ˆè´¹è€…ï¼Œæ˜¯æŒ‰ç…§é¡ºåºç¬¬ä¸€ä¸ªæ¶ˆæ¯ç»™ç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œç¬¬äºŒä¸ªæ¶ˆæ¯ç»™ç¬¬äºŒä¸ªæ¶ˆè´¹è€…</p><p>ä½†æ˜¯å¯èƒ½ç¬¬ä¸€ä¸ªæ¶ˆæ¯çš„æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯å¾ˆè€—æ—¶ï¼Œä¸€ç›´æ²¡ç»“æŸï¼Œå°±å¯ä»¥è®©ç¬¬äºŒä¸ªæ¶ˆè´¹è€…ä¼˜å…ˆè·å¾—é—²ç½®çš„æ¶ˆæ¯</p><p>å°±æ˜¯åœ¨æ¶ˆè´¹è€…æ¥å—æ•°æ®å‰é…ç½®ä¸€ä¸ªå‚æ•°</p><p><strong>æ¶ˆè´¹è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—)</span><span class="token comment" spellcheck="true"># channel.queue_declare(queue='lqz123')</span><span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r"</span> <span class="token operator">%</span> body<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># é€šçŸ¥æœåŠ¡ç«¯ï¼Œæ¶ˆæ¯å–èµ°äº†ï¼Œå¦‚æœauto_ack=Falseï¼Œä¸åŠ ä¸‹é¢ï¼Œæ¶ˆæ¯ä¼šä¸€ç›´å­˜åœ¨</span>    ch<span class="token punctuation">.</span>basic_ack<span class="token punctuation">(</span>delivery_tag<span class="token operator">=</span>method<span class="token punctuation">.</span>delivery_tag<span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_qos<span class="token punctuation">(</span>prefetch_count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#####å°±åªæœ‰è¿™ä¸€å¥è¯ è°é—²ç½®è°è·å–ï¼Œæ²¡å¿…è¦æŒ‰ç…§é¡ºåºä¸€ä¸ªä¸€ä¸ªæ¥</span>channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'lqz123'</span><span class="token punctuation">,</span>on_message_callback<span class="token operator">=</span>callback<span class="token punctuation">,</span>auto_ack<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>start_consuming<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="2-4-å‘å¸ƒè®¢é˜…"><a href="#2-4-å‘å¸ƒè®¢é˜…" class="headerlink" title="2.4 å‘å¸ƒè®¢é˜…"></a>2.4 å‘å¸ƒè®¢é˜…</h4><p>å‘å¸ƒè®¢é˜…çš„æœ¬è´¨æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå‘å¸ƒè€…å‘å¸ƒäº†å†…å®¹ï¼Œè®¢é˜…è€…åªè¦è®¢é˜…äº†å‘å¸ƒè€…å°±ä¼šæ¥å—å‘å¸ƒè€…æ¨é€çš„å†…å®¹</p><p><strong>å‘å¸ƒè€…</strong></p><p>ä¸ä¸Šé¢ç”Ÿäº§è€…æ¨¡å¼çš„ä¸åŒï¼Œè¿™é‡Œå‘å¸ƒè€…æ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´è€…ï¼Œæ‰€æœ‰ç»‘å®šäº†è¿™ä¸ªä¸­é—´è€…çš„è®¢é˜…è€…ç»‘å®šçš„é˜Ÿåˆ—éƒ½ä¼šæ¥å—åˆ°è¿™ä¸ªæ¨é€</p><p>å°±åƒa,b,cï¼ˆè®¢é˜…è€…ï¼‰éƒ½å…³æ³¨äº†ä¸€ä¸ªå…¬ä¼—å·ï¼ˆå‘å¸ƒè€…ï¼‰ï¼Œåªè¦å…¬ä¼—å·å‘äº†æ¶ˆæ¯ï¼Œéƒ½ä¼šç”±å¾®ä¿¡çš„æœåŠ¡å™¨ï¼ˆä¸­é—´è€…ï¼‰è½¬å‘è¿™ä¸ªæ¶ˆæ¯åˆ°a,b,cçš„è´¦å·ï¼ˆé˜Ÿåˆ—ï¼‰ä¸Š</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>exchange_declare<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m1'</span><span class="token punctuation">,</span>exchange_type<span class="token operator">=</span><span class="token string">'fanout'</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m1'</span><span class="token punctuation">,</span>                      routing_key<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>                      body<span class="token operator">=</span><span class="token string">'lqz nb'</span><span class="token punctuation">)</span>connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>è®¢é˜…è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># exchange='m1',exchange(ç§˜ä¹¦)çš„åç§°</span><span class="token comment" spellcheck="true"># exchange_type='fanout' , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™æ‰€æœ‰çš„é˜Ÿåˆ—</span>channel<span class="token punctuation">.</span>exchange_declare<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m1'</span><span class="token punctuation">,</span>exchange_type<span class="token operator">=</span><span class="token string">'fanout'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span>result <span class="token operator">=</span> channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>exclusive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>queue_name <span class="token operator">=</span> result<span class="token punctuation">.</span>method<span class="token punctuation">.</span>queue<span class="token keyword">print</span><span class="token punctuation">(</span>queue_name<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span>channel<span class="token punctuation">.</span>queue_bind<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m1'</span><span class="token punctuation">,</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r"</span> <span class="token operator">%</span> body<span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">,</span>on_message_callback<span class="token operator">=</span>callback<span class="token punctuation">,</span>auto_ack<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>start_consuming<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="2-5-å‘å¸ƒè®¢é˜…æ‰©â˜Routing-æŒ‰å…³é”®å­—åŒ¹é…"><a href="#2-5-å‘å¸ƒè®¢é˜…æ‰©â˜Routing-æŒ‰å…³é”®å­—åŒ¹é…" class="headerlink" title="2.5 å‘å¸ƒè®¢é˜…æ‰©â˜Routing(æŒ‰å…³é”®å­—åŒ¹é…)"></a>2.5 å‘å¸ƒè®¢é˜…æ‰©â˜Routing(æŒ‰å…³é”®å­—åŒ¹é…)</h4><p>å‘å¸ƒè®¢é˜…æ¥å—æ¨é€çš„æ¡ä»¶é»˜è®¤æ˜¯åªæœ‰è®¢é˜…è€…èƒ½æ¥å—ï¼Œroutingé™å®šäº†è®¢é˜…è€…å¿…é¡»è¦æœ‰ç»‘å®šè¿™ä¸ªå…³é”®å­—</p><p><strong>å‘å¸ƒè€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>exchange_declare<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m2'</span><span class="token punctuation">,</span>exchange_type<span class="token operator">=</span><span class="token string">'direct'</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m2'</span><span class="token punctuation">,</span>                      routing_key<span class="token operator">=</span><span class="token string">'bnb'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"># å¤šä¸ªå…³é”®å­—ï¼ŒæŒ‡å®šrouting_key</span>                      body<span class="token operator">=</span><span class="token string">'lqz nb'</span><span class="token punctuation">)</span>connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>è®¢é˜…è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># exchange='m1',exchange(ç§˜ä¹¦)çš„åç§°</span><span class="token comment" spellcheck="true"># exchange_type='direct' , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™ä¸åŒçš„å…³é”®å­—</span>channel<span class="token punctuation">.</span>exchange_declare<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m2'</span><span class="token punctuation">,</span>exchange_type<span class="token operator">=</span><span class="token string">'direct'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span>result <span class="token operator">=</span> channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>exclusive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>queue_name <span class="token operator">=</span> result<span class="token punctuation">.</span>method<span class="token punctuation">.</span>queue<span class="token keyword">print</span><span class="token punctuation">(</span>queue_name<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š. å¯ä»¥æœ‰å¤šä¸ª</span>channel<span class="token punctuation">.</span>queue_bind<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m2'</span><span class="token punctuation">,</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">,</span>routing_key<span class="token operator">=</span><span class="token string">'nb'</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>queue_bind<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m2'</span><span class="token punctuation">,</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">,</span>routing_key<span class="token operator">=</span><span class="token string">'bnb'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r"</span> <span class="token operator">%</span> body<span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">,</span>on_message_callback<span class="token operator">=</span>callback<span class="token punctuation">,</span>auto_ack<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>start_consuming<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="2-6-å‘å¸ƒè®¢é˜…é«˜çº§â˜Topic-æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…"><a href="#2-6-å‘å¸ƒè®¢é˜…é«˜çº§â˜Topic-æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…" class="headerlink" title="2.6 å‘å¸ƒè®¢é˜…é«˜çº§â˜Topic(æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…)"></a>2.6 å‘å¸ƒè®¢é˜…é«˜çº§â˜Topic(æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…)</h4><p><strong>å‘å¸ƒè€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>exchange_declare<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m3'</span><span class="token punctuation">,</span>exchange_type<span class="token operator">=</span><span class="token string">'topic'</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m3'</span><span class="token punctuation">,</span>                      <span class="token comment" spellcheck="true"># routing_key='lqz.handsome', #éƒ½èƒ½æ”¶åˆ°</span>                      routing_key<span class="token operator">=</span><span class="token string">'lqz.handsome.xx'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">#åªæœ‰lqz.#èƒ½æ”¶åˆ°</span>                      body<span class="token operator">=</span><span class="token string">'lqz nb'</span><span class="token punctuation">)</span>connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>*åªèƒ½åŠ ä¸€ä¸ªå•è¯</p><p>#å¯ä»¥åŠ ä»»æ„å•è¯å­—ç¬¦</p><p><strong>è®¢é˜…è€…</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span>credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># exchange='m1',exchange(ç§˜ä¹¦)çš„åç§°</span><span class="token comment" spellcheck="true"># exchange_type='direct' , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™ä¸åŒçš„å…³é”®å­—</span>channel<span class="token punctuation">.</span>exchange_declare<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m3'</span><span class="token punctuation">,</span>exchange_type<span class="token operator">=</span><span class="token string">'topic'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span>result <span class="token operator">=</span> channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>exclusive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>queue_name <span class="token operator">=</span> result<span class="token punctuation">.</span>method<span class="token punctuation">.</span>queue<span class="token keyword">print</span><span class="token punctuation">(</span>queue_name<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span>channel<span class="token punctuation">.</span>queue_bind<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'m3'</span><span class="token punctuation">,</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">,</span>routing_key<span class="token operator">=</span><span class="token string">'lqz.#'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r"</span> <span class="token operator">%</span> body<span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>queue<span class="token operator">=</span>queue_name<span class="token punctuation">,</span>on_message_callback<span class="token operator">=</span>callback<span class="token punctuation">,</span>auto_ack<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>start_consuming<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="3-rpcè¿œç¨‹è¿‡ç¨‹è°ƒç”¨"><a href="#3-rpcè¿œç¨‹è¿‡ç¨‹è°ƒç”¨" class="headerlink" title="3 rpcè¿œç¨‹è¿‡ç¨‹è°ƒç”¨"></a>3 rpcè¿œç¨‹è¿‡ç¨‹è°ƒç”¨</h3><p>æ˜¯å¾®æœåŠ¡çš„ä¸€ç§æ¦‚å¿µï¼Œé€šè¿‡httpè¯·æ±‚æˆ–è€…socketè¯·æ±‚å»æœåŠ¡ç«¯è°ƒç”¨å‡½æ•°æˆ–è€…ç±»çš„æ–¹æ³•</p><h4 id="3-1-rabbitmqå®ç°rpc"><a href="#3-1-rabbitmqå®ç°rpc" class="headerlink" title="3.1 rabbitmqå®ç°rpc"></a>3.1 rabbitmqå®ç°rpc</h4><p><strong>æœåŠ¡ç«¯</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pikacredentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"admin"</span><span class="token punctuation">)</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span> credentials<span class="token operator">=</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>channel <span class="token operator">=</span> connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'rpc_queue'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token keyword">elif</span> n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">on_request</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> props<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> int<span class="token punctuation">(</span>body<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" [.] fib(%s)"</span> <span class="token operator">%</span> n<span class="token punctuation">)</span>    response <span class="token operator">=</span> fib<span class="token punctuation">(</span>n<span class="token punctuation">)</span>    ch<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>                     routing_key<span class="token operator">=</span>props<span class="token punctuation">.</span>reply_to<span class="token punctuation">,</span>                     properties<span class="token operator">=</span>pika<span class="token punctuation">.</span>BasicProperties<span class="token punctuation">(</span>correlation_id <span class="token operator">=</span> \                                                         props<span class="token punctuation">.</span>correlation_id<span class="token punctuation">)</span><span class="token punctuation">,</span>                     body<span class="token operator">=</span>str<span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>    ch<span class="token punctuation">.</span>basic_ack<span class="token punctuation">(</span>delivery_tag<span class="token operator">=</span>method<span class="token punctuation">.</span>delivery_tag<span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_qos<span class="token punctuation">(</span>prefetch_count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">'rpc_queue'</span><span class="token punctuation">,</span> on_message_callback<span class="token operator">=</span>on_request<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" [x] Awaiting RPC requests"</span><span class="token punctuation">)</span>channel<span class="token punctuation">.</span>start_consuming<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>å®¢æˆ·ç«¯</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pika<span class="token keyword">import</span> uuid<span class="token keyword">class</span> <span class="token class-name">FibonacciRpcClient</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>credentials <span class="token operator">=</span> pika<span class="token punctuation">.</span>PlainCredentials<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"admin"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>connection <span class="token operator">=</span> pika<span class="token punctuation">.</span>BlockingConnection<span class="token punctuation">(</span>pika<span class="token punctuation">.</span>ConnectionParameters<span class="token punctuation">(</span><span class="token string">'101.133.225.166'</span><span class="token punctuation">,</span> credentials<span class="token operator">=</span>self<span class="token punctuation">.</span>credentials<span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>channel <span class="token operator">=</span> self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>channel<span class="token punctuation">(</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> self<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>queue_declare<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> exclusive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>callback_queue <span class="token operator">=</span> result<span class="token punctuation">.</span>method<span class="token punctuation">.</span>queue        self<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>basic_consume<span class="token punctuation">(</span>            queue<span class="token operator">=</span>self<span class="token punctuation">.</span>callback_queue<span class="token punctuation">,</span>            on_message_callback<span class="token operator">=</span>self<span class="token punctuation">.</span>on_response<span class="token punctuation">,</span>            auto_ack<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">on_response</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> method<span class="token punctuation">,</span> props<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>corr_id <span class="token operator">==</span> props<span class="token punctuation">.</span>correlation_id<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>response <span class="token operator">=</span> body    <span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>response <span class="token operator">=</span> None        self<span class="token punctuation">.</span>corr_id <span class="token operator">=</span> str<span class="token punctuation">(</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>basic_publish<span class="token punctuation">(</span>            exchange<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>            routing_key<span class="token operator">=</span><span class="token string">'rpc_queue'</span><span class="token punctuation">,</span>            properties<span class="token operator">=</span>pika<span class="token punctuation">.</span>BasicProperties<span class="token punctuation">(</span>                reply_to<span class="token operator">=</span>self<span class="token punctuation">.</span>callback_queue<span class="token punctuation">,</span>                correlation_id<span class="token operator">=</span>self<span class="token punctuation">.</span>corr_id<span class="token punctuation">,</span>            <span class="token punctuation">)</span><span class="token punctuation">,</span>            body<span class="token operator">=</span>str<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>response <span class="token keyword">is</span> None<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>process_data_events<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> int<span class="token punctuation">(</span>self<span class="token punctuation">.</span>response<span class="token punctuation">)</span>fibonacci_rpc <span class="token operator">=</span> FibonacciRpcClient<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" [x] Requesting fib(30)"</span><span class="token punctuation">)</span>response <span class="token operator">=</span> fibonacci_rpc<span class="token punctuation">.</span>call<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å¤–ç•Œçœ‹ä¸Šå»ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°çš„call()å‡½æ•°ä¸€æ ·</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" [.] Got %r"</span> <span class="token operator">%</span> response<span class="token punctuation">)</span></code></pre><h4 id="3-2-SimpleXMLRPCServerå®ç°rpc"><a href="#3-2-SimpleXMLRPCServerå®ç°rpc" class="headerlink" title="3.2 SimpleXMLRPCServerå®ç°rpc"></a>3.2 SimpleXMLRPCServerå®ç°rpc</h4><p><strong>æœåŠ¡ç«¯</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> xmlrpc<span class="token punctuation">.</span>server <span class="token keyword">import</span> SimpleXMLRPCServer<span class="token keyword">class</span> <span class="token class-name">RPCServer</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span>RPCServer<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>send_data <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'server:'+str(i): i for i in range(100)&amp;#125;</span>        self<span class="token punctuation">.</span>recv_data <span class="token operator">=</span> None    <span class="token keyword">def</span> <span class="token function">getObj</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'get data'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>send_data    <span class="token keyword">def</span> <span class="token function">sendObj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'send data'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>recv_data <span class="token operator">=</span> data        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>recv_data<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># SimpleXMLRPCServer</span>server <span class="token operator">=</span> SimpleXMLRPCServer<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'localhost'</span><span class="token punctuation">,</span><span class="token number">4242</span><span class="token punctuation">)</span><span class="token punctuation">,</span> allow_none<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>server<span class="token punctuation">.</span>register_introspection_functions<span class="token punctuation">(</span><span class="token punctuation">)</span>server<span class="token punctuation">.</span>register_instance<span class="token punctuation">(</span>RPCServer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>server<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>å®¢æˆ·ç«¯</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">from</span> xmlrpc<span class="token punctuation">.</span>client <span class="token keyword">import</span> ServerProxy<span class="token comment" spellcheck="true"># SimpleXMLRPCServer</span><span class="token keyword">def</span> <span class="token function">xmlrpc_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'xmlrpc client'</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ServerProxy<span class="token punctuation">(</span><span class="token string">'http://localhost:4242'</span><span class="token punctuation">)</span>    data <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'client:'+str(i): i for i in range(100)&amp;#125;</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        a<span class="token operator">=</span>c<span class="token punctuation">.</span>getObj<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        c<span class="token punctuation">.</span>sendObj<span class="token punctuation">(</span>data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'xmlrpc total time %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    xmlrpc_client<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="3-3-ZeroRPCå®ç°rpc"><a href="#3-3-ZeroRPCå®ç°rpc" class="headerlink" title="3.3 ZeroRPCå®ç°rpc"></a>3.3 ZeroRPCå®ç°rpc</h4><p><strong>æœåŠ¡ç«¯</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> zerorpc<span class="token keyword">class</span> <span class="token class-name">RPCServer</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span>RPCServer<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>send_data <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'server:'+str(i): i for i in range(100)&amp;#125;</span>        self<span class="token punctuation">.</span>recv_data <span class="token operator">=</span> None    <span class="token keyword">def</span> <span class="token function">getObj</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'get data'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>send_data    <span class="token keyword">def</span> <span class="token function">sendObj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'send data'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>recv_data <span class="token operator">=</span> data        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>recv_data<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># zerorpc</span>s <span class="token operator">=</span> zerorpc<span class="token punctuation">.</span>Server<span class="token punctuation">(</span>RPCServer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token string">'tcp://0.0.0.0:4243'</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><strong>å®¢æˆ·ç«¯</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> zerorpc<span class="token keyword">import</span> time<span class="token comment" spellcheck="true"># zerorpc</span><span class="token keyword">def</span> <span class="token function">zerorpc_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'zerorpc client'</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> zerorpc<span class="token punctuation">.</span>Client<span class="token punctuation">(</span><span class="token punctuation">)</span>    c<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'tcp://127.0.0.1:4243'</span><span class="token punctuation">)</span>    data <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'client:'+str(i): i for i in range(100)&amp;#125;</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        a<span class="token operator">=</span>c<span class="token punctuation">.</span>getObj<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        c<span class="token punctuation">.</span>sendObj<span class="token punctuation">(</span>data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'total time %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    zerorpc_client<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»ï¼š&lt;strong&gt;&lt;a href=&quot;http://mrw.so/6m21VY&quot;&gt;http://mrw.so/6m21VY&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-å®‰è£…&quot;&gt;&lt;a href=&quot;#1-å®‰è£…&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="Rabbitmq" scheme="http://huang_zhao.gitee.io/task/tags/Rabbitmq/"/>
    
    <category term="Rpc" scheme="http://huang_zhao.gitee.io/task/tags/Rpc/"/>
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="http://huang_zhao.gitee.io/task/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>æ¶ˆæ¯é˜Ÿåˆ—</title>
    <link href="http://huang_zhao.gitee.io/task/2020/03/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    <id>http://huang_zhao.gitee.io/task/2020/03/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</id>
    <published>2020-03-24T12:30:17.000Z</published>
    <updated>2020-09-09T11:19:07.186Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1 å®šä¹‰"></a>1 å®šä¹‰</h3><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ˜¯ä¸€ç§æ•°æ®ç»“æ„</p><p>ç”Ÿäº§è€…ï¼šæŠŠæ•°æ®æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­çš„ä¸€æ–¹</p><p>æ¶ˆè´¹è€…ï¼šæŠŠæ•°æ®ä»é˜Ÿåˆ—ä¸­å–å‡ºçš„ä¸€æ–¹</p><h3 id="2-å­˜åœ¨çš„æ„ä¹‰"><a href="#2-å­˜åœ¨çš„æ„ä¹‰" class="headerlink" title="2 å­˜åœ¨çš„æ„ä¹‰"></a>2 å­˜åœ¨çš„æ„ä¹‰</h3><h4 id="2-1-è§£è€¦"><a href="#2-1-è§£è€¦" class="headerlink" title="2.1 è§£è€¦"></a>2.1 è§£è€¦</h4><p>åœºæ™¯ä¸€ï¼š</p><p>å­˜åœ¨ä¸‰ä¸ªç³»ç»Ÿ</p><p>aç³»ç»Ÿè¦ç»™bç³»ç»Ÿå‘é€æ•°æ®ï¼Œè°ƒç”¨ç³»ç»Ÿbçš„æ¥å£</p><p>aç³»ç»Ÿè¦ç»™cç³»ç»Ÿå‘é€æ•°æ®ï¼Œè°ƒç”¨ç³»ç»Ÿcçš„æ¥å£</p><p>å¦‚æœæœ‰ä¸€å¤©bä¸éœ€è¦açš„æ•°æ®äº†ï¼Œå°±éœ€è¦è®©aæ³¨é‡Šæ‰æ‰bæ¥å£çš„ä»£ç </p><p>å¦‚æœæ–°å¢ç³»ç»Ÿdè¦æ¥å—æ•°æ®ï¼Œåˆè¦å¢åŠ è°ƒç”¨ç³»ç»Ÿdçš„ä»£ç </p><p><strong>è¿™äº›è°ƒç”¨é€»è¾‘éƒ½æ˜¯ä¸€äº›é‡å¤çš„ä¸å¯é¿å…çš„åŠ³åŠ¨</strong></p><p>æ­¤å¤„çš„aç³»ç»Ÿä¸bcdç³»ç»Ÿé«˜åº¦è€¦åˆäº†ï¼Œå› ä¸ºä¹‹é—´çš„æ•°æ®äº¤äº’å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œæˆ–è€…æ¥å—æ•°æ®çš„ç³»ç»Ÿå‡ºç°äº†é—®é¢˜ï¼Œé‚£ä¹ˆaç³»ç»Ÿçš„è°ƒç”¨é€»è¾‘è¿˜è¦æ€è€ƒéœ€ä¸éœ€è¦ç»§ç»­å‘é€æ•°æ®</p><p>åœºæ™¯äºŒï¼š</p><p>åœ¨ä¸Šè¿°åœºæ™¯åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”Ÿäº§è€…ï¼ˆaç³»ç»Ÿï¼‰ä¸æ¶ˆè´¹è€…ï¼ˆbcdç³»ç»Ÿï¼‰ä¹‹é—´çš„ä¸€ä¸ªæ•°æ®äº¤äº’ä¸­è½¬ç«™</p><p>aç³»ç»Ÿå‘å¸ƒæ¶ˆæ¯ï¼Œbcdè®¢é˜…æ¶ˆæ¯ï¼Œå¦‚æœä¸éœ€è¦è®¢é˜…å°±å–æ¶ˆè®¢é˜…å³å¯ï¼Œå¹¶ä¸éœ€è¦ä¿®æ”¹å‘å¸ƒæ¶ˆæ¯çš„ä»£ç </p><h4 id="2-2-å¼‚æ­¥"><a href="#2-2-å¼‚æ­¥" class="headerlink" title="2.2 å¼‚æ­¥"></a>2.2 å¼‚æ­¥</h4><p>æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå¦‚æœaç³»ç»Ÿè¦å®Œæˆ<strong>äº§ç”Ÿæ•°æ®ï¼ˆ100msï¼‰</strong>ï¼Œ<strong>å‘é€æ•°æ®è‡³ç³»ç»Ÿbï¼ˆ300msï¼‰</strong>ï¼Œ<strong>å‘é€æ•°æ®è‡³ç³»ç»Ÿcï¼ˆ300msï¼‰</strong></p><p>æ­¤æ—¶aç³»ç»Ÿå®Œæˆæ¶ˆæ¯å‘é€æ˜¯ä¸€ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œå®Œæˆæ—¶é—´æ˜¯100+300+300=700ms</p><p>å¦‚æœç”¨äº†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œaç³»ç»Ÿåªè¦äº§ç”Ÿæ¶ˆæ¯ï¼Œå¹¶å‘é€è‡³æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å›è°ƒè®¢é˜…è¿‡çš„ç³»ç»Ÿæ¥å£</p><p>æ­¤æ—¶aç³»ç»Ÿå®Œæˆå‘é€æ¶ˆæ¯çš„æ—¶é—´æ˜¯100ms</p><h4 id="2-3-å‰Šå³°-é™æµ"><a href="#2-3-å‰Šå³°-é™æµ" class="headerlink" title="2.3 å‰Šå³°/é™æµ"></a>2.3 å‰Šå³°/é™æµ</h4><p>å¦‚æœæœ‰ä¸€ä¸ªå•†åœºç½‘ç«™å‡ºäº†ä¿ƒé”€æ´»åŠ¨ï¼Œæ­¤æ—¶æ¯ç§’çš„è¯·æ±‚æ•°æ˜¯5000ï¼Œä¸€èˆ¬çš„mysqlåªèƒ½å¤„ç†2000ä¸ªå·¦å³çš„å¹¶å‘ã€‚</p><p>æ­¤æ—¶åœ¨ç”¨æˆ·ä¸mysqlä¹‹é—´åŠ å…¥mqï¼Œå®ƒå¯ä»¥æ¥å—è€…5000ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯åªç»™mysqlå‘é€2000ä¸ªã€‚</p><p>å°±åƒä¸€ä¸ªå–·æ°´çš„ç®¡å­ï¼Œå¦‚æœçªç„¶æµæ°´é‡è¿‡å¤§ï¼Œç®¡å­å°±ä¼šè£‚å¼€ï¼Œæˆ‘ä»¬é€šè¿‡å¼€å…³æŠŠæ°´æµé‡æ”¾å°ä¸€ç‚¹å°±é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯æˆ‘ä»¬è¦çŸ¥é“ï¼Œåœ¨è¿™ä¸ªå¼€å…³åæ°´å‹è¿˜æ˜¯è¿™ä¹ˆå¤§ï¼Œmqåšåˆ°çš„åªæ˜¯é™åˆ¶æœ€å¤§é‡ã€‚</p><h4 id="2-4-å…¶ä»–åº”ç”¨åœºæ™¯"><a href="#2-4-å…¶ä»–åº”ç”¨åœºæ™¯" class="headerlink" title="2.4 å…¶ä»–åº”ç”¨åœºæ™¯"></a>2.4 å…¶ä»–åº”ç”¨åœºæ™¯</h4><ul><li><strong>æ—¥å¿—å¤„ç†</strong>ï¼šå°†å¤§é‡æ—¥å¿—å­˜å‚¨åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼ˆä¸€èˆ¬é‡‡ç”¨åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—kafkaï¼‰ï¼Œè§£å†³å¤§é‡æ—¥å¿—ä¼ è¾“çš„é—®é¢˜ã€‚å…¶ä¸­ï¼Œæ¶ˆæ¯é˜Ÿåˆ—è´Ÿè´£æ—¥å¿—æ•°æ®çš„æ¥æ”¶ï¼Œå­˜å‚¨å’Œè½¬å‘ï¼›</li><li><strong>æ¶ˆæ¯é€šè®¯</strong>ï¼šç‚¹å¯¹ç‚¹é€šè®¯æˆ–èŠå¤©å®¤é€šè®¯ã€‚</li></ul><h3 id="3-ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¼šæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹"><a href="#3-ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¼šæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹" class="headerlink" title="3 ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¼šæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹"></a>3 ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¼šæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹å…¶å®å°±æ˜¯ä¸Šæ–‡ä¸­è°ˆåˆ°çš„ï¼Œåœ¨ç‰¹æ®Šåœºæ™¯ä¸‹çš„åº”ç”¨å¥½å¤„ï¼Œè§£è€¦ã€å¼‚æ­¥ä¸å‰Šå³°ç­‰ã€‚</p><p><strong>ç³»ç»Ÿå¯ç”¨æ€§</strong>ï¼š<br> ç³»ç»Ÿå› ä¸ºä¾èµ–ä¸MQæ¶ˆæ¯é˜Ÿåˆ—è¿™ä¸ªæœåŠ¡ï¼Œè‹¥è¿™ä¸ªæœåŠ¡å´©æºƒäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ•´ä¸ªç³»ç»Ÿå°†ä¸å¯ç”¨ã€‚ä¸ºæ­¤å¾€å¾€æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡é›†ç¾¤/åˆ†å¸ƒå¼éƒ¨ç½²æ¥å®ç°MQé«˜å¯ç”¨çš„ã€‚</p><p>é«˜å¯ç”¨ï¼šé€šå¸¸æ¥æè¿°ä¸€ä¸ªç³»ç»Ÿç»è¿‡ä¸“é—¨çš„è®¾è®¡ï¼Œä»è€Œå‡å°‘åœå·¥æ—¶é—´ï¼Œè€Œä¿æŒå…¶æœåŠ¡çš„é«˜åº¦å¯ç”¨æ€§</p><p><strong>ç³»ç»Ÿå¤æ‚åº¦</strong>ï¼š<br> æˆ‘ä»¬å°†æ•°æ®å†™åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸Šï¼Œå°±æœ‰å¯èƒ½ä¼šå­˜åœ¨æ•°æ®ä¸¢å¤±çš„æƒ…å†µã€‚ä»¥åŠæˆ‘ä»¬å¦‚ä½•ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ç­‰é—®é¢˜ã€‚</p><p><strong>ä¸€è‡´æ€§é—®é¢˜</strong>ï¼š<br> Aç³»ç»Ÿå°†è¯·æ±‚å†™å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—åå°±è¿”å›è¯·æ±‚æˆåŠŸäº†ï¼Œå‡è®¾åœ¨å¤šæœºéƒ¨ç½²çš„æ—¶å€™ï¼Œç³»ç»ŸBã€Cå†™åº“æˆåŠŸï¼Œå‡è®¾Då†™å…¥å¤±è´¥äº†ï¼Œè¿™ç§æƒ…å†µä¸‹å°±ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><p><a href="https://www.jianshu.com/p/ec7c2503c3ef">https://www.jianshu.com/p/ec7c2503c3ef</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-å®šä¹‰&quot;&gt;&lt;a href=&quot;#1-å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1 å®šä¹‰&quot;&gt;&lt;/a&gt;1 å®šä¹‰&lt;/h3&gt;&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ˜¯ä¸€ç§æ•°æ®ç»“æ„&lt;/p&gt;
&lt;p&gt;ç”Ÿäº§è€…ï¼šæŠŠæ•°æ®æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­çš„ä¸€æ–¹&lt;/p&gt;
&lt;p&gt;æ¶ˆè´¹è€…ï¼šæŠŠæ•°æ®ä»é˜Ÿåˆ—ä¸­å–å‡ºçš„ä¸€æ–¹&lt;/</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="http://huang_zhao.gitee.io/task/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>requestsæ¨¡å—ä½¿ç”¨</title>
    <link href="http://huang_zhao.gitee.io/task/2020/03/21/requests%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/"/>
    <id>http://huang_zhao.gitee.io/task/2020/03/21/requests%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/</id>
    <published>2020-03-21T05:20:11.000Z</published>
    <updated>2020-08-26T01:00:39.257Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-å‘é€è¯·æ±‚"><a href="#1-å‘é€è¯·æ±‚" class="headerlink" title="1 å‘é€è¯·æ±‚"></a>1 å‘é€è¯·æ±‚</h4><pre class=" language-python"><code class="language-python">r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://images.cnblogs.com/cnblogs_com/xuexianqi/1749514/o_20042405405202.png'</span><span class="token punctuation">)</span></code></pre><h4 id="2-è¯·æ±‚åœ°å€ä¸­æºå¸¦æ•°æ®"><a href="#2-è¯·æ±‚åœ°å€ä¸­æºå¸¦æ•°æ®" class="headerlink" title="2 è¯·æ±‚åœ°å€ä¸­æºå¸¦æ•°æ®"></a>2 è¯·æ±‚åœ°å€ä¸­æºå¸¦æ•°æ®</h4><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># urlçš„ç¼–ç å’Œè§£ç </span><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlencode<span class="token punctuation">,</span>unquoteheader <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>     <span class="token string">'user-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.105 Safari/537.36'</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>res<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/s'</span><span class="token punctuation">,</span>headers<span class="token operator">=</span>header<span class="token punctuation">,</span>params<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'wd':'ç¾å¥³'&amp;#125;)</span></code></pre><h4 id="3-è¯·æ±‚ä¸­å¸¦cookie"><a href="#3-è¯·æ±‚ä¸­å¸¦cookie" class="headerlink" title="3 è¯·æ±‚ä¸­å¸¦cookie"></a>3 è¯·æ±‚ä¸­å¸¦cookie</h4><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># æ–¹å¼ä¸€ï¼šåœ¨headersä¸­æºå¸¦</span>header <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>    <span class="token string">'cookie'</span><span class="token punctuation">:</span><span class="token string">'name=hz'</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/test/'</span><span class="token punctuation">,</span>headers<span class="token operator">=</span>header<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ–¹å¼äºŒï¼šæ·»åŠ cookieså‚æ•°</span>r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/test/'</span><span class="token punctuation">,</span>cookies<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'name':'hz'&amp;#125;)</span></code></pre><h4 id="4-postè¯·æ±‚å‘é€urlå’Œjsonæ ¼å¼æ•°æ®"><a href="#4-postè¯·æ±‚å‘é€urlå’Œjsonæ ¼å¼æ•°æ®" class="headerlink" title="4 postè¯·æ±‚å‘é€urlå’Œjsonæ ¼å¼æ•°æ®"></a>4 postè¯·æ±‚å‘é€urlå’Œjsonæ ¼å¼æ•°æ®</h4><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># urlæ ¼å¼</span>r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/test/'</span><span class="token punctuation">,</span>data<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'name':'hz'&amp;#125;)</span><span class="token comment" spellcheck="true"># postè¯·æ±‚å‘é€jsonæ ¼å¼æ•°æ®</span>r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/test/'</span><span class="token punctuation">,</span>json<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'name':'hz'&amp;#125;)</span></code></pre><h4 id="5-sessionå‡½æ•°è‡ªåŠ¨å¤„ç†æºå¸¦cookie"><a href="#5-sessionå‡½æ•°è‡ªåŠ¨å¤„ç†æºå¸¦cookie" class="headerlink" title="5 sessionå‡½æ•°è‡ªåŠ¨å¤„ç†æºå¸¦cookie"></a>5 sessionå‡½æ•°è‡ªåŠ¨å¤„ç†æºå¸¦cookie</h4><pre class=" language-python"><code class="language-python">session <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>r <span class="token operator">=</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/login/'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span>r2 <span class="token operator">=</span> session<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/order/'</span><span class="token punctuation">)</span></code></pre><h4 id="6-responseå¯¹è±¡çš„æ–¹æ³•"><a href="#6-responseå¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="6 responseå¯¹è±¡çš„æ–¹æ³•"></a>6 responseå¯¹è±¡çš„æ–¹æ³•</h4><pre class=" language-python"><code class="language-python">respone<span class="token punctuation">.</span>text <span class="token comment" spellcheck="true"># å“åº”çš„æ–‡æœ¬ä¿¡æ¯</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>content<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å“åº”ä½“çš„äºŒè¿›åˆ¶</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å“åº”çŠ¶æ€ç </span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># å“åº”å¤´</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># cookie</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>get_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#  æŠŠcookieè½¬æˆå­—å…¸</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># keyå’Œvalue</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>url<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># è¯·æ±‚çš„url</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>history<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">#[]æ”¾é‡å®šå‘ä¹‹å‰çš„åœ°å€</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>encoding<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å“åº”çš„ç¼–ç æ–¹å¼</span>respone<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å›¾ç‰‡ï¼Œè§†é¢‘ï¼Œå¤§æ–‡ä»¶ï¼Œä¸€ç‚¹ä¸€ç‚¹å¾ªç¯å–å‡ºæ¥</span></code></pre><h4 id="7-ç¼–ç é—®é¢˜"><a href="#7-ç¼–ç é—®é¢˜" class="headerlink" title="7 ç¼–ç é—®é¢˜"></a>7 ç¼–ç é—®é¢˜</h4><pre class=" language-python"><code class="language-python">res<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://www.autohome.com/news'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ä¸€æ—¦æ‰“å°å‡ºæ¥å‡ºç°ä¹±ç é—®é¢˜</span><span class="token comment" spellcheck="true"># æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨è®¾å®šç¼–ç æ ¼å¼</span>res<span class="token punctuation">.</span>encoding<span class="token operator">=</span><span class="token string">'gb2312'</span><span class="token comment" spellcheck="true"># æ–¹å¼äºŒ</span>res<span class="token punctuation">.</span>encoding<span class="token operator">=</span>res<span class="token punctuation">.</span>apparent_encoding<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span></code></pre><h4 id="8-jsonè§£æ"><a href="#8-jsonè§£æ" class="headerlink" title="8 jsonè§£æ"></a>8 jsonè§£æ</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> jsonrespone<span class="token operator">=</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8000/index/'</span><span class="token punctuation">,</span>data<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'name':'lqz'&amp;#125;)</span><span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>respone<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å“åº”çš„æ–‡æœ¬</span><span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>respone<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>respone<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># ç›¸å½“äºä¸Šé¢é‚£å¥è¯</span></code></pre><h4 id="9-ä½¿ç”¨ä»£ç†"><a href="#9-ä½¿ç”¨ä»£ç†" class="headerlink" title="9 ä½¿ç”¨ä»£ç†"></a>9 ä½¿ç”¨ä»£ç†</h4><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># respone=requests.get('http://127.0.0.1:8000/index/',proxies=&amp;#123;'http':'ä»£ç†çš„åœ°å€å’Œç«¯å£å·',&amp;#125;)</span><span class="token comment" spellcheck="true"># ä»£ç†ï¼Œå…è´¹ä»£ç†ï¼Œæ”¶è´¹ä»£ç†èŠ±é’±ä¹°</span><span class="token comment" spellcheck="true"># ä»£ç†æ± ï¼šåˆ—è¡¨æ”¾äº†ä¸€å †ä»£ç†ipï¼Œæ¯æ¬¡éšæœºå–ä¸€ä¸ªï¼Œå†å‘è¯·æ±‚å°±ä¸ä¼šå°ipäº†</span><span class="token comment" spellcheck="true"># é«˜åŒ¿å’Œé€æ˜ä»£ç†ï¼Ÿå¦‚æœä½¿ç”¨é«˜åŒ¿ä»£ç†ï¼Œåç«¯æ— è®ºå¦‚ä½•æ‹¿ä¸åˆ°ä½ çš„ipï¼Œä½¿ç”¨é€æ˜ï¼Œåç«¯èƒ½å¤Ÿæ‹¿åˆ°ä½ çš„ip</span><span class="token comment" spellcheck="true"># åç«¯å¦‚ä½•æ‹¿åˆ°é€æ˜ä»£ç†çš„ipï¼Œ  åç«¯ï¼šX-Forwarded-For</span><span class="token comment" spellcheck="true"># respone=requests.get('https://www.baidu.com/',proxies=&amp;#123;'http':'27.46.20.226:8888',&amp;#125;)</span><span class="token comment" spellcheck="true"># print(respone.text)</span></code></pre><h4 id="10-å…¶ä»–æ“ä½œ"><a href="#10-å…¶ä»–æ“ä½œ" class="headerlink" title="10 å…¶ä»–æ“ä½œ"></a>10 å…¶ä»–æ“ä½œ</h4><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 11 è¶…æ—¶è®¾ç½®</span><span class="token comment" spellcheck="true"># import requests</span><span class="token comment" spellcheck="true"># respone=requests.get('https://www.baidu.com',</span><span class="token comment" spellcheck="true">#                      timeout=0.0001)</span><span class="token comment" spellcheck="true"># 12 è®¤è¯è®¾ç½®ï¼ˆä½ è§ä¸åˆ°äº†ï¼‰</span><span class="token comment" spellcheck="true"># import requests</span><span class="token comment" spellcheck="true"># r=requests.get('xxx',auth=('user','password'))</span><span class="token comment" spellcheck="true"># print(r.status_code)</span><span class="token comment" spellcheck="true"># 13 å¼‚å¸¸å¤„ç†</span><span class="token comment" spellcheck="true"># import requests</span><span class="token comment" spellcheck="true"># from requests.exceptions import * #å¯ä»¥æŸ¥çœ‹requests.exceptionsè·å–å¼‚å¸¸ç±»å‹</span><span class="token comment" spellcheck="true">#</span><span class="token comment" spellcheck="true"># try:</span><span class="token comment" spellcheck="true">#     r=requests.get('http://www.baidu.com',timeout=0.00001)</span><span class="token comment" spellcheck="true"># # except ReadTimeout:</span><span class="token comment" spellcheck="true"># #     print('===:')</span><span class="token comment" spellcheck="true"># except Exception as e:</span><span class="token comment" spellcheck="true">#     print(e)</span><span class="token comment" spellcheck="true"># 14 ä¸Šä¼ æ–‡ä»¶</span><span class="token comment" spellcheck="true"># res=requests.post('http://127.0.0.1:8000/index/',files=&amp;#123;'myfile':open('a.jpg','rb')&amp;#125;)</span><span class="token comment" spellcheck="true"># print(res.text)</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;1-å‘é€è¯·æ±‚&quot;&gt;&lt;a href=&quot;#1-å‘é€è¯·æ±‚&quot; class=&quot;headerlink&quot; title=&quot;1 å‘é€è¯·æ±‚&quot;&gt;&lt;/a&gt;1 å‘é€è¯·æ±‚&lt;/h4&gt;&lt;pre class=&quot; language-python&quot;&gt;&lt;code class=&quot;language-pytho</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="http://huang_zhao.gitee.io/task/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="çˆ¬è™«" scheme="http://huang_zhao.gitee.io/task/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="pythonæ¨¡å—" scheme="http://huang_zhao.gitee.io/task/tags/python%E6%A8%A1%E5%9D%97/"/>
    
  </entry>
  
</feed>
